{"remainingRequest":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js!C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Project\\CBPO\\plat-mw-web\\src\\components\\page\\dashboard\\DashboardMain.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Project\\CBPO\\plat-mw-web\\src\\components\\page\\dashboard\\DashboardMain.vue","mtime":1629276564696},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626076743241},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1626076746842},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1620898435163},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626076743241},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1620898436811}],"contextDependencies":[],"result":["import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/es6.array.from\";\nimport \"core-js/modules/es6.regexp.to-string\";\nimport \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.array.find\";\nimport \"core-js/modules/es6.function.name\";\nimport _slicedToArray from \"C:/Project/CBPO/plat-mw-web/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport \"core-js/modules/es6.array.find-index\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.string.iterator\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:/Project/CBPO/plat-mw-web/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport _defineProperty from \"C:/Project/CBPO/plat-mw-web/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport * as TYPE from '@/actionTypes.js';\nimport PermissionsMixin from '@/components/common/PermissionsMixin';\nimport { configDailyViolatorWithInventory } from '@/store/modules/page/dashboard/sub_configs/config-daily-violator-with-inventory';\nimport $ from 'jquery';\nimport _ from 'lodash';\nimport { Promise } from 'q';\nimport { mapActions, mapGetters } from 'vuex';\nimport { DashboardFilterSourceType } from '@/constants/Report';\nimport { DashboardAllSellerTitle, DashboardViolatorTitle, DashboardViolatorTitleNoTrueMap, DashboardWidgetId } from '@/constants/Dashboard';\nexport default {\n  props: ['selected'],\n  mixins: [PermissionsMixin],\n  data: function data() {\n    return {\n      dashboardFilterSourceType: _.cloneDeep(DashboardFilterSourceType),\n      dashboardAllSellerTitle: _.cloneDeep(DashboardAllSellerTitle),\n      dashboardViolatorTitle: _.cloneDeep(DashboardViolatorTitle),\n      dashboardViolatorTitleNoTrueMap: _.cloneDeep(DashboardViolatorTitleNoTrueMap),\n      dashboardWidgetId: _.cloneDeep(DashboardWidgetId),\n      dates: [],\n      selectedDate: null,\n      sdkConfigInitialized: false,\n      sdkConfigForceReload: 0\n    };\n  },\n  computed: _objectSpread({}, mapGetters({\n    getPermissions: \"mw/\".concat(TYPE.GET_PERMISSIONS),\n    dataViolator: \"mw/dashboard/\".concat(TYPE.GET_DATA_VIOLATOR),\n    dataViolatorWithInventory: \"mw/dashboard/\".concat(TYPE.GET_DATA_VIOLATOR_WITH_INVENTORY),\n    dataTopViolatedProductViolator: \"mw/dashboard/\".concat(TYPE.GET_DATA_TOP_VIOLATED_PRODUCTS_7D),\n    dataNew1stTimeViolator: \"mw/dashboard/\".concat(TYPE.GET_DATA_NEW_1ST_TIME),\n    dataNew2ndTimeViolator: \"mw/dashboard/\".concat(TYPE.GET_DATA_NEW_2ND_TIME),\n    dataSellerViolations7d: \"mw/dashboard/\".concat(TYPE.GET_DATA_SELLER_VIOLATIONS_7D),\n    dataAvgPercentageOffMap: \"mw/dashboard/\".concat(TYPE.GET_DATA_AVG_PERCENTAGE_OFF_MAP),\n    dataNewRepeatViolators: \"mw/dashboard/\".concat(TYPE.GET_DATA_NEW_REPEAT_VIOLATORS),\n    dataAllRepeatOffenders: \"mw/dashboard/\".concat(TYPE.GET_DATA_ALL_REPEAT_OFFENDERS),\n    mainConfig: \"mw/dashboard/\".concat(TYPE.GET_DATA_CONFIG_VIOLATOR),\n    downloadDailyLoader: \"mw/dashboard/\".concat(TYPE.GET_DOWNLOAD_DAILY_LOADER),\n    downloadNewRepeatLoader: \"mw/dashboard/\".concat(TYPE.GET_DOWNLOAD_NEW_REPEAT_LOADER),\n    dataDateHistorical: \"mw/dashboard/\".concat(TYPE.GET_DATE_HISTORICAL),\n    orgIs: \"mw/\".concat(TYPE.GET_ORG_IS)\n  })),\n  methods: _objectSpread(_objectSpread({}, mapActions({\n    fetchDataViolator: \"mw/dashboard/\".concat(TYPE.FETCH_DATA_VIOLATOR),\n    fetchAllWidgetData: \"mw/dashboard/\".concat(TYPE.FETCH_ALL_WIDGET),\n    fetchDataDailyWithInventoryViolator: \"mw/dashboard/\".concat(TYPE.FETCH_DATA_VIOLATOR_WITH_INVENTORY),\n    fetchDataTopViolatedProduct: \"mw/dashboard/\".concat(TYPE.FETCH_DATA_TOP_VIOLATED_PRODUCTS_7D),\n    fetchDataNew1stTimeViolator: \"mw/dashboard/\".concat(TYPE.FETCH_DATA_NEW_1ST_TIME),\n    fetchDataNew2ndTimeViolator: \"mw/dashboard/\".concat(TYPE.FETCH_DATA_NEW_2ND_TIME),\n    fetchDataSellerViolations7d: \"mw/dashboard/\".concat(TYPE.FETCH_DATA_SELLER_VIOLATIONS_7D),\n    fetchDataAvgPercentageOffMap: \"mw/dashboard/\".concat(TYPE.FETCH_DATA_AVG_PERCENTAGE_OFF_MAP),\n    fetchDataNewRepeatViolators: \"mw/dashboard/\".concat(TYPE.FETCH_DATA_NEW_REPEAT_VIOLATORS),\n    fetchDataAllRepeatOffenders: \"mw/dashboard/\".concat(TYPE.FETCH_DATA_ALL_REPEAT_OFFENDERS),\n    downloadDailyViolations: \"mw/dashboard/\".concat(TYPE.FETCH_DOWNLOAD_DAILY_VIOLATIONS),\n    downloadNewRepeatViolators: \"mw/dashboard/\".concat(TYPE.FETCH_DOWNLOAD_NEW_REPEAT_VIOLATORS),\n    downloadDailyViolationsWithInventory: \"mw/dashboard/\".concat(TYPE.FETCH_DOWNLOAD_DAILY_VIOLATIONS_WITH_INVENTORY),\n    fetchDataDateHistorical: \"mw/dashboard/\".concat(TYPE.FETCH_DATE_HISTORICAL),\n    setSelectedDate: \"mw/dashboard/\".concat(TYPE.SET_SELECTED_DATE)\n  })), {}, {\n    syncMarketplaceParams: function syncMarketplaceParams(marketplace) {\n      return _.includes(marketplace, 'amazon') ? marketplace.replace(/[_]/g, '.') : marketplace;\n    },\n    handleDataViolator: function handleDataViolator(marketplace) {\n      var _this = this;\n\n      return new Promise(function (resolve, reject) {\n        _this.fetchDataViolator(_this.useShareTokenIfNeed({\n          date: _this.selectedDate,\n          marketplace: marketplace,\n          brand_id: _this.selected.brand._id,\n          seller_type: _this.selected.seller_type,\n          fulfillment: _this.selected.fulfillment,\n          show_upc_in_dashboard: _this.selected.brand.show_upc_in_dashboard\n        })).then(function () {\n          var fakeDaily = _objectSpread({}, _this.dataViolator);\n\n          fakeDaily = _this.emptyRowData(fakeDaily, _this.getIgnoredColumnsDaily(_this.selected.brand));\n\n          if (_this.selected.brand && !_this.selected.brand.show_upc_in_dashboard) {\n            fakeDaily = _this.removeColumnData(fakeDaily, ['upc/ean']);\n          }\n\n          window.mw_dashboard_main_daily_visitors = fakeDaily;\n          resolve();\n        });\n      });\n    },\n\n    /**\r\n     * Use share token\r\n     * Add needed source param\r\n     */\n    useShareTokenIfNeed: function useShareTokenIfNeed(object) {\n      if (this.selected.share_token) {\n        _.assign(object, {\n          share_token: this.selected.share_token\n        });\n      }\n\n      _.assign(object, {\n        source: this.selected.source\n      });\n\n      _.assign(object, {\n        is_true_map: !!this.selected.brand.true_map_report\n      });\n\n      return object;\n    },\n    getIgnoredColumnsDaily: function getIgnoredColumnsDaily(brand) {\n      var ignoredColumns = [];\n\n      if (brand && brand.ignore_screenshot) {\n        ignoredColumns.push('screenshot', 'captured_at');\n      }\n\n      if (brand && brand.ignore_price_tracking) {\n        ignoredColumns.push('map_price', 'diff', 'diff_percent');\n      }\n\n      if (brand && this.selected.marketplace === 'google_shopping') {\n        ignoredColumns.push('fba', 'prime');\n      }\n\n      return ignoredColumns;\n    },\n    handleDataDailyWithInventoryViolator: function handleDataDailyWithInventoryViolator(marketplace) {\n      var _this2 = this;\n\n      return new Promise(function (resolve, reject) {\n        _this2.fetchDataDailyWithInventoryViolator({\n          date: _this2.selectedDate,\n          marketplace: marketplace,\n          brand_id: _this2.selected.brand._id,\n          seller_type: _this2.selected.seller_type,\n          fulfillment: _this2.selected.fulfillment,\n          show_upc_in_dashboard: _this2.selected.brand.show_upc_in_dashboard,\n          source: _this2.selected.source,\n          is_true_map: !!_this2.selected.brand.true_map_report\n        }).then(function () {\n          var fakeDaily = _objectSpread({}, _this2.dataViolatorWithInventory);\n\n          fakeDaily = _this2.emptyRowData(fakeDaily, _this2.getIgnoredColumnsDaily(_this2.selected.brand));\n\n          if (_this2.selected.brand && !_this2.selected.brand.show_upc_in_dashboard) {\n            fakeDaily = _this2.removeColumnData(fakeDaily, ['upc/ean']);\n          }\n\n          window.mw_dashboard_main_daily_with_inventory_visitors = fakeDaily;\n          resolve();\n        });\n      });\n    },\n    handleDataTopViolatedProduct: function handleDataTopViolatedProduct(marketplace) {\n      var _this3 = this;\n\n      return new Promise(function (resolve, reject) {\n        _this3.fetchDataTopViolatedProduct(_this3.useShareTokenIfNeed({\n          date: _this3.selectedDate,\n          marketplace: marketplace,\n          brand_id: _this3.selected.brand._id,\n          seller_type: _this3.selected.seller_type,\n          fulfillment: _this3.selected.fulfillment\n        })).then(function () {\n          window.mw_dashboard_top_violated = _this3.dataTopViolatedProductViolator;\n          resolve();\n        });\n      });\n    },\n    handleDataNew1stTimeViolator: function handleDataNew1stTimeViolator(marketplace) {\n      var _this4 = this;\n\n      return new Promise(function (resolve, reject) {\n        _this4.fetchDataNew1stTimeViolator(_this4.useShareTokenIfNeed({\n          date: _this4.selectedDate,\n          marketplace: marketplace,\n          brand_id: _this4.selected.brand._id,\n          seller_type: _this4.selected.seller_type,\n          fulfillment: _this4.selected.fulfillment,\n          show_upc_in_dashboard: _this4.selected.brand.show_upc_in_dashboard\n        })).then(function () {\n          var fake1stData = _objectSpread({}, _this4.dataNew1stTimeViolator);\n\n          fake1stData = _this4.emptyRowData(fake1stData, _this4.getIgnoredColumns1st(_this4.selected.brand));\n\n          if (_this4.selected.brand && !_this4.selected.brand.show_upc_in_dashboard) {\n            fake1stData = _this4.removeColumnData(fake1stData, ['upc/ean']);\n          }\n\n          window.mw_dashboard_new_1st_time = fake1stData;\n          resolve();\n        });\n      });\n    },\n    getIgnoredColumns1st: function getIgnoredColumns1st(brand) {\n      var ignoredColumns = [];\n\n      if (brand && brand.ignore_price_tracking) {\n        ignoredColumns.push('map');\n      }\n\n      if (brand && brand.ignore_screenshot) {\n        ignoredColumns.push('screenshot');\n      }\n\n      return ignoredColumns;\n    },\n    handleDataNew2ndTimeViolator: function handleDataNew2ndTimeViolator(marketplace) {\n      var _this5 = this;\n\n      return new Promise(function (resolve, reject) {\n        _this5.fetchDataNew2ndTimeViolator(_this5.useShareTokenIfNeed({\n          date: _this5.selectedDate,\n          marketplace: marketplace,\n          brand_id: _this5.selected.brand._id,\n          seller_type: _this5.selected.seller_type,\n          fulfillment: _this5.selected.fulfillment,\n          show_upc_in_dashboard: _this5.selected.brand.show_upc_in_dashboard\n        })).then(function () {\n          var fake2nd = _objectSpread({}, _this5.dataNew2ndTimeViolator);\n\n          fake2nd = _this5.emptyRowData(fake2nd, _this5.getIgnoredColumns2st(_this5.selected.brand));\n\n          if (_this5.selected.brand && !_this5.selected.brand.show_upc_in_dashboard) {\n            fake2nd = _this5.removeColumnData(fake2nd, ['upc/ean']);\n          }\n\n          window.mw_dashboard_new_2nd_time = fake2nd;\n          resolve();\n        });\n      });\n    },\n    getIgnoredColumns2st: function getIgnoredColumns2st(brand) {\n      var ignoredColumns = [];\n\n      if (brand && brand.ignore_price_tracking) {\n        ignoredColumns.push('map');\n      }\n\n      if (brand.marketplace === 'google_shopping') {\n        ignoredColumns = ['date_violated'];\n      }\n\n      return ignoredColumns;\n    },\n    handleDataSellerViolations7d: function handleDataSellerViolations7d(marketplace) {\n      var _this6 = this;\n\n      return new Promise(function (resolve, reject) {\n        _this6.fetchDataSellerViolations7d(_this6.useShareTokenIfNeed({\n          date: _this6.selectedDate,\n          marketplace: marketplace,\n          brand_id: _this6.selected.brand._id,\n          seller_type: _this6.selected.seller_type,\n          fulfillment: _this6.selected.fulfillment\n        })).then(function () {\n          window.mw_dashboard_seller_violations_7d = _this6.dataSellerViolations7d;\n          resolve();\n        });\n      });\n    },\n    handleDataAvgPercentageOffMap: function handleDataAvgPercentageOffMap(marketplace) {\n      var _this7 = this;\n\n      return new Promise(function (resolve, reject) {\n        _this7.fetchDataAvgPercentageOffMap(_this7.useShareTokenIfNeed({\n          date: _this7.selectedDate,\n          marketplace: marketplace,\n          brand_id: _this7.selected.brand._id,\n          seller_type: _this7.selected.seller_type,\n          fulfillment: _this7.selected.fulfillment\n        })).then(function () {\n          var fakeAVGPercent = _objectSpread({}, _this7.dataAvgPercentageOffMap);\n\n          fakeAVGPercent = _this7.emptyRowData(fakeAVGPercent, _this7.getIgnoredColumnsAvgPercent(_this7.selected.brand));\n          window.mw_dashboard_avg_percentage_off_map = _.cloneDeep(fakeAVGPercent);\n          resolve();\n        });\n      });\n    },\n    getIgnoredColumnsAvgPercent: function getIgnoredColumnsAvgPercent(brand) {\n      var ignoredColumns = [];\n\n      if (brand && brand.ignore_price_tracking) {\n        ignoredColumns.push('seller_name', 'average_off_map_percent', 'average_off_map_percent');\n      }\n\n      return ignoredColumns;\n    },\n    handleDataAllRepeatOffenders: function handleDataAllRepeatOffenders(marketplace) {\n      var _this8 = this;\n\n      return new Promise(function (resolve, reject) {\n        _this8.fetchDataAllRepeatOffenders(_this8.useShareTokenIfNeed({\n          date: _this8.selectedDate,\n          marketplace: marketplace,\n          brand_id: _this8.selected.brand._id,\n          seller_type: _this8.selected.seller_type,\n          fulfillment: _this8.selected.fulfillment\n        })).then(function () {\n          window.mw_dashboard_all_repeat_offenders = _this8.dataAllRepeatOffenders;\n          resolve();\n        });\n      });\n    },\n    handleDataNewRepeatViolators: function handleDataNewRepeatViolators(marketplace) {\n      var _this9 = this;\n\n      return new Promise(function (resolve, reject) {\n        _this9.fetchDataNewRepeatViolators(_this9.useShareTokenIfNeed({\n          date: _this9.selectedDate,\n          marketplace: marketplace,\n          brand_id: _this9.selected.brand._id,\n          seller_type: _this9.selected.seller_type,\n          fulfillment: _this9.selected.fulfillment,\n          show_upc_in_dashboard: _this9.selected.brand.show_upc_in_dashboard\n        })).then(function () {\n          var fakeNewRepeat = _objectSpread({}, _this9.dataNewRepeatViolators);\n\n          fakeNewRepeat = _this9.emptyRowData(fakeNewRepeat, _this9.getIgnoredColumnsNewRepeat(_this9.selected.brand));\n\n          if (_this9.selected.brand && !_this9.selected.brand.show_upc_in_dashboard) {\n            fakeNewRepeat = _this9.removeColumnData(fakeNewRepeat, ['upc/ean']);\n          }\n\n          window.mw_dashboard_new_repeat_violators = fakeNewRepeat;\n          resolve();\n        });\n      });\n    },\n    getIgnoredColumnsNewRepeat: function getIgnoredColumnsNewRepeat(brand) {\n      var ignoredColumns = [];\n\n      if (brand && brand.ignore_price_tracking) {\n        ignoredColumns.push('map', 'diff_percent');\n      }\n\n      return ignoredColumns;\n    },\n    handlePrepareApisForData: function handlePrepareApisForData(isOeUser, marketplace) {\n      var apis = [this.handleDataViolator(marketplace), this.handleDataTopViolatedProduct(marketplace), this.handleDataSellerViolations7d(marketplace), this.handleDataAvgPercentageOffMap(marketplace), this.handleDataNew1stTimeViolator(marketplace), this.handleDataNew2ndTimeViolator(marketplace), this.handleDataNewRepeatViolators(marketplace), this.handleDataAllRepeatOffenders(marketplace)];\n\n      if (isOeUser) {\n        apis.push(this.handleDataDailyWithInventoryViolator(marketplace));\n      }\n\n      return apis;\n    },\n    handlePrepareApisForDataOptimized: function handlePrepareApisForDataOptimized(isOeUser, marketplace) {\n      var apis = [this.fetchAllWidgetData({\n        date: this.selectedDate,\n        marketplace: marketplace,\n        brand_id: this.selected.brand._id,\n        seller_type: this.selected.seller_type,\n        fulfillment: this.selected.fulfillment,\n        show_upc_in_dashboard: this.selected.brand.show_upc_in_dashboard,\n        source: this.selected.source,\n        is_true_map: !!this.selected.brand.true_map_report\n      })];\n\n      if (isOeUser) {\n        apis.push(this.handleDataDailyWithInventoryViolator(marketplace));\n      }\n\n      return apis;\n    },\n    _fetchDashboardWidgetData: function () {\n      var _fetchDashboardWidgetData2 = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _this10 = this;\n\n        var marketplace, invsee, apis, self;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                marketplace = this.syncMarketplaceParams(this.selected.marketplace);\n                invsee = _.get(this.getPermissions, 'permissions.invsee');\n                apis = this.handlePrepareApisForDataOptimized(invsee, marketplace);\n                self = this;\n                _context.next = 6;\n                return Promise.all(apis).then(function () {\n                  // handleDataViolator\n                  var fakeDaily = _objectSpread({}, _this10.dataViolator);\n\n                  fakeDaily = _this10.emptyRowData(fakeDaily, _this10.getIgnoredColumnsDaily(_this10.selected.brand));\n\n                  if (_this10.selected.brand && !_this10.selected.brand.show_upc_in_dashboard) {\n                    fakeDaily = _this10.removeColumnData(fakeDaily, ['upc/ean']);\n                  }\n\n                  window.mw_dashboard_main_daily_visitors = fakeDaily; // handleDataTopViolatedProduct\n\n                  // handleDataTopViolatedProduct\n                  window.mw_dashboard_top_violated = _this10.dataTopViolatedProductViolator; // handleDataSellerViolations7d\n\n                  // handleDataSellerViolations7d\n                  window.mw_dashboard_seller_violations_7d = _this10.dataSellerViolations7d; // handleDataAvgPercentageOffMap\n\n                  // handleDataAvgPercentageOffMap\n                  var fakeAVGPercent = _objectSpread({}, _this10.dataAvgPercentageOffMap);\n\n                  fakeAVGPercent = _this10.emptyRowData(fakeAVGPercent, _this10.getIgnoredColumnsAvgPercent(_this10.selected.brand));\n                  window.mw_dashboard_avg_percentage_off_map = _.cloneDeep(fakeAVGPercent); // handleDataNew1stTimeViolator\n\n                  // handleDataNew1stTimeViolator\n                  var fake1stData = _objectSpread({}, _this10.dataNew1stTimeViolator);\n\n                  fake1stData = _this10.emptyRowData(fake1stData, _this10.getIgnoredColumns1st(_this10.selected.brand));\n\n                  if (_this10.selected.brand && !_this10.selected.brand.show_upc_in_dashboard) {\n                    fake1stData = _this10.removeColumnData(fake1stData, ['upc/ean']);\n                  }\n\n                  window.mw_dashboard_new_1st_time = fake1stData; // handleDataNew2ndTimeViolator\n\n                  // handleDataNew2ndTimeViolator\n                  var fake2nd = _objectSpread({}, _this10.dataNew2ndTimeViolator);\n\n                  fake2nd = _this10.emptyRowData(fake2nd, _this10.getIgnoredColumns2st(_this10.selected.brand));\n\n                  if (_this10.selected.brand && !_this10.selected.brand.show_upc_in_dashboard) {\n                    fake2nd = _this10.removeColumnData(fake2nd, ['upc/ean']);\n                  }\n\n                  window.mw_dashboard_new_2nd_time = fake2nd;\n\n                  if (_this10.selected.brand.true_map_report) {\n                    // handleDataNewRepeatViolators\n                    var fakeNewRepeat = _objectSpread({}, _this10.dataNewRepeatViolators);\n\n                    fakeNewRepeat = _this10.emptyRowData(fakeNewRepeat, _this10.getIgnoredColumnsNewRepeat(_this10.selected.brand));\n\n                    if (_this10.selected.brand && !_this10.selected.brand.show_upc_in_dashboard) {\n                      fakeNewRepeat = _this10.removeColumnData(fakeNewRepeat, ['upc/ean']);\n                    }\n\n                    window.mw_dashboard_new_repeat_violators = fakeNewRepeat;\n                  } // handleDataAllRepeatOffenders\n\n\n                  // handleDataAllRepeatOffenders\n                  window.mw_dashboard_all_repeat_offenders = _this10.dataAllRepeatOffenders;\n                  var cloneObj = $.extend(true, {}, _this10.mainConfig); // TODO Remove this function when Builder mode was merged into develop\n\n                  // TODO Remove this function when Builder mode was merged into develop\n                  if (self.selected.brand && self.selected.brand.client_id === '98596dc6-c495-4ff8-83fc-81e9b46232cd') {\n                    cloneObj.widgets = cloneObj.widgets.filter(function (c, i) {\n                      return i < 2;\n                    });\n                  }\n\n                  if (invsee && _this10.orgIs) {\n                    cloneObj.widgetLayout.widgets.push($.extend(true, {}, configDailyViolatorWithInventory));\n                  }\n\n                  var widgets = cloneObj.widgetLayout.widgets;\n                  var isTrueMap = !!_this10.selected.brand.true_map_report;\n\n                  var _iterator = _createForOfIteratorHelper(widgets.entries()),\n                      _step;\n\n                  try {\n                    for (_iterator.s(); !(_step = _iterator.n()).done;) {\n                      var _step$value = _slicedToArray(_step.value, 2),\n                          _index = _step$value[0],\n                          widget = _step$value[1];\n\n                      var widgetId = widget.config.widget_id;\n\n                      if (widgetId) {\n                        var text = _this10.selected.source === _this10.dashboardFilterSourceType.ALL_SELLERS ? _this10.dashboardAllSellerTitle[widgetId] : isTrueMap ? _this10.dashboardViolatorTitle[widgetId] : _this10.dashboardViolatorTitleNoTrueMap[widgetId];\n                        cloneObj.widgetLayout.widgets[_index].config.widget.title.text = text;\n                      }\n                    }\n                  } catch (err) {\n                    _iterator.e(err);\n                  } finally {\n                    _iterator.f();\n                  }\n\n                  if (!isTrueMap) {\n                    cloneObj.widgetLayout.widgets = _.filter(cloneObj.widgetLayout.widgets, function (item) {\n                      return !_.includes([_this10.dashboardWidgetId.avg_percentage_off_map, _this10.dashboardWidgetId.new_repeat_violators], item.config.widget_id);\n                    });\n\n                    if (_this10.selected.source !== _this10.dashboardFilterSourceType.ALL_SELLERS) {\n                      var index = _.findIndex(cloneObj.widgetLayout.widgets, function (item) {\n                        return item.config.widget_id === _this10.dashboardWidgetId.all_repeat_offenders;\n                      });\n\n                      if (index > 0) {\n                        cloneObj.widgetLayout.widgets[index].config.elements[0].config.columns[1].displayName = 'Days with Listings';\n                        cloneObj.widgetLayout.widgets[index].config.elements[0].config.columns[2].displayName = 'Number of Listings Active';\n                      }\n                    }\n\n                    cloneObj.widgetLayout.widgets[1].config.grid.h = 40;\n                    cloneObj.widgetLayout.widgets[5].config.grid.x = 0;\n                    cloneObj.widgetLayout.widgets[5].config.grid.w = 12;\n                  }\n\n                  window.ms_dashboard_main_config = cloneObj; // TODO: SDK support API refresh data source\n\n                  // TODO: SDK support API refresh data source\n                  if (!_this10.sdkConfigInitialized) {\n                    // for first time\n                    _this10.sdkConfigInitialized = true;\n                  } else {\n                    // change dataSource effect to sdk\n                    _this10.sdkConfigForceReload++;\n                  }\n                });\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function _fetchDashboardWidgetData() {\n        return _fetchDashboardWidgetData2.apply(this, arguments);\n      }\n\n      return _fetchDashboardWidgetData;\n    }(),\n    emptyRowData: function emptyRowData(data) {\n      var cols = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n      if (!cols.length || !data || !data.cols || !data.rows) return data;\n      var names = data.cols.map(function (d) {\n        return d.name;\n      });\n      var indexs = cols.reduce(function (a, c) {\n        if (names.includes(c)) a.push(names.indexOf(c));\n        return a;\n      }, []).filter(function (e) {\n        return e >= 0;\n      });\n      indexs.forEach(function (i) {\n        data.rows = data.rows.map(function (r) {\n          r[i] = null;\n          return r;\n        });\n      });\n      return data;\n    },\n    // remove column from table data\n    removeColumnData: function removeColumnData(data) {\n      var cols = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n      if (!cols.length || !data || !data.cols || !data.rows) return data;\n      var names = data.cols.map(function (d) {\n        return d.name;\n      });\n      var indexs = cols.reduce(function (a, c) {\n        if (names.includes(c)) a.push(names.indexOf(c));\n        return a;\n      }, []).filter(function (e) {\n        return e >= 0;\n      });\n      indexs.forEach(function (i) {\n        data.rows = data.rows.map(function (r) {\n          r[i] = null;\n          return r;\n        });\n      });\n      return data;\n    },\n    handleCaseRemoveColumn: function handleCaseRemoveColumn(widgetName, arrayLabel) {\n      var widget = this.findWidgetByLabel(window.ms_dashboard_main_config.widgetLayout.widgets, widgetName);\n\n      if (widget) {\n        widget.config.elements[0].config.columns = this.removeColumnByLabel(widget.config.elements[0].config.columns, arrayLabel);\n      }\n    },\n    removeColumnByLabel: function removeColumnByLabel(arrayColumn, arrayLabel) {\n      return arrayColumn.filter(function (column) {\n        return !arrayLabel.includes(column.name);\n      });\n    },\n    _renderDashboardWidgets: function _renderDashboardWidgets() {\n      var isAllSellerMode = this.selected.source === this.dashboardFilterSourceType.ALL_SELLERS;\n      var isTrueMap = !!this.selected.brand.true_map_report;\n      var titleSource = isAllSellerMode ? this.dashboardAllSellerTitle : !isTrueMap && !isAllSellerMode ? this.dashboardViolatorTitleNoTrueMap : this.dashboardViolatorTitle;\n\n      if (this.selected.brand && !this.selected.brand.show_upc_in_dashboard) {\n        this.handleCaseRemoveColumn(titleSource.daily_violator, ['upc/ean']);\n        this.handleCaseRemoveColumn(titleSource.new_1st_time_violator, ['upc/ean']);\n        this.handleCaseRemoveColumn(titleSource.new_2nd_time_violator, ['upc/ean']);\n        this.handleCaseRemoveColumn(titleSource.new_repeat_violators, ['upc/ean']);\n      }\n\n      if (!isTrueMap) {\n        this.handleCaseRemoveColumn(titleSource.daily_violator, ['map_price', 'diff', 'diff_percent']);\n        this.handleCaseRemoveColumn(titleSource.daily_violator_with_inventory, ['diff', 'diff_percent']);\n        this.handleCaseRemoveColumn(titleSource.new_1st_time_violator, ['map']);\n        this.handleCaseRemoveColumn(titleSource.new_2nd_time_violator, ['map']);\n        this.handleCaseRemoveColumn(titleSource.new_repeat_violators, ['map', 'diff_percent']);\n        this.handleCaseRemoveColumn(titleSource.new_repeat_violators, ['map', 'diff_percent']);\n      } // let el = $(this.$el).find('.widgets-container:eq(0)')\n      // el.html(\n      //   '<cbpo-dashboard config-ref=\"ms_dashboard_main_config\" class=\"mw-sdk-styled\" />'\n      // )\n      // this.$CBPO.wgManager().init('.widgets-container')\n      // this.$forceUpdate()\n\n\n      this.sdkConfigForceReload++;\n    },\n    findWidgetByLabel: function findWidgetByLabel(widgetArray, label) {\n      return widgetArray.find(function (widget) {\n        return widget.config.widget.title.text === label;\n      });\n    },\n    handleFetchSetting: function () {\n      var _handleFetchSetting = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var showDashboard;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return this.fetchSetting();\n\n              case 2:\n                showDashboard = _context2.sent;\n                return _context2.abrupt(\"return\", showDashboard);\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function handleFetchSetting() {\n        return _handleFetchSetting.apply(this, arguments);\n      }\n\n      return handleFetchSetting;\n    }(),\n    fetchAndRenderDashboardWidgets: function () {\n      var _fetchAndRenderDashboardWidgets = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return this._fetchDashboardWidgetData();\n\n              case 2:\n                this._renderDashboardWidgets();\n\n              case 3:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function fetchAndRenderDashboardWidgets() {\n        return _fetchAndRenderDashboardWidgets.apply(this, arguments);\n      }\n\n      return fetchAndRenderDashboardWidgets;\n    }(),\n    createEventButtonAction: function createEventButtonAction() {\n      var _this11 = this;\n\n      // Download button NEW REPEAT widgets\n      this.$CBPO.$bus.$on(\"trigger_button_\".concat(TYPE.DOWNLOAD_NEW_REPEAT_VIOLATORS), function () {\n        var marketplace = _this11.syncMarketplaceParams(_this11.selected.marketplace);\n\n        _this11.$CBPO.$bus.$emit(TYPE.DOWNLOAD_NEW_REPEAT_VIOLATORS + '_stateChange', true);\n\n        _this11.downloadNewRepeatViolators(_this11.useShareTokenIfNeed({\n          date: _this11.selectedDate,\n          marketplace: marketplace,\n          brand_id: _this11.selected.brand._id,\n          seller_type: _this11.selected.seller_type,\n          fulfillment: _this11.selected.fulfillment\n        })).then(function (link) {\n          _this11.$CBPO.$bus.$emit(TYPE.DOWNLOAD_NEW_REPEAT_VIOLATORS + '_stateChange', false);\n\n          if (link && link.uri) {\n            var a = document.createElement('a');\n            a.href = link.uri;\n            a.click();\n          }\n\n          _this11.$CBPO.$bus.$emit(TYPE.DOWNLOAD_NEW_REPEAT_VIOLATORS + '_stateChange', false);\n        });\n      }); // Download button DAILY VIOLATOR widget\n\n      this.$CBPO.$bus.$on(\"trigger_button_\".concat(TYPE.DOWNLOAD_DAILY_VIOLATIONS), function () {\n        var marketplace = _this11.syncMarketplaceParams(_this11.selected.marketplace);\n\n        _this11.$CBPO.$bus.$emit(TYPE.DOWNLOAD_DAILY_VIOLATIONS + '_stateChange', true);\n\n        _this11.downloadDailyViolations(_this11.useShareTokenIfNeed({\n          date: _this11.selectedDate,\n          marketplace: marketplace,\n          brand_id: _this11.selected.brand._id,\n          seller_type: _this11.selected.seller_type,\n          fulfillment: _this11.selected.fulfillment\n        })).then(function (link) {\n          _this11.$CBPO.$bus.$emit(TYPE.DOWNLOAD_DAILY_VIOLATIONS + '_stateChange', false);\n\n          if (link && link.uri) {\n            var a = document.createElement('a');\n            a.href = link.uri;\n            a.click();\n          }\n\n          _this11.$CBPO.$bus.$emit(TYPE.DOWNLOAD_DAILY_VIOLATIONS + '_stateChange', false);\n        });\n      });\n      this.$CBPO.$bus.$on(\"trigger_button_\".concat(TYPE.DOWNLOAD_DAILY_VIOLATIONS_WITH_INVENTORY), function () {\n        var marketplace = _this11.syncMarketplaceParams(_this11.selected.marketplace);\n\n        _this11.$CBPO.$bus.$emit(TYPE.DOWNLOAD_DAILY_VIOLATIONS_WITH_INVENTORY + '_stateChange', true);\n\n        _this11.downloadDailyViolationsWithInventory(_this11.useShareTokenIfNeed({\n          date: _this11.selectedDate,\n          marketplace: marketplace,\n          brand_id: _this11.selected.brand._id,\n          seller_type: _this11.selected.seller_type,\n          fulfillment: _this11.selected.fulfillment\n        })).then(function (link) {\n          _this11.$CBPO.$bus.$emit(TYPE.DOWNLOAD_DAILY_VIOLATIONS_WITH_INVENTORY + '_stateChange', false);\n\n          if (link && link.uri) {\n            var a = document.createElement('a');\n            a.href = link.uri;\n            a.click();\n          }\n\n          _this11.$CBPO.$bus.$emit(TYPE.DOWNLOAD_DAILY_VIOLATIONS_WITH_INVENTORY + '_stateChange', false);\n        });\n      });\n    },\n    fetchDate: function () {\n      var _fetchDate = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4() {\n        var marketplace;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                // TODO: SDK support API refresh data source\n                this.sdkConfigInitialized = false;\n                marketplace = this.syncMarketplaceParams(this.selected.marketplace);\n                _context4.next = 4;\n                return this.fetchDataDateHistorical(this.useShareTokenIfNeed({\n                  marketplace: marketplace,\n                  seller_type: this.selected.seller_type,\n                  brand_id: this.selected.brand._id\n                }));\n\n              case 4:\n                this.dates = this.dataDateHistorical.dates;\n\n                if (this.dates.length > 0) {\n                  this.selectedDate = this.dates[0];\n                } else {\n                  this.selectedDate = null;\n                }\n\n                this.setSelectedDate(this.selectedDate); // render Dashboard Widgets\n\n                this.fetchAndRenderDashboardWidgets();\n\n              case 8:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this);\n      }));\n\n      function fetchDate() {\n        return _fetchDate.apply(this, arguments);\n      }\n\n      return fetchDate;\n    }(),\n    dateChange: function dateChange(e) {\n      this.selectedDate = e.target.value;\n      this.setSelectedDate(this.selectedDate);\n      this.fetchAndRenderDashboardWidgets();\n    }\n  }),\n  created: function () {\n    var _created = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee5() {\n      return regeneratorRuntime.wrap(function _callee5$(_context5) {\n        while (1) {\n          switch (_context5.prev = _context5.next) {\n            case 0:\n              this.fetchDate();\n              this.createEventButtonAction();\n\n            case 2:\n            case \"end\":\n              return _context5.stop();\n          }\n        }\n      }, _callee5, this);\n    }));\n\n    function created() {\n      return _created.apply(this, arguments);\n    }\n\n    return created;\n  }(),\n  watch: {\n    '$route.query': function $routeQuery(val) {\n      this.fetchDate();\n    }\n  },\n  destroyed: function destroyed() {\n    this.$CBPO.$bus.$off(\"trigger_button_\".concat(TYPE.DOWNLOAD_NEW_REPEAT_VIOLATORS));\n    this.$CBPO.$bus.$off(\"trigger_button_\".concat(TYPE.DOWNLOAD_DAILY_VIOLATIONS));\n    this.$CBPO.$bus.$off(\"trigger_button_\".concat(TYPE.DOWNLOAD_DAILY_VIOLATIONS_WITH_INVENTORY));\n  }\n};",null]}