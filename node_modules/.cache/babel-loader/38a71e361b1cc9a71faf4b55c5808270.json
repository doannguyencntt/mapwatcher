{"remainingRequest":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js!C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Project\\CBPO\\plat-mw-web\\src\\components\\page\\reports\\TableReportMapJob.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Project\\CBPO\\plat-mw-web\\src\\components\\page\\reports\\TableReportMapJob.vue","mtime":1639556685391},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626076743241},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1620898435163},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626076743241},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1620898436811}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:/Project/CBPO/plat-mw-web/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"C:/Project/CBPO/plat-mw-web/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.number.constructor\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapGetters, mapActions } from 'vuex';\nimport vToasted from '@/shared/notification';\nimport { GET_PERMISSIONS, GET_DEFAULT_PARAMS, RUN_AN_INVENTORY, CANCEL_AN_INVENTORY, REMOVE_INVENTORY_SCHEDULES, CHANGE_REPORT_SCHEDULE_MODE, CANCEL_A_REPORT } from '@/actionTypes.js';\nimport moment from 'moment';\nimport _nav from '@/_nav';\nimport { MarketPlacesResult, DashboardFilterSourceType, AllSellerMode } from '@/constants/Report';\nimport { get, isEmpty } from 'lodash';\nimport InventoryScheduleScrapingModal from \"./InventoryScheduleScrapingModal.vue\";\nimport LoadingSpinner from '@/components/common/LoadingSpinner';\nexport default {\n  name: 'c-table',\n  components: {\n    InventoryScheduleScrapingModal: InventoryScheduleScrapingModal,\n    LoadingSpinner: LoadingSpinner\n  },\n  inheritAttrs: false,\n  props: {\n    caption: {\n      type: String,\n      default: 'Table'\n    },\n    hover: {\n      type: Boolean,\n      default: false\n    },\n    striped: {\n      type: Boolean,\n      default: false\n    },\n    bordered: {\n      type: Boolean,\n      default: false\n    },\n    small: {\n      type: Boolean,\n      default: false\n    },\n    fixed: {\n      type: Boolean,\n      default: false\n    },\n    tableData: {\n      type: [Array, Function],\n      default: function _default() {\n        return [];\n      }\n    },\n    fields: {\n      type: [Array, Object],\n      default: function _default() {\n        return [];\n      }\n    },\n    dark: {\n      type: Boolean,\n      default: false\n    },\n    removeReports: {\n      type: [Function]\n    },\n    handleEditReport: {\n      type: [Function]\n    },\n    handleRun: {\n      type: [Function]\n    },\n    totalRows: {\n      type: Number,\n      default: 0\n    },\n    dataSet: {\n      type: [Array, Object]\n    },\n    handleExportForJob: {\n      type: [Function]\n    },\n    currentPage: {\n      type: Number\n    },\n    reportLoading: {\n      type: Boolean\n    }\n  },\n  mixins: [vToasted],\n  data: function data() {\n    return {\n      MarketPlacesResult: MarketPlacesResult,\n      DashboardFilterSourceType: DashboardFilterSourceType,\n      AllSellerMode: AllSellerMode,\n      dialog: {\n        remove: false,\n        run: false,\n        cancel: false,\n        ignore_cache: false,\n        force_run: false,\n        marketplace: '',\n        cancelReportSchedule: false\n      },\n      selected: {\n        remove: null,\n        run: null\n      },\n      nav: _nav,\n      inventoryDialog: {\n        run: false,\n        cancel: false,\n        scraping: false,\n        selectedInfo: null,\n        marketplace: ''\n      },\n      cancelInvScheduleOptions: {\n        today: false,\n        up7: false,\n        up30: false,\n        allUp: false\n      },\n      reportScheduleOptions: [{\n        value: 'daily',\n        text: 'Daily'\n      }, {\n        value: 'manually',\n        text: 'Manually'\n      }],\n      reportScheduleMode: 'daily',\n      reportSchedulerModal: false\n    };\n  },\n  computed: _objectSpread(_objectSpread({}, mapGetters({\n    getPermissions: \"mw/\".concat(GET_PERMISSIONS),\n    defaultParams: \"mw/reports/\".concat(GET_DEFAULT_PARAMS)\n  })), {}, {\n    captions: function captions() {\n      var getPermissions = this.getPermissions,\n          fields = this.fields;\n\n      if (getPermissions.module_enabled && getPermissions.permissions.braman && getPermissions.module_enabled && getPermissions.permissions.braexe) {\n        return fields;\n      } else if (getPermissions.module_enabled && getPermissions.permissions.braman && getPermissions.module_enabled && !getPermissions.permissions.braexe) {\n        return fields.filter(function (f) {\n          return f.key !== 'status';\n        });\n      } else if (getPermissions.module_enabled && !getPermissions.permissions.braman && getPermissions.module_enabled && getPermissions.permissions.braexe) {\n        return fields.filter(function (f) {\n          return f.key !== 'actions';\n        });\n      } else {\n        return fields.filter(function (f) {\n          return f.key !== 'actions' && f.key !== 'status';\n        });\n      }\n    },\n    capitalize: function capitalize() {\n      return function (str) {\n        if (str) {\n          var lowcaseString = str.toLowerCase();\n          return lowcaseString[0].toUpperCase() + lowcaseString.slice(1);\n        }\n\n        return str;\n      };\n    },\n    params: function params() {\n      return _objectSpread({}, this.defaultParams) || {};\n    }\n  }),\n  methods: _objectSpread(_objectSpread({}, mapActions({\n    runInventory: \"mw/reports/\".concat(RUN_AN_INVENTORY),\n    cancelInventory: \"mw/reports/\".concat(CANCEL_AN_INVENTORY),\n    removeInventorySchedules: \"mw/reports/\".concat(REMOVE_INVENTORY_SCHEDULES),\n    changeReportScheduleMode: \"mw/reports/\".concat(CHANGE_REPORT_SCHEDULE_MODE),\n    cancelReport: \"mw/reports/\".concat(CANCEL_A_REPORT)\n  })), {}, {\n    handleRemoveItems: function handleRemoveItems(item) {\n      this.dialog.remove = true;\n      this.selected.remove = {\n        id: item._id,\n        name: item.name_in_dashboard\n      };\n    },\n    paramsChange: function paramsChange() {\n      this.$emit('paramsChange', this.params);\n    },\n    handleNavToHistoryMarketplacePage: function handleNavToHistoryMarketplacePage(reportId, marketplace, name) {\n      this.$router.push({\n        name: 'MWReportMarketplaceHistory',\n        params: {\n          client_id: this.nav.clientId\n        },\n        query: {\n          report_id: reportId,\n          marketplace: marketplace,\n          name: name\n        }\n      });\n    },\n    sortChange: function sortChange(event) {\n      this.params.sort_by = event.sortBy;\n\n      if (event.sortBy) {\n        this.params.sort_dir = event.sortDesc ? 'desc' : 'asc';\n      } else {\n        this.params.sort_dir = null;\n      }\n\n      this.paramsChange();\n    },\n    showModalRunJob: function showModalRunJob(item, marketplace) {\n      this.dialog.run = true;\n      this.selected.run = item;\n      this.dialog.marketplace = marketplace;\n    },\n    handleRunJob: function () {\n      var _handleRunJob = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee(selectedItem) {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.handleRun(selectedItem, {\n                  ignore_cache: this.dialog.ignore_cache,\n                  force_run: this.dialog.force_run,\n                  marketplace: this.dialog.marketplace\n                });\n\n              case 2:\n                this.dialog.ignore_cache = false;\n                this.dialog.force_run = false;\n                this.paramsChange();\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function handleRunJob(_x) {\n        return _handleRunJob.apply(this, arguments);\n      }\n\n      return handleRunJob;\n    }(),\n    isExceeded: function isExceeded(item, key) {\n      if (key.includes('amazon')) {\n        return !get(item, 'ready_for_amazon_scraping', true);\n      } else {\n        return !get(item, 'ready_for_google_scraping', true);\n      }\n    },\n    showModalRunInventory: function showModalRunInventory(item, marketplace) {\n      this.inventoryDialog.run = true;\n      this.inventoryDialog.selectedInfo = item;\n      this.inventoryDialog.marketplace = marketplace;\n    },\n    showModalCancelInventory: function showModalCancelInventory(item, marketplace) {\n      this.inventoryDialog.cancel = true;\n      this.inventoryDialog.selectedInfo = item;\n      this.inventoryDialog.marketplace = marketplace;\n      this.cancelInvScheduleOptions = {\n        today: false,\n        up7: false,\n        up30: false,\n        allUp: false\n      };\n    },\n    showModalInventoryScraping: function showModalInventoryScraping(item, marketplace) {\n      this.inventoryDialog.scraping = true;\n      this.inventoryDialog.selectedInfo = item;\n      this.inventoryDialog.marketplace = marketplace;\n    },\n    handleNavToHistoryInventoryPage: function handleNavToHistoryInventoryPage(reportId, marketplace, name) {\n      this.$router.push({\n        name: 'MWReportInventoryHistory',\n        params: {\n          client_id: this.nav.clientId\n        },\n        query: {\n          report_id: reportId,\n          marketplace: marketplace,\n          name: name\n        }\n      });\n    },\n    handleRunInventory: function handleRunInventory() {\n      var _this = this;\n\n      this.runInventory(this.inventoryDialog).then(function () {\n        _this.vToasted('success', 'Inventory investigation has been started.');\n      }).catch(function (err) {\n        if (err.response.data.statusCode === 403) {\n          _this.vToasted('error', err.response.data.message);\n        } else {\n          _this.vToasted('error', 'Could not run inventory investigation for this report/marketplace today.');\n        }\n      });\n    },\n    handleCancelInventory: function () {\n      var _handleCancelInventory = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var _this2 = this;\n\n        var cancelTodayRes, cancelUpcomingRes, from, to;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                cancelTodayRes = true;\n                cancelUpcomingRes = true; // Cancel today schedule\n\n                if (!this.cancelInvScheduleOptions.today) {\n                  _context2.next = 5;\n                  break;\n                }\n\n                _context2.next = 5;\n                return this.cancelInventory(this.inventoryDialog).then(function () {\n                  cancelTodayRes = true;\n                }).catch(function () {\n                  cancelTodayRes = false;\n\n                  _this2.vToasted('error', 'Could not run inventory cancellation for this report/marketplace today.');\n                });\n\n              case 5:\n                if (!(this.cancelInvScheduleOptions.up7 || this.cancelInvScheduleOptions.up30 || this.cancelInvScheduleOptions.allUp)) {\n                  _context2.next = 12;\n                  break;\n                }\n\n                from = moment().add(1, 'days');\n                to = moment(from).add(6, 'days');\n                if (this.cancelInvScheduleOptions.up30) to = moment(from).add(29, 'days');\n                if (this.cancelInvScheduleOptions.allUp) to = null;\n                _context2.next = 12;\n                return this.removeInventorySchedules({\n                  report_id: this.inventoryDialog.selectedInfo._id,\n                  marketplace: this.inventoryDialog.marketplace,\n                  from: from.format('YYYY-MM-DD'),\n                  to: to ? to.format('YYYY-MM-DD') : null\n                }).then(function () {\n                  cancelUpcomingRes = true;\n                }).catch(function () {\n                  cancelUpcomingRes = false;\n\n                  _this2.vToasted('error', 'Could not remove upcoming inventory schedules.');\n                });\n\n              case 12:\n                if (cancelTodayRes && cancelUpcomingRes) {\n                  this.vToasted('success', 'Inventory investigations has been cancelled.');\n                }\n\n              case 13:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function handleCancelInventory() {\n        return _handleCancelInventory.apply(this, arguments);\n      }\n\n      return handleCancelInventory;\n    }(),\n    isRunInventory: function isRunInventory(item) {\n      var runableStatus = ['PENDING', 'CANCELLED', 'DONE'];\n      return isEmpty(item.inventory_schedule) || runableStatus.includes(item.inventory_schedule.status);\n    },\n    showReportSchedulerModal: function showReportSchedulerModal(item, marketplace, marketplaceInfo) {\n      this.inventoryDialog.selectedInfo = item;\n      this.inventoryDialog.marketplace = marketplace;\n      this.reportScheduleMode = marketplaceInfo.schedule_mode || 'daily';\n      this.reportSchedulerModal = true;\n    },\n    handleChangeReportScheduleMode: function handleChangeReportScheduleMode() {\n      var _this3 = this;\n\n      var params = {\n        report_id: this.inventoryDialog.selectedInfo._id,\n        marketplace: this.inventoryDialog.marketplace,\n        mode: this.reportScheduleMode\n      };\n      this.changeReportScheduleMode(params).then(function () {\n        _this3.paramsChange();\n\n        _this3.vToasted('success', 'Change report schedule mode successfully.');\n      }).catch(function () {\n        _this3.vToasted('error', 'Could not change report schedule mode.');\n      });\n    },\n    showModalCancelReport: function showModalCancelReport(item, marketplace) {\n      this.dialog.cancelReportSchedule = true;\n      this.inventoryDialog.selectedInfo = item;\n      this.inventoryDialog.marketplace = marketplace;\n    },\n    handleCancelReport: function handleCancelReport() {\n      var _this4 = this;\n\n      var params = {\n        report_id: this.inventoryDialog.selectedInfo._id,\n        marketplace: this.inventoryDialog.marketplace\n      };\n      this.cancelReport(params).then(function () {\n        _this4.paramsChange();\n\n        _this4.vToasted('success', 'Today data processing has been cancelled successfully.');\n      }).catch(function () {\n        _this4.vToasted('error', 'Oops! Today data processing could not be cancelled.');\n      });\n    },\n    checkCondition: function () {\n      var _checkCondition = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (!(this.dataSet.items.length === 0 && this.params.page > 1)) {\n                  _context3.next = 4;\n                  break;\n                }\n\n                this.params.page--;\n                _context3.next = 4;\n                return this.paramsChange();\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function checkCondition() {\n        return _checkCondition.apply(this, arguments);\n      }\n\n      return checkCondition;\n    }()\n  }),\n  filters: {\n    formatTime: function formatTime(time) {\n      return moment(time).format();\n    }\n  },\n  mounted: function mounted() {\n    this.params.page = this.$route.query.page ? this.$route.query.page : 1;\n    this.params.s = this.$route.query.s ? this.$route.query.s : '';\n  }\n};",{"version":3,"sources":["TableReportMapJob.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <b-card :header=\"caption\">\r\n    <template v-slot:header>\r\n      <p class=\"my-0 pull-left align-middle report-list-title\">\r\n        <i class=\"icons icon-tag font-weight-bold\"></i>\r\n        <strong> {{ caption }}</strong>\r\n      </p>\r\n      <div v-if=\"getPermissions.module_enabled && getPermissions.permissions.braman\" class=\"pull-right align-middle\">\r\n        <b-button-group>\r\n          <router-link :to=\"{ name: 'MWAddReports', params: { client_id: nav.clientId } }\" tag=\"button\" class=\"btn btn-primary btn-sm\">\r\n            <i class=\"icons icon-plus\"></i> Add\r\n          </router-link>\r\n        </b-button-group>\r\n      </div>\r\n    </template>\r\n    <b-row>\r\n      <b-col md=\"4\" offset-md=\"4\" class=\"my-0 mb-4\">\r\n        <b-form-group class=\"mb-0\">\r\n          <b-input-group class=\"search cancel-action\">\r\n            <b-form-input\r\n              placeholder=\"Enter report name\"\r\n              ref=\"inputSearch\"\r\n              v-model.trim=\"params.s\"\r\n              @keyup.enter=\"\r\n                params.page = 1\r\n                paramsChange()\r\n              \"\r\n            ></b-form-input>\r\n            <i\r\n              v-show=\"params.s\"\r\n              @click=\"\r\n                params.s = ''\r\n                params.page = 1\r\n                paramsChange()\r\n              \"\r\n              class=\"icon-close cancel-icon\"\r\n            ></i>\r\n            <b-input-group-append>\r\n              <b-button\r\n                @click=\"\r\n                  params.page = 1\r\n                  paramsChange()\r\n                \"\r\n              >\r\n                <i class=\"icons icon-magnifier\"></i>\r\n              </b-button>\r\n            </b-input-group-append>\r\n          </b-input-group>\r\n        </b-form-group>\r\n      </b-col>\r\n    </b-row>\r\n    <b-table\r\n      :dark=\"dark\"\r\n      :hover=\"hover\"\r\n      :striped=\"striped\"\r\n      :bordered=\"bordered\"\r\n      :small=\"small\"\r\n      outlined\r\n      responsive=\"sm\"\r\n      :items=\"dataSet.items\"\r\n      :fields=\"captions\"\r\n      show-empty\r\n      thead-class=\"thead-light\"\r\n      :no-local-sorting=\"true\"\r\n      @sort-changed=\"sortChange($event)\"\r\n    >\r\n      <template v-slot:empty>\r\n        <LoadingSpinner :isLoading=\"reportLoading\" v-if=\"reportLoading\"/>\r\n        <div class=\"align-middle d-flex justify-content-center align-items-center\" v-else>There is no data</div>\r\n      </template>\r\n      <template v-slot:cell(name_in_dashboard)=\"data\">\r\n        <p class=\"mb-3 font-weight-bold\">{{ data.item.name_in_dashboard }}</p>\r\n        <p class=\"mb-0 d-flex align-items-center\">True MAP:\r\n          <i :class=\"data.item.true_map_report ? 'text-success' : 'text-secondary' \" class=\"icon-check icons rounded-circle icon_true_map\"></i>\r\n        </p>\r\n        <p class=\"mb-0 d-flex align-items-center\">Screenshot:\r\n          <i :class=\"!data.item.ignore_screenshot ? 'text-success' : 'text-secondary' \" class=\"icon-check icons rounded-circle icon_true_map\"></i>\r\n        </p>\r\n        <!--        <p v-show=\"data.item.marketplace_amazon_com.name\" class=\"mb-0 small\">Report: {{data.item.marketplace_amazon_com.name}}</p>-->\r\n        <!--        <p v-show=\"data.item.marketplace_amazon_ca.name\" class=\"mb-0 small\">Amazon.ca: {{data.item.marketplace_amazon_ca.name}}</p>-->\r\n        <!--        <p v-show=\"data.item.marketplace_google_shopping.name\" class=\"mb-0 small\">Google Shopping: {{data.item.marketplace_google_shopping.name}}</p>-->\r\n      </template>\r\n      <template v-slot:cell(active)=\"row\">\r\n        <b-form-checkbox v-model=\"row.item.active\" :disabled=\"true\" switch></b-form-checkbox>\r\n      </template>\r\n      <template v-slot:cell(updated)=\"row\">\r\n        <div class=\"d-flex flex-column d-flex justify-content-center\">\r\n          <span>{{ row.item.updated | formatTime | moment('from') }}</span>\r\n        </div>\r\n      </template>\r\n      <template v-slot:cell(actions)=\"row\" v-if=\"getPermissions.module_enabled && getPermissions.permissions.braman\">\r\n        <!-- <b-dropdown id=\"manage-dropdown\" variant=\"primary\" size=\"sm\">\r\n          <template v-slot:button-content> <i class=\"icon-settings\"></i> Manage </template>\r\n          <b-dropdown-item-button @click=\"handleEditReport(row.item)\"> <i class=\"icon-note \"></i> Edit </b-dropdown-item-button>\r\n          <b-dropdown-item-button variant=\"danger\" @click=\"handleRemoveItems(row.item)\"> <i class=\"icon-close \"></i> Remove </b-dropdown-item-button>\r\n        </b-dropdown> -->\r\n        <b-dropdown variant=\"primary\" size=\"sm\" split text=\"Edit\" @click=\"handleEditReport(row.item)\" class=\"drp-actions\">\r\n          <b-dropdown-item variant=\"danger\" @click=\"handleRemoveItems(row.item)\">\r\n            <i class=\"icon-trash cls-icon-trash\"></i>Remove\r\n          </b-dropdown-item>\r\n        </b-dropdown>\r\n      </template>\r\n      <template v-slot:cell(status)=\"row\">\r\n        <div v-if=\"row.item.active\">\r\n          <div class=\"alert-primary p-2 mt-2 mb-2\" v-for=\"(item, indexActiveMarketplaces) in row.item.activeMarketplaces\" :key=\"item.key\">\r\n            <h6 class=\"report-marketplace-header\">\r\n              {{ item.label }}\r\n            </h6>\r\n            <div data-v-30d88980=\"\" class=\"row d-flex align-items-center\">\r\n              <div data-v-30d88980=\"\" role=\"group\" class=\"col-4 btn-group btn-group-start\">\r\n                <button\r\n                  v-if=\"item.info.last_job_status && item.info.last_job_status === 'running'\"\r\n                  @click=\"showModalCancelReport(row.item, item.value)\"\r\n                  type=\"button\"\r\n                  class=\"btn btn-danger btn-sm\"\r\n                >\r\n                  <i class=\"icon-ban\"></i> Cancel\r\n                </button>\r\n                <button\r\n                  v-else\r\n                  :variant=\"item.info.last_job_status && (item.info.last_job_status !== 'running') ? 'warning' : 'secondary'\"\r\n                  :disabled=\"!getPermissions.module_enabled || !getPermissions.permissions.braexe || isExceeded(row.item, item.key)\"\r\n                  @click=\"showModalRunJob(row.item, item.value)\"\r\n                  data-v-30d88980=\"\"\r\n                  type=\"button\"\r\n                  class=\"btn btn-warning btn-sm\"\r\n                >\r\n                  <i data-v-30d88980=\"\" class=\"icon-control-play icons\"></i> Run\r\n                </button>\r\n                <button\r\n                  type=\"button\"\r\n                  class=\"btn  btn-secondary btn-sm\"\r\n                  @click=\"showReportSchedulerModal(row.item, item.value, item.info)\"\r\n                >\r\n                  <i :class=\"!item.info.schedule_mode || item.info.schedule_mode === 'daily' ? 'icon-clock' : 'icon-user'\" class=\"icons rounded-circle\"></i><div class=\"ml-1 d-inline\">Options</div>\r\n                </button>\r\n              </div>\r\n              <div class=\"col-3 d-flex justify-content-start align-items-center\" v-if=\"item.info.last_job_status && item.info.last_job_status === 'running'\">\r\n                <b-spinner small class=\"custom_icon\"></b-spinner>\r\n                <span class=\"job-progress badge badge-secondary ml-1\">{{ item.info.last_job_progress }}%</span>\r\n              </div>\r\n              <div class=\"col-3 d-flex justify-content-start align-items-center\" v-else>\r\n                <i class=\"icon-check icons rounded-circle bg-success custom_icon\" v-if=\"item.info.last_job_status && item.info.last_job_status === 'success'\"></i>\r\n                <i class=\"icon-close icons text-danger custom_icon\" v-if=\"item.info.last_job_status && item.info.last_job_status === 'cancelled'\"></i>\r\n                <i class=\"icon-ghost icons text-danger custom_icon\" v-if=\"item.info.last_job_status && item.info.last_job_status === 'dead'\"></i>\r\n                <i class=\"fa fa-frown-o text-danger custom_icon\" v-if=\"item.info.last_job_status && item.info.last_job_status === 'error'\"></i>\r\n                <i class=\"icon-clock icons rounded-circle alert-primary custom_icon\" v-if=\"!item.info.last_job_status\" />\r\n                <span data-v-30d88980=\"\" class=\"ml-2 small\">\r\n                  {{ !item.info.last_job_status ? 'Pending' : capitalize(item.info.last_job_status) }}\r\n                </span>\r\n              </div>\r\n              <div class=\"col-2 small\" v-if=\"item.info.last_job_status && typeof item.info.number_processed_map === 'number'\">\r\n                {{ item.info.number_processed_map | formatNumber }} / {{ item.info.number_total_map | formatNumber }}\r\n              </div>\r\n              <div class=\"col-2 small\" v-else>\r\n                N/A\r\n              </div>\r\n              <b-button-group class=\"col-3 btn-group-end\">\r\n                <button\r\n                        :variant=\"'primary'\"\r\n                        @click=\"handleExportForJob(row.item, row.index, item.value, indexActiveMarketplaces)\"\r\n                        :disabled=\"row.item.activeMarketplaces[indexActiveMarketplaces].info.isLoad\"\r\n                        v-if=\"item.info.last_job_created && item.info.latest_job && item.info.latest_job.status !== 'running' && item.info.number_processed_map === item.info.number_total_map && (!item.info.all_seller_mode || item.info.all_seller_mode === AllSellerMode.NONE)\"\r\n                        data-v-30d88980=\"\"\r\n                        type=\"button\"\r\n                        class=\"btn btn-primary btn-sm\"\r\n                >\r\n                  <i v-if=\"!row.item.activeMarketplaces[indexActiveMarketplaces].info.isLoad\" class=\"icon-cloud-download icons\"></i>\r\n                  <b-spinner v-if=\"row.item.activeMarketplaces[indexActiveMarketplaces].info.isLoad\" label=\"Spinning\" class=\"icon- btn-loader\">{{row.item.activeMarketplaces[indexActiveMarketplaces].info.isLoad}}</b-spinner>\r\n                  Download\r\n                </button>\r\n                <b-dropdown :disabled=\"row.item.activeMarketplaces[indexActiveMarketplaces].info.isLoad\" v-if=\"item.info.last_job_created && item.info.latest_job && item.info.latest_job.status !== 'running' && item.info.number_processed_map === item.info.number_total_map && (item.info.all_seller_mode && item.info.all_seller_mode !== AllSellerMode.NONE)\" id=\"manage-dropdown\" variant=\"primary\" size=\"sm\">\r\n                  <template v-slot:button-content>\r\n                    <i v-if=\"!row.item.activeMarketplaces[indexActiveMarketplaces].info.isLoad\" class=\"icon-cloud-download icons\"></i>\r\n                    <b-spinner v-if=\"row.item.activeMarketplaces[indexActiveMarketplaces].info.isLoad\" label=\"Spinning\" class=\"icon- btn-loader\"></b-spinner>\r\n                    Download\r\n                  </template>\r\n                  <b-dropdown-item-button :disabled=\"row.item.activeMarketplaces[indexActiveMarketplaces].info.isLoad\" @click=\"handleExportForJob(row.item, row.index, item.value, indexActiveMarketplaces, DashboardFilterSourceType.VIOLATIONS)\">\r\n                    Download Violations\r\n                  </b-dropdown-item-button>\r\n                  <b-dropdown-item-button :disabled=\"row.item.activeMarketplaces[indexActiveMarketplaces].info.isLoad\" @click=\"handleExportForJob(row.item, row.index, item.value, indexActiveMarketplaces, DashboardFilterSourceType.ALL_SELLERS)\">\r\n                    Download All Items\r\n                  </b-dropdown-item-button>\r\n                </b-dropdown>\r\n                <button\r\n                  type=\"button\"\r\n                  @click=\"handleNavToHistoryMarketplacePage(row.item._id, item.value, row.item.name_in_dashboard)\"\r\n                  class=\"btn btn-secondary btn-sm\"\r\n                >\r\n                  <i class=\"icon-clock icons rounded-circle\"></i><div class=\"ml-1 d-inline\">History</div>\r\n                </button>\r\n              </b-button-group>\r\n            </div>\r\n            <div class=\"mt-2\" v-if=\"item.key.includes('amazon')\">\r\n              <h6 class=\"report-marketplace-header\">\r\n                Inventory\r\n              </h6>\r\n              <div class=\"row d-flex align-items-center\">\r\n                <div role=\"group\" class=\"col-4 btn-group btn-group-start\">\r\n                  <button\r\n                    v-if=\"isRunInventory(item.info)\"\r\n                    @click=\"showModalRunInventory(row.item, item.value)\"\r\n                    type=\"button\"\r\n                    class=\"btn btn-warning btn-sm\"\r\n                  >\r\n                    <i class=\"icon-control-play icons\"></i> Run\r\n                  </button>\r\n                  <button\r\n                    v-else\r\n                    @click=\"showModalCancelInventory(row.item, item.value)\"\r\n                    type=\"button\"\r\n                    class=\"btn btn-danger btn-sm\"\r\n                  >\r\n                    <i class=\"icon-ban\"></i> Cancel\r\n                  </button>\r\n                  <button\r\n                    type=\"button\"\r\n                    @click=\"showModalInventoryScraping(row.item, item.value)\"\r\n                    class=\"btn btn-secondary btn-sm\"\r\n                  >\r\n                    <i class=\"icon-clock icons rounded-circle\"></i><div class=\"ml-1 d-inline\">Inventory</div>\r\n                  </button>\r\n                </div>\r\n                <div\r\n                  class=\"col-3 d-flex justify-content-start align-items-center\"\r\n                  v-if=\"item.info.inventory_schedule &&\r\n                    (item.info.inventory_schedule.status === 'PROCESSING' ||\r\n                    item.info.inventory_schedule.status === 'PREPARING')\r\n                  \"\r\n                >\r\n                  <b-spinner small class=\"custom_icon\"></b-spinner>\r\n                  <span class=\"job-progress badge badge-secondary ml-1\">{{ item.info.inventory_schedule.progress_percentage || 0 }}%</span>\r\n                </div>\r\n                <div class=\"col-3 d-flex justify-content-start align-items-center\" v-else>\r\n                  <i class=\"icon-check icons rounded-circle bg-success custom_icon\" v-if=\"item.info.inventory_schedule && item.info.inventory_schedule.status === 'DONE'\"></i>\r\n                  <i class=\"icon-close icons text-danger custom_icon\" v-if=\"item.info.inventory_schedule && item.info.inventory_schedule.status === 'CANCELLED'\"></i>\r\n                  <i class=\"icon-ghost icons text-danger custom_icon\" v-if=\"item.info.inventory_schedule && item.info.inventory_schedule.status === 'DEAD'\"></i>\r\n                  <i class=\"fa fa-frown-o text-danger custom_icon\" v-if=\"item.info.inventory_schedule && item.info.inventory_schedule.status === 'ERROR'\"></i>\r\n                  <i class=\"icon-clock icons rounded-circle alert-primary custom_icon\" v-if=\"!item.info.inventory_schedule\" />\r\n                  <span data-v-30d88980=\"\" class=\"ml-2 small\">\r\n                    {{ !item.info.inventory_schedule ? 'Pending' : capitalize(item.info.inventory_schedule.status) }}\r\n                  </span>\r\n                </div>\r\n                <div class=\"col-2 small\" v-if=\"item.info.inventory_schedule && typeof item.info.inventory_schedule.price_item_processed === 'number'\">\r\n                  {{ item.info.inventory_schedule.price_item_processed | formatNumber }} / {{ item.info.inventory_schedule.price_item_total | formatNumber }}\r\n                </div>\r\n                <div class=\"col-2 small\" v-else>\r\n                  N/A\r\n                </div>\r\n                <b-button-group class=\"col-3 btn-group-end\">\r\n                  <button\r\n                    type=\"button\"\r\n                    @click=\"handleNavToHistoryInventoryPage(row.item._id, item.value, row.item.name_in_dashboard)\"\r\n                    class=\"btn btn-secondary btn-sm\"\r\n                  >\r\n                    <i class=\"icon-clock icons rounded-circle\"></i><div class=\"ml-1 d-inline\">History</div>\r\n                  </button>\r\n                </b-button-group>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </template>\r\n    </b-table>\r\n    <nav class=\"d-flex justify-content-center\" v-if=\"dataSet.total > dataSet.page_size && dataSet.items.length > 0\">\r\n      <b-pagination\r\n        :total-rows=\"dataSet.total\"\r\n        :per-page=\"params.limit\"\r\n        v-model=\"params.page\"\r\n        prev-text=\"Prev\"\r\n        next-text=\"Next\"\r\n        hide-goto-end-buttons\r\n        @change=\"\r\n          params.page = $event\r\n          paramsChange()\r\n        \"\r\n        hide-ellipsis\r\n      />\r\n    </nav>\r\n    <b-modal title=\"Please confirm\" centered v-model=\"dialog.run\" @ok=\"handleRunJob(selected.run)\">\r\n      Are you sure you want to start running the job to get a report?\r\n      <br />\r\n      <br />\r\n      <b-form-checkbox v-model=\"dialog.force_run\" @checked=\"dialog.force_run\">\r\n        Force re-run all MAP (cleanup all today violations and run again)\r\n      </b-form-checkbox>\r\n      <br />\r\n      <b-form-checkbox v-model=\"dialog.ignore_cache\" @checked=\"dialog.ignore_cache\">\r\n        Ignore cache (use the latest marketplace listing)\r\n      </b-form-checkbox>\r\n      <template v-slot:modal-footer=\"{ ok, cancel }\">\r\n        <b-button size=\"md\" variant=\"warning\" @click=\"ok()\"> <i class=\"icon-check icons\"></i> Yes, I understand &amp; confirm! </b-button>\r\n        <b-button size=\"md\" variant=\"secondary\" @click=\"cancel()\"> <i class=\"icon-close icons\"></i> No </b-button>\r\n      </template>\r\n    </b-modal>\r\n    <b-modal title=\"Please confirm\" centered v-model=\"dialog.remove\" @ok=\"removeReports(selected.remove)\" ok-variant=\"danger\">\r\n      Are you sure you want to delete this report?\r\n      <template v-slot:modal-footer=\"{ ok, cancel }\">\r\n        <b-button variant=\"warning\" @click=\"ok()\"> <i class=\"icon-check\"></i> Yes, I understand &amp; confirm! </b-button>\r\n        <b-button variant @click=\"cancel()\"> <i class=\"icon-close\"></i> No </b-button>\r\n      </template>\r\n    </b-modal>\r\n    <b-modal title modal-class=\"modal-primary mw-modal-custom\" ok-title=\"YES\" cancel-title=\"NO\" v-model=\"dialog.cancel\" @ok=\"handleRun(selected.run)\" ok-variant=\"primary\"\r\n      >Are you sure you want to run data processing for this report?</b-modal\r\n    >\r\n    <b-modal title=\"Please confirm\" centered v-model=\"dialog.cancelReportSchedule\" @ok=\"handleCancelReport()\">\r\n      Are you sure you want to cancel today data processing of this marketplace?\r\n      <template v-slot:modal-footer=\"{ ok, cancel }\">\r\n        <b-button size=\"md\" variant=\"warning\" @click=\"ok()\"> <i class=\"icon-check icons\"></i> Yes </b-button>\r\n        <b-button size=\"md\" variant=\"secondary\" @click=\"cancel()\"> <i class=\"icon-close icons\"></i> No </b-button>\r\n      </template>\r\n    </b-modal>\r\n    <b-modal title=\"Please confirm!\" centered v-model=\"inventoryDialog.run\" @ok=\"handleRunInventory\">\r\n      Are you sure you want to start running an inventory investigation for this market today?\r\n      <br />\r\n      <!-- <br />\r\n      Inventory investigation is more expensive than other activities. It's 40 credits per ASIN per seller. -->\r\n      <template v-slot:modal-footer=\"{ ok, cancel }\">\r\n        <b-button size=\"md\" variant=\"warning\" @click=\"ok()\"> <i class=\"icon-check icons\"></i> Yes, I understand &amp; confirm! </b-button>\r\n        <b-button size=\"md\" variant=\"secondary\" @click=\"cancel()\"> <i class=\"icon-close icons\"></i> No </b-button>\r\n      </template>\r\n    </b-modal>\r\n    <b-modal title=\"Cancel inventory investigation\" centered v-model=\"inventoryDialog.cancel\" @ok=\"handleCancelInventory\" dialog-class=\"cancel-modal\">\r\n      Please choose the inventory investigation schedules that you want to cancel.\r\n      <br />\r\n      <br />\r\n      <b-form-checkbox v-model=\"cancelInvScheduleOptions.today\" @checked=\"cancelInvScheduleOptions.today\">Today</b-form-checkbox>\r\n      <b-form-checkbox v-model=\"cancelInvScheduleOptions.up7\" @checked=\"cancelInvScheduleOptions.up7\">Upcoming 7 days</b-form-checkbox>\r\n      <b-form-checkbox v-model=\"cancelInvScheduleOptions.up30\" @checked=\"cancelInvScheduleOptions.up30\">Upcoming 30 days</b-form-checkbox>\r\n      <b-form-checkbox v-model=\"cancelInvScheduleOptions.allUp\" @checked=\"cancelInvScheduleOptions.allUp\">All upcoming days</b-form-checkbox>\r\n      <template v-slot:modal-footer=\"{ ok, cancel }\">\r\n        <b-button size=\"md\" variant=\"warning\" @click=\"ok()\"\r\n          :disabled=\"!cancelInvScheduleOptions.today && !cancelInvScheduleOptions.up7 && !cancelInvScheduleOptions.up30 && !cancelInvScheduleOptions.allUp\"\r\n        > <i class=\"icon-check icons\"></i> Process</b-button>\r\n        <b-button size=\"md\" variant=\"secondary\" @click=\"cancel()\"> <i class=\"icon-close icons\"></i> No </b-button>\r\n      </template>\r\n    </b-modal>\r\n    <InventoryScheduleScrapingModal v-if=\"inventoryDialog.scraping\" @hidden=\"inventoryDialog.scraping = false\" :visible=\"inventoryDialog.scraping\" :info=\"inventoryDialog.selectedInfo\" :marketplace=\"inventoryDialog.marketplace\"/>\r\n    <b-modal title=\"Report scheduler\" centered v-model=\"reportSchedulerModal\" @ok=\"handleChangeReportScheduleMode\" dialog-class=\"cancel-modal\">\r\n      <span>Mode</span>\r\n      <b-form-select v-model=\"reportScheduleMode\" :options=\"reportScheduleOptions\" class=\"report-schedule-select\"></b-form-select>\r\n      <template v-slot:modal-footer=\"{ ok, cancel }\">\r\n        <b-button size=\"md\" variant=\"warning\" @click=\"ok()\"> <i class=\"icon-check icons\"></i> Save</b-button>\r\n        <b-button size=\"md\" variant=\"secondary\" @click=\"cancel()\"> <i class=\"icon-close icons\"></i> Close</b-button>\r\n      </template>\r\n    </b-modal>\r\n  </b-card>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapActions } from 'vuex'\r\nimport vToasted from '@/shared/notification'\r\nimport {\r\n  GET_PERMISSIONS,\r\n  GET_DEFAULT_PARAMS,\r\n  RUN_AN_INVENTORY,\r\n  CANCEL_AN_INVENTORY,\r\n  REMOVE_INVENTORY_SCHEDULES,\r\n  CHANGE_REPORT_SCHEDULE_MODE,\r\n  CANCEL_A_REPORT\r\n} from '@/actionTypes.js'\r\nimport moment from 'moment'\r\nimport _nav from '@/_nav'\r\nimport { MarketPlacesResult, DashboardFilterSourceType, AllSellerMode } from '@/constants/Report'\r\nimport { get, isEmpty } from 'lodash'\r\nimport InventoryScheduleScrapingModal from './InventoryScheduleScrapingModal.vue'\r\nimport LoadingSpinner from '@/components/common/LoadingSpinner'\r\n\r\nexport default {\r\n  name: 'c-table',\r\n  components: {\r\n    InventoryScheduleScrapingModal,\r\n    LoadingSpinner\r\n  },\r\n  inheritAttrs: false,\r\n  props: {\r\n    caption: {\r\n      type: String,\r\n      default: 'Table'\r\n    },\r\n    hover: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    striped: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    bordered: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    small: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    fixed: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    tableData: {\r\n      type: [Array, Function],\r\n      default: () => []\r\n    },\r\n    fields: {\r\n      type: [Array, Object],\r\n      default: () => []\r\n    },\r\n    dark: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    removeReports: {\r\n      type: [Function]\r\n    },\r\n    handleEditReport: {\r\n      type: [Function]\r\n    },\r\n    handleRun: {\r\n      type: [Function]\r\n    },\r\n    totalRows: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    dataSet: {\r\n      type: [Array, Object]\r\n    },\r\n    handleExportForJob: {\r\n      type: [Function]\r\n    },\r\n    currentPage: {\r\n      type: Number\r\n    },\r\n    reportLoading: {\r\n      type: Boolean\r\n    }\r\n  },\r\n  mixins: [vToasted],\r\n  data: () => {\r\n    return {\r\n      MarketPlacesResult,\r\n      DashboardFilterSourceType,\r\n      AllSellerMode,\r\n      dialog: {\r\n        remove: false,\r\n        run: false,\r\n        cancel: false,\r\n        ignore_cache: false,\r\n        force_run: false,\r\n        marketplace: '',\r\n        cancelReportSchedule: false\r\n      },\r\n      selected: {\r\n        remove: null,\r\n        run: null\r\n      },\r\n      nav: _nav,\r\n      inventoryDialog: {\r\n        run: false,\r\n        cancel: false,\r\n        scraping: false,\r\n        selectedInfo: null,\r\n        marketplace: ''\r\n      },\r\n      cancelInvScheduleOptions: {\r\n        today: false,\r\n        up7: false,\r\n        up30: false,\r\n        allUp: false\r\n      },\r\n      reportScheduleOptions: [\r\n        { value: 'daily', text: 'Daily' },\r\n        { value: 'manually', text: 'Manually' }\r\n      ],\r\n      reportScheduleMode: 'daily',\r\n      reportSchedulerModal: false\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters({ getPermissions: `mw/${GET_PERMISSIONS}`, defaultParams: `mw/reports/${GET_DEFAULT_PARAMS}` }),\r\n    captions: function() {\r\n      const { getPermissions, fields } = this\r\n      if (getPermissions.module_enabled && getPermissions.permissions.braman && getPermissions.module_enabled && getPermissions.permissions.braexe) {\r\n        return fields\r\n      } else if (getPermissions.module_enabled && getPermissions.permissions.braman && getPermissions.module_enabled && !getPermissions.permissions.braexe) {\r\n        return fields.filter((f) => f.key !== 'status')\r\n      } else if (getPermissions.module_enabled && !getPermissions.permissions.braman && getPermissions.module_enabled && getPermissions.permissions.braexe) {\r\n        return fields.filter((f) => f.key !== 'actions')\r\n      } else {\r\n        return fields.filter((f) => f.key !== 'actions' && f.key !== 'status')\r\n      }\r\n    },\r\n    capitalize: function() {\r\n      return (str) => {\r\n        if (str) {\r\n          const lowcaseString = str.toLowerCase()\r\n          return lowcaseString[0].toUpperCase() + lowcaseString.slice(1)\r\n        }\r\n        return str\r\n      }\r\n    },\r\n    params: function() {\r\n      return { ...this.defaultParams } || {}\r\n    }\r\n  },\r\n  methods: {\r\n    ...mapActions({\r\n      runInventory: `mw/reports/${RUN_AN_INVENTORY}`,\r\n      cancelInventory: `mw/reports/${CANCEL_AN_INVENTORY}`,\r\n      removeInventorySchedules: `mw/reports/${REMOVE_INVENTORY_SCHEDULES}`,\r\n      changeReportScheduleMode: `mw/reports/${CHANGE_REPORT_SCHEDULE_MODE}`,\r\n      cancelReport: `mw/reports/${CANCEL_A_REPORT}`\r\n    }),\r\n    handleRemoveItems(item) {\r\n      this.dialog.remove = true\r\n      this.selected.remove = {\r\n        id: item._id,\r\n        name: item.name_in_dashboard\r\n      }\r\n    },\r\n    paramsChange() {\r\n      this.$emit('paramsChange', this.params)\r\n    },\r\n    handleNavToHistoryMarketplacePage(reportId, marketplace, name) {\r\n      this.$router.push({\r\n        name: 'MWReportMarketplaceHistory',\r\n        params: { client_id: this.nav.clientId },\r\n        query: {\r\n          report_id: reportId,\r\n          marketplace: marketplace,\r\n          name: name\r\n        }\r\n      })\r\n    },\r\n    sortChange(event) {\r\n      this.params.sort_by = event.sortBy\r\n      if (event.sortBy) {\r\n        this.params.sort_dir = event.sortDesc ? 'desc' : 'asc'\r\n      } else {\r\n        this.params.sort_dir = null\r\n      }\r\n      this.paramsChange()\r\n    },\r\n    showModalRunJob(item, marketplace) {\r\n      this.dialog.run = true\r\n      this.selected.run = item\r\n      this.dialog.marketplace = marketplace\r\n    },\r\n    async handleRunJob(selectedItem) {\r\n      await this.handleRun(selectedItem, { ignore_cache: this.dialog.ignore_cache, force_run: this.dialog.force_run, marketplace: this.dialog.marketplace })\r\n      this.dialog.ignore_cache = false\r\n      this.dialog.force_run = false\r\n      this.paramsChange()\r\n    },\r\n    isExceeded(item, key) {\r\n      if (key.includes('amazon')) {\r\n        return !get(item, 'ready_for_amazon_scraping', true)\r\n      } else {\r\n        return !get(item, 'ready_for_google_scraping', true)\r\n      }\r\n    },\r\n    showModalRunInventory(item, marketplace) {\r\n      this.inventoryDialog.run = true\r\n      this.inventoryDialog.selectedInfo = item\r\n      this.inventoryDialog.marketplace = marketplace\r\n    },\r\n    showModalCancelInventory(item, marketplace) {\r\n      this.inventoryDialog.cancel = true\r\n      this.inventoryDialog.selectedInfo = item\r\n      this.inventoryDialog.marketplace = marketplace\r\n      this.cancelInvScheduleOptions = {\r\n        today: false,\r\n        up7: false,\r\n        up30: false,\r\n        allUp: false\r\n      }\r\n    },\r\n    showModalInventoryScraping(item, marketplace) {\r\n      this.inventoryDialog.scraping = true\r\n      this.inventoryDialog.selectedInfo = item\r\n      this.inventoryDialog.marketplace = marketplace\r\n    },\r\n    handleNavToHistoryInventoryPage(reportId, marketplace, name) {\r\n      this.$router.push({\r\n        name: 'MWReportInventoryHistory',\r\n        params: { client_id: this.nav.clientId },\r\n        query: {\r\n          report_id: reportId,\r\n          marketplace: marketplace,\r\n          name: name\r\n        }\r\n      })\r\n    },\r\n    handleRunInventory() {\r\n      this.runInventory(this.inventoryDialog).then(() => {\r\n        this.vToasted('success', 'Inventory investigation has been started.')\r\n      }).catch((err) => {\r\n        if (err.response.data.statusCode === 403) {\r\n          this.vToasted('error', err.response.data.message)\r\n        } else {\r\n          this.vToasted('error', 'Could not run inventory investigation for this report/marketplace today.')\r\n        }\r\n      })\r\n    },\r\n    async handleCancelInventory() {\r\n      let cancelTodayRes = true\r\n      let cancelUpcomingRes = true\r\n      // Cancel today schedule\r\n      if (this.cancelInvScheduleOptions.today) {\r\n        await this.cancelInventory(this.inventoryDialog).then(() => {\r\n          cancelTodayRes = true\r\n        }).catch(() => {\r\n          cancelTodayRes = false\r\n          this.vToasted('error', 'Could not run inventory cancellation for this report/marketplace today.')\r\n        })\r\n      }\r\n      // Remove upcoming schedule\r\n      if (this.cancelInvScheduleOptions.up7 || this.cancelInvScheduleOptions.up30 || this.cancelInvScheduleOptions.allUp) {\r\n        let from = moment().add(1, 'days')\r\n        let to = moment(from).add(6, 'days')\r\n        if (this.cancelInvScheduleOptions.up30) to = moment(from).add(29, 'days')\r\n        if (this.cancelInvScheduleOptions.allUp) to = null\r\n        await this.removeInventorySchedules({\r\n          report_id: this.inventoryDialog.selectedInfo._id,\r\n          marketplace: this.inventoryDialog.marketplace,\r\n          from: from.format('YYYY-MM-DD'),\r\n          to: to ? to.format('YYYY-MM-DD') : null\r\n        }).then(() => {\r\n          cancelUpcomingRes = true\r\n        }).catch(() => {\r\n          cancelUpcomingRes = false\r\n          this.vToasted('error', 'Could not remove upcoming inventory schedules.')\r\n        })\r\n      }\r\n      if (cancelTodayRes && cancelUpcomingRes) {\r\n        this.vToasted('success', 'Inventory investigations has been cancelled.')\r\n      }\r\n    },\r\n    isRunInventory(item) {\r\n      const runableStatus = ['PENDING', 'CANCELLED', 'DONE']\r\n      return isEmpty(item.inventory_schedule) || runableStatus.includes(item.inventory_schedule.status)\r\n    },\r\n    showReportSchedulerModal(item, marketplace, marketplaceInfo) {\r\n      this.inventoryDialog.selectedInfo = item\r\n      this.inventoryDialog.marketplace = marketplace\r\n      this.reportScheduleMode = marketplaceInfo.schedule_mode || 'daily'\r\n      this.reportSchedulerModal = true\r\n    },\r\n    handleChangeReportScheduleMode() {\r\n      const params = {\r\n        report_id: this.inventoryDialog.selectedInfo._id,\r\n        marketplace: this.inventoryDialog.marketplace,\r\n        mode: this.reportScheduleMode\r\n      }\r\n      this.changeReportScheduleMode(params).then(() => {\r\n        this.paramsChange()\r\n        this.vToasted('success', 'Change report schedule mode successfully.')\r\n      }).catch(() => {\r\n        this.vToasted('error', 'Could not change report schedule mode.')\r\n      })\r\n    },\r\n    showModalCancelReport(item, marketplace) {\r\n      this.dialog.cancelReportSchedule = true\r\n      this.inventoryDialog.selectedInfo = item\r\n      this.inventoryDialog.marketplace = marketplace\r\n    },\r\n    handleCancelReport() {\r\n      const params = {\r\n        report_id: this.inventoryDialog.selectedInfo._id,\r\n        marketplace: this.inventoryDialog.marketplace\r\n      }\r\n      this.cancelReport(params).then(() => {\r\n        this.paramsChange()\r\n        this.vToasted('success', 'Today data processing has been cancelled successfully.')\r\n      }).catch(() => {\r\n        this.vToasted('error', 'Oops! Today data processing could not be cancelled.')\r\n      })\r\n    },\r\n    async checkCondition() {\r\n      if (this.dataSet.items.length === 0 && this.params.page > 1) {\r\n        this.params.page--\r\n        await this.paramsChange()\r\n      }\r\n    }\r\n  },\r\n  filters: {\r\n    formatTime: function(time) {\r\n      return moment(time).format()\r\n    }\r\n  },\r\n  mounted() {\r\n    this.params.page = this.$route.query.page ? this.$route.query.page : 1\r\n    this.params.s = this.$route.query.s ? this.$route.query.s : ''\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.report-list-title {\r\n  position: relative;\r\n  top: 4px;\r\n}\r\n.report-marketplace-header {\r\n  padding: 0;\r\n  margin: 0;\r\n  text-align: left;\r\n  margin-bottom: 5px;\r\n}\r\n::v-deep .cancel-modal {\r\n  max-width: 510px !important;\r\n  .custom-checkbox {\r\n    padding-bottom: 0.5rem;\r\n  }\r\n}\r\n#manage-dropdown /deep/ ul {\r\n  min-width: 50px;\r\n}\r\n::v-deep .col-manage {\r\n  width: 90px;\r\n}\r\n::v-deep .custom_icon {\r\n  border-width: 1px;\r\n}\r\n::v-deep .icon_true_map {\r\n  margin-left: 5px;\r\n  font-size: 17px;\r\n}\r\n::v-deep .job-progress {\r\n  font-weight: normal;\r\n}\r\n.btn-group {\r\n  display: inline-block;\r\n  &.btn-group-start {\r\n    text-align: start;\r\n  }\r\n  &.btn-group-end {\r\n    text-align: end;\r\n  }\r\n}\r\n.report-schedule-select {\r\n  width: 25%;\r\n  margin-left: 10px;\r\n}\r\n.drp-actions ::v-deep {\r\n  .dropdown-menu {\r\n    min-width: 50%;\r\n    height: auto;\r\n    .cls-icon-trash {\r\n      color: #DC3545;\r\n      margin-right: 5px;\r\n    }\r\n    .dropdown-item {\r\n      padding: 6px 15px;\r\n      font-size: 12px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components/page/reports"}]}