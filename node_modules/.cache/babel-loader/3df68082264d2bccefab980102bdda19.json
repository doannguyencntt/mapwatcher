{"remainingRequest":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js!C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Project\\CBPO\\plat-mw-web\\src\\components\\page\\brands\\ReportMarketplacePicker.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Project\\CBPO\\plat-mw-web\\src\\components\\page\\brands\\ReportMarketplacePicker.vue","mtime":1628569031600},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626076743241},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1626076746842},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1620898435163},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626076743241},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1620898436811}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"core-js/modules/es6.array.find\";\nimport _defineProperty from \"C:/Project/CBPO/plat-mw-web/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _objectSpread2;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport _ from 'lodash';\nimport { mapActions, mapGetters } from 'vuex';\nimport { required } from 'vuelidate/lib/validators';\nimport vToasted from '@/shared/notification';\nimport VueTagsInput from '@johmun/vue-tags-input';\nimport Datepicker from 'vuejs-datepicker';\nimport * as moment from 'moment/moment';\nimport { MarketPlacesResult } from '@/constants/Report';\nimport * as TYPE from '@/actionTypes.js';\nimport PermissionsMixin from '@/components/common/PermissionsMixin';\nexport default {\n  name: 'MWReportMarketplacePicker',\n  data: function data() {\n    return {\n      MarketPlacesResult: MarketPlacesResult,\n      listUniqGoogleShoppingMarketplace: [],\n      fields: [// A column that needs custom formatting\n      {\n        key: 'marketplace',\n        label: 'Marketplace'\n      }, {\n        key: 'report_name',\n        label: 'Brand'\n      }, {\n        key: 'file_in_use',\n        label: 'File in Use'\n      }, {\n        key: 'date_started',\n        label: 'Date Started'\n      }, {\n        key: 'all_seller_mode',\n        label: 'All Seller Mode'\n      }, {\n        key: 'action',\n        label: ''\n      }],\n      allSellerModeOptions: [{\n        value: 'none',\n        text: 'None'\n      }, {\n        value: 'authorized_only',\n        text: 'Authorized Only'\n      }, {\n        value: 'rogue_only',\n        text: 'Rogue Only'\n      }, {\n        value: 'both',\n        text: 'Both'\n      }],\n      marketplaces: {\n        amazon_com: false,\n        amazon_ca: false,\n        amazon_co_uk: false,\n        amazon_de: false,\n        amazon_fr: false,\n        amazon_it: false,\n        amazon_es: false,\n        amazon_nl: false,\n        amazon_co_jp: false,\n        amazon_in: false,\n        amazon_com_au: false,\n        amazon_sg: false,\n        amazon_ae: false,\n        amazon_com_tr: false,\n        amazon_com_mx: false,\n        amazon_com_br: false,\n        google_shopping: false\n      },\n      marketplaceItems: [],\n      removedMarketplace: [],\n      parsedData: {}\n    };\n  },\n  mixins: [vToasted, PermissionsMixin],\n  props: {\n    reportDoc: Object,\n    isValidMarketplace: Boolean\n  },\n  computed: _objectSpread(_objectSpread({}, mapGetters({\n    planConfig: \"mw/\".concat(TYPE.GET_PLAN_CONFIG)\n  })), {}, {\n    listUniqAmazonMarketplace: function listUniqAmazonMarketplace() {\n      if (_.isEmpty(this.planConfig)) return [];\n      var listAmazon = this.planConfig.allowed_amazon_marketplaces.map(function (item) {\n        return {\n          value: item,\n          text: _.upperFirst(item)\n        };\n      });\n      return _.sortBy(listAmazon, ['value']);\n    },\n    listUniqAllMarketplace: function listUniqAllMarketplace() {\n      return _.concat(this.listUniqAmazonMarketplace, this.listUniqGoogleShoppingMarketplace);\n    },\n    amazonMarketPlaceList: function amazonMarketPlaceList() {\n      var _this = this;\n\n      return this.listUniqAmazonMarketplace.filter(function (item) {\n        return !_this.marketplaceItems.find(function (mkItem) {\n          return mkItem.marketplace.value === item.value;\n        });\n      });\n    },\n    googleShoppingMarketplaceList: function googleShoppingMarketplaceList() {\n      var _this2 = this;\n\n      return this.listUniqGoogleShoppingMarketplace.filter(function (item) {\n        return !_this2.marketplaceItems.find(function (mkItem) {\n          return mkItem.marketplace.value === item.value;\n        });\n      });\n    }\n  }),\n  methods: _objectSpread(_objectSpread({}, mapActions({})), {}, (_objectSpread2 = {\n    /* eslint-disable */\n    insertMarketplace: function insertMarketplace(marketplace) {\n      var alreadyExist = _.find(this.marketplaceItems, function (o) {\n        return o.marketplace.value === marketplace;\n      });\n\n      if (!alreadyExist) {\n        var marketplaceDoc = _.find(this.listUniqAllMarketplace, {\n          value: marketplace\n        });\n\n        this.marketplaceItems.push({\n          marketplace: marketplaceDoc,\n          report_name: '',\n          file_in_use: '',\n          date_started: '',\n          all_seller_mode: 'none',\n          action: false\n        });\n      }\n\n      this.autoEnableWhenSelectMarketplace(marketplace, true);\n    },\n    autoEnableWhenSelectMarketplace: function autoEnableWhenSelectMarketplace(marketplace, action) {\n      this.marketplaces[marketplace.replace(/[.]/g, '_')] = action;\n    },\n    buildMarketplaceInfo: function buildMarketplaceInfo(name, fileInUse, dateStarted, all_seller_mode) {\n      return {\n        name: name,\n        file_in_use: fileInUse,\n        date_started: dateStarted ? moment(dateStarted).format('MM/DD/YYYY') : '',\n        all_seller_mode: all_seller_mode\n      };\n    },\n    removeMarketplace: function removeMarketplace(marketplace) {\n      this.marketplaceItems = _.remove(this.marketplaceItems, function (o) {\n        return o.marketplace.value !== marketplace;\n      });\n      this.autoEnableWhenSelectMarketplace(marketplace, false);\n    },\n    isAmazonMarketplace: function isAmazonMarketplace(marketplace) {\n      return _.includes(marketplace, 'amazon');\n    },\n    getMarketplaceField: function getMarketplaceField(marketplace) {\n      return \"marketplace_\".concat(marketplace.replace(/[.]/g, '_'));\n    },\n    convertMarketplaceKeyToField: function convertMarketplaceKeyToField(marketplace) {\n      return marketplace.replace(/[_]/g, '.');\n    },\n    findMarketplaceFromListUnique: function findMarketplaceFromListUnique(marketplace) {\n      var _this3 = this;\n\n      return _.find(this.listUniqAllMarketplace, function (data) {\n        if (_this3.isAmazonMarketplace(marketplace)) {\n          return data.value === _this3.convertMarketplaceKeyToField(marketplace);\n        } else if (_this3.isGoogleShoppingMarketplace(marketplace)) {\n          return data.value === MarketPlacesResult.GOOGLE_SHOPPING;\n        }\n      });\n    }\n  }, _defineProperty(_objectSpread2, \"isAmazonMarketplace\", function isAmazonMarketplace(marketplace) {\n    return _.includes(marketplace, 'amazon');\n  }), _defineProperty(_objectSpread2, \"isGoogleShoppingMarketplace\", function isGoogleShoppingMarketplace(marketplace) {\n    return _.includes(marketplace, 'google');\n  }), _defineProperty(_objectSpread2, \"syncMarketplaceItems\", function syncMarketplaceItems(doc) {\n    var _this4 = this;\n\n    if (!doc.marketplaces) {\n      return;\n    }\n\n    var marketplaceKeys = _.keys(doc.marketplaces);\n\n    var values = _.values(MarketPlacesResult);\n\n    _.forEach(marketplaceKeys, function (marketplaceKey) {\n      var marketplaceField = _.includes(marketplaceKey, 'amazon') ? _this4.convertMarketplaceKeyToField(marketplaceKey) : marketplaceKey;\n\n      if (doc.marketplaces[marketplaceKey] && _.includes(values, marketplaceField)) {\n        _this4.marketplaces[marketplaceKey] = true;\n\n        var _marketplaceField = _this4.getMarketplaceField(marketplaceKey);\n\n        var marketplaceInfo = doc[_marketplaceField];\n\n        if (marketplaceInfo) {\n          var name = marketplaceInfo.name,\n              file_in_use = marketplaceInfo.file_in_use,\n              date_started = marketplaceInfo.date_started,\n              _all_seller_mode = marketplaceInfo.all_seller_mode;\n\n          _this4.marketplaceItems.push({\n            marketplace: _this4.findMarketplaceFromListUnique(marketplaceKey),\n            report_name: name,\n            file_in_use: file_in_use,\n            date_started: date_started,\n            action: '',\n            all_seller_mode: _all_seller_mode || 'none'\n          });\n        } else {\n          _this4.marketplaceItems.push({\n            marketplace: _this4.findMarketplaceFromListUnique(marketplaceKey),\n            report_name: '',\n            file_in_use: '',\n            date_started: '',\n            action: '',\n            all_seller_mode: all_seller_mode || 'none'\n          });\n        }\n      }\n    });\n  }), _defineProperty(_objectSpread2, \"convertData\", function convertData() {\n    var _this5 = this;\n\n    _.forEach(this.marketplaceItems, function (marketplaceItem) {\n      var marketplaceInfo = _this5.getMarketplaceField(marketplaceItem.marketplace.value);\n\n      var report_name = marketplaceItem.report_name,\n          file_in_use = marketplaceItem.file_in_use,\n          date_started = marketplaceItem.date_started,\n          all_seller_mode = marketplaceItem.all_seller_mode;\n\n      _.assign(_this5.parsedData, _defineProperty({}, marketplaceInfo, _this5.buildMarketplaceInfo(report_name, file_in_use, date_started, all_seller_mode)));\n    });\n  }), _objectSpread2)),\n  created: function created() {\n    var _this6 = this;\n\n    var marketplaceValues = _.values(MarketPlacesResult);\n\n    _.forEach(marketplaceValues, function (marketplaceValue) {\n      if (_.includes(marketplaceValue, 'google')) {\n        _this6.listUniqGoogleShoppingMarketplace.push({\n          value: marketplaceValue,\n          text: 'Google Shopping'\n        });\n      }\n    });\n\n    if (this.reportDoc) {\n      this.syncMarketplaceItems(this.reportDoc); // this.$watch('reportDoc', (val) =>\n      //   {\n      //     this.marketplaceItems = []\n      //     this.syncMarketplaceItems(val)\n      //   }\n      // )\n    }\n  },\n  validations: {\n    marketplaceItems: {\n      required: required,\n      $each: {\n        report_name: {\n          required: required\n        }\n      }\n    }\n  },\n  components: {\n    VueTagsInput: VueTagsInput,\n    Datepicker: Datepicker\n  },\n  watch: {\n    marketplaceItems: {\n      deep: true,\n      handler: function handler(val) {\n        this.convertData();\n        this.$emit('marketplaceChange', {\n          parsedData: this.parsedData,\n          marketplaces: this.marketplaces\n        });\n      }\n    },\n    reportDoc: {\n      handler: function handler(val) {\n        this.marketplaceItems = [];\n        this.syncMarketplaceItems(val);\n      }\n    }\n  }\n};",null]}