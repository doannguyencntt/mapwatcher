{"remainingRequest":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js!C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Project\\CBPO\\plat-mw-web\\src\\components\\page\\sellerEnforcements\\Histories.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Project\\CBPO\\plat-mw-web\\src\\components\\page\\sellerEnforcements\\Histories.vue","mtime":1630397532711},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626076743241},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1620898435163},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626076743241},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1620898436811}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.regexp.replace\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:/Project/CBPO/plat-mw-web/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"C:/Project/CBPO/plat-mw-web/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport _ from 'lodash';\nimport { mapActions, mapGetters } from 'vuex';\nimport * as TYPE from '@/actionTypes.js';\nimport { required, email } from 'vuelidate/lib/validators';\nimport vToasted from '@/shared/notification';\nimport _nav from '@/_nav';\nexport default {\n  name: 'MWSellerEnforcementHistories',\n  data: function data() {\n    return {\n      paginationDoc: {\n        items: [],\n        page_count: 0,\n        page_current: 1,\n        page_size: 0,\n        total: 0\n      },\n      fields: [{\n        key: 'date',\n        label: 'Date'\n      }, {\n        key: 'actor',\n        label: 'Actor'\n      }, {\n        key: 'message',\n        label: 'Message'\n      }, {\n        key: 'data',\n        label: 'Data'\n      }],\n      nav: _nav\n    };\n  },\n  mixins: [vToasted],\n  methods: _objectSpread(_objectSpread({}, mapActions({\n    fetchHistory: \"mw/sellerEnforcements/\".concat(TYPE.FETCH_LIST_SELLER_ENFORCEMENT_HISTORY)\n  })), {}, {\n    backToListSeller: function backToListSeller() {\n      this.$router.push({\n        name: 'MWListSellerEnforcements',\n        params: {\n          client_id: this.nav.clientId\n        }\n      });\n    },\n    loadData: function () {\n      var _loadData = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var limit, page;\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.fetchData();\n\n              case 2:\n                limit = this.paginationDoc.page_size ? this.paginationDoc.page_size : '10';\n                page = this.paginationDoc.page_current ? this.paginationDoc.page_current : '1';\n                this.$router.replace({\n                  query: {\n                    limit: limit,\n                    page: page\n                  }\n                });\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function loadData() {\n        return _loadData.apply(this, arguments);\n      }\n\n      return loadData;\n    }(),\n    fetchData: function () {\n      var _fetchData = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var limit, page, result;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                limit = this.paginationDoc.page_size ? this.paginationDoc.page_size : '10';\n                page = this.paginationDoc.page_current ? this.paginationDoc.page_current : '1';\n                _context2.next = 4;\n                return this.fetchHistory({\n                  params: {\n                    limit: limit,\n                    page: page\n                  },\n                  id: this.$route.params.id\n                });\n\n              case 4:\n                result = _context2.sent;\n                this.$set(this.paginationDoc, 'items', result.items);\n                this.$set(this.paginationDoc, 'page_count', result.page_count);\n                this.$set(this.paginationDoc, 'page_current', result.page_current);\n                this.$set(this.paginationDoc, 'page_size', result.page_size);\n                this.$set(this.paginationDoc, 'total', result.total);\n\n              case 10:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function fetchData() {\n        return _fetchData.apply(this, arguments);\n      }\n\n      return fetchData;\n    }(),\n    caption: function caption(text) {\n      return _.startCase(_.lowerCase(text));\n    },\n    generateId: function generateId(index) {\n      return \"row-\".concat(index);\n    }\n  }),\n  computed: _objectSpread({}, mapGetters({\n    getPermissions: \"mw/\".concat(TYPE.GET_PERMISSIONS)\n  })),\n  created: function () {\n    var _created = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3() {\n      return regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (this.$route.params.id) {\n                _context3.next = 3;\n                break;\n              }\n\n              this.backToListSeller();\n              return _context3.abrupt(\"return\");\n\n            case 3:\n              _context3.prev = 3;\n\n              if (this.$route.query.page) {\n                this.paginationDoc.page_current = this.$route.query.page;\n              }\n\n              _context3.next = 7;\n              return this.loadData();\n\n            case 7:\n              _context3.next = 13;\n              break;\n\n            case 9:\n              _context3.prev = 9;\n              _context3.t0 = _context3[\"catch\"](3);\n              this.vToasted('error', _context3.t0);\n              this.backToListSeller();\n\n            case 13:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, this, [[3, 9]]);\n    }));\n\n    function created() {\n      return _created.apply(this, arguments);\n    }\n\n    return created;\n  }(),\n  validations: {\n    contacts: {\n      $each: {\n        email: {\n          required: required,\n          email: email\n        },\n        contact_name: {\n          required: required\n        },\n        job_title: {\n          required: required\n        },\n        action: {\n          required: required\n        }\n      }\n    }\n  }\n};",{"version":3,"sources":["Histories.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div class=\"animated fadeIn\">\r\n    <b-card>\r\n      <!-- header -->\r\n      <template v-slot:header>\r\n        <div class=\"d-flex justify-content-between align-items-center\">\r\n          <span><strong>{{$route.meta.tableName}}</strong></span>\r\n          <div class=\"card-header-actions\">\r\n            <div class=\"btn-close\">\r\n              <b-button variant=\"secondary\" class=\"btn btn-block\" size=\"sm\" @click=\"backToListSeller()\"> <i class=\"icon-arrow-left-circle icons\"></i> Back </b-button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </template>\r\n      <b-table\r\n              hover\r\n              striped\r\n              small\r\n              outlined\r\n              responsive=\"sm\"\r\n              thead-class=\"thead-light text-nowrap\"\r\n              :fields=\"fields\"\r\n              :items=\"paginationDoc.items\"\r\n              show-empty\r\n              class=\"overflow-auto\"\r\n              :class=\"'text-center'\"\r\n      >\r\n        <template v-slot:empty>\r\n          <div class=\"empty\">No Histories</div>\r\n        </template>\r\n        <template v-slot:head(date)=\"data\">\r\n          <span>\r\n            <i class=\"icon-clock icons rounded-circle\"></i> <span class=\"ml-2\">{{ data.label }}</span>\r\n          </span>\r\n        </template>\r\n        <template v-slot:cell(date)=\"data\">\r\n          <span>{{ data.item.date |  moment('MM/DD/YYYY hh:mm a') }}</span>\r\n        </template>\r\n        <template v-slot:cell(actor)=\"data\">\r\n          <span>{{ caption(data.item.user.name) }}</span>\r\n        </template>\r\n        <template v-slot:cell(message)=\"data\">\r\n          <span>{{ caption(data.item.action) }}</span>\r\n        </template>\r\n        <template v-slot:cell(data)=\"data\">\r\n          <span :id=generateId(data.index)>{...}</span>\r\n          <b-popover :target=generateId(data.index) triggers=\"hover\" placement=\"left\">\r\n            <div>\r\n              <pre>{{ JSON.stringify(data.item.data, null, 2) }}</pre>\r\n            </div>\r\n          </b-popover>\r\n        </template>\r\n      </b-table>\r\n      <nav\r\n              class=\"d-flex justify-content-center\"\r\n              v-if=\"paginationDoc.total > paginationDoc.page_size && paginationDoc.items.length > 0\"\r\n      >\r\n        <b-pagination\r\n                :total-rows=\"paginationDoc.total\"\r\n                :per-page=\"paginationDoc.page_size\"\r\n                v-model=\"paginationDoc.page_current\"\r\n                prev-text=\"Prev\"\r\n                next-text=\"Next\"\r\n                hide-goto-end-buttons\r\n                @change=\"\r\n          paginationDoc.page_current = $event\r\n          loadData()\r\n        \"\r\n                hide-ellipsis\r\n        />\r\n      </nav>\r\n    </b-card>\r\n  </div>\r\n</template>\r\n<script>\r\nimport _ from 'lodash'\r\nimport { mapActions, mapGetters } from 'vuex'\r\nimport * as TYPE from '@/actionTypes.js'\r\nimport { required, email } from 'vuelidate/lib/validators'\r\nimport vToasted from '@/shared/notification'\r\nimport _nav from '@/_nav'\r\n\r\nexport default {\r\n  name: 'MWSellerEnforcementHistories',\r\n  data() {\r\n    return {\r\n      paginationDoc: {\r\n        items: [],\r\n        page_count: 0,\r\n        page_current: 1,\r\n        page_size: 0,\r\n        total: 0\r\n      },\r\n      fields: [\r\n        {\r\n          key: 'date',\r\n          label: 'Date'\r\n        },\r\n        {\r\n          key: 'actor',\r\n          label: 'Actor'\r\n        },\r\n        {\r\n          key: 'message',\r\n          label: 'Message'\r\n        },\r\n        {\r\n          key: 'data',\r\n          label: 'Data'\r\n        }\r\n      ],\r\n      nav: _nav\r\n    }\r\n  },\r\n  mixins: [vToasted],\r\n  methods: {\r\n    ...mapActions({\r\n      fetchHistory: `mw/sellerEnforcements/${TYPE.FETCH_LIST_SELLER_ENFORCEMENT_HISTORY}`\r\n    }),\r\n    backToListSeller() {\r\n      this.$router.push({ name: 'MWListSellerEnforcements', params: { client_id: this.nav.clientId } })\r\n    },\r\n    async loadData() {\r\n      await this.fetchData()\r\n      const limit = this.paginationDoc.page_size ? this.paginationDoc.page_size : '10'\r\n      const page = this.paginationDoc.page_current ? this.paginationDoc.page_current : '1'\r\n      this.$router.replace({\r\n        query: {\r\n          limit: limit,\r\n          page: page\r\n        }\r\n      })\r\n    },\r\n    async fetchData() {\r\n      const limit = this.paginationDoc.page_size ? this.paginationDoc.page_size : '10'\r\n      const page = this.paginationDoc.page_current ? this.paginationDoc.page_current : '1'\r\n      const result = await this.fetchHistory({params: {\r\n        limit: limit,\r\n        page: page\r\n      },\r\n      id: this.$route.params.id})\r\n      this.$set(this.paginationDoc, 'items', result.items)\r\n      this.$set(this.paginationDoc, 'page_count', result.page_count)\r\n      this.$set(this.paginationDoc, 'page_current', result.page_current)\r\n      this.$set(this.paginationDoc, 'page_size', result.page_size)\r\n      this.$set(this.paginationDoc, 'total', result.total)\r\n    },\r\n    caption(text) {\r\n      return _.startCase(_.lowerCase(text))\r\n    },\r\n    generateId(index) {\r\n      return `row-${index}`\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n      getPermissions: `mw/${TYPE.GET_PERMISSIONS}`\r\n    })\r\n  },\r\n  async created() {\r\n    if (!this.$route.params.id) {\r\n      this.backToListSeller()\r\n      return\r\n    }\r\n    try {\r\n      if (this.$route.query.page) {\r\n        this.paginationDoc.page_current = this.$route.query.page\r\n      }\r\n      await this.loadData()\r\n    } catch (error) {\r\n      this.vToasted('error', error)\r\n      this.backToListSeller()\r\n    }\r\n  },\r\n  validations: {\r\n    contacts: {\r\n      $each: {\r\n        email: { required, email },\r\n        contact_name: { required },\r\n        job_title: { required },\r\n        action: { required }\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n::v-deep .card-header-actions {\r\n  margin-right: 0;\r\n}\r\n::v-deep .form-control:focus {\r\n  box-shadow: none;\r\n  border-color: #e4e7ea;\r\n}\r\n::v-deep .tag-input {\r\n  border-top: 0px;\r\n  border-top-left-radius: 0px;\r\n  border-top-right-radius: 0px;\r\n}\r\n.textarea {\r\n  overflow-y: auto !important;\r\n}\r\n::v-deep .mw-vue-tags-custom .ti-input {\r\n  border-bottom-right-radius: 0px;\r\n  border-bottom-left-radius: 0px;\r\n  height: auto !important;\r\n}\r\n.component-label {\r\n  min-width: 55px;\r\n}\r\n.custom-datepicker-control {\r\n  &::v-deep {\r\n    button.btn {\r\n      width: 83px;\r\n    }\r\n    .vdp-datepicker {\r\n      width: calc(100% - 83px);\r\n      margin-right: 0 !important;\r\n    }\r\n  }\r\n}\r\n.custom-width {\r\n  width: 100%;\r\n  max-width: 70%;\r\n}\r\n.save-button {\r\n  margin-left: 22.5px;\r\n}\r\n</style>\r\n"],"sourceRoot":"src/components/page/sellerEnforcements"}]}