{"remainingRequest":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js!C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Project\\CBPO\\plat-mw-web\\src\\components\\page\\sellerEnforcements\\Content.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Project\\CBPO\\plat-mw-web\\src\\components\\page\\sellerEnforcements\\Content.vue","mtime":1639556685420},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626076743241},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1620898435163},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626076743241},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1620898436811}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.object.keys\";\nimport \"core-js/modules/es6.function.name\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:/Project/CBPO/plat-mw-web/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"C:/Project/CBPO/plat-mw-web/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport \"core-js/modules/es6.number.constructor\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { mapGetters, mapActions } from 'vuex';\nimport vToasted from '@/shared/notification';\nimport * as TYPE from '@/actionTypes.js';\nimport _ from 'lodash';\nimport _nav from '@/_nav';\nimport { SellerEnforcementFrequencyType } from '@/constants/SellerEnforcement';\nimport { VueEditor } from 'vue2-editor';\nimport vSelect from 'vue-select';\nimport moment from 'moment';\nimport LoadingSpinner from '@/components/common/LoadingSpinner';\nexport default {\n  name: 'c-table',\n  inheritAttrs: false,\n  mixins: [vToasted],\n  props: {\n    caption: {\n      type: String,\n      default: 'Table'\n    },\n    hover: {\n      type: Boolean,\n      default: false\n    },\n    striped: {\n      type: Boolean,\n      default: false\n    },\n    bordered: {\n      type: Boolean,\n      default: false\n    },\n    small: {\n      type: Boolean,\n      default: false\n    },\n    fixed: {\n      type: Boolean,\n      default: false\n    },\n    tableData: {\n      type: [Array, Function],\n      default: function _default() {\n        return [];\n      }\n    },\n    fields: {\n      type: [Array, Object],\n      default: function _default() {\n        return [];\n      }\n    },\n    dark: {\n      type: Boolean,\n      default: false\n    },\n    totalRows: {\n      type: Number,\n      default: 0\n    },\n    handleChangePage: {\n      type: [Function]\n    },\n    sellerEnforcementLoading: {\n      type: Boolean\n    }\n  },\n  data: function data() {\n    return {\n      sellerEnforcementFrequencyType: _.cloneDeep(SellerEnforcementFrequencyType),\n      dialog: {\n        remove: false,\n        letter: false,\n        switch: false,\n        update_sender: false,\n        send_mail: false\n      },\n      selected: {\n        remove: null,\n        switch: null,\n        item: null,\n        history_dates: [],\n        send_mail: {\n          total_contact: 0,\n          date: null\n        },\n        letter: {\n          body: {},\n          include_document: false\n        }\n      },\n      vueEditorCustomToolbar: [[{\n        'font': []\n      }], [{\n        'header': [false, 1, 2, 3, 4, 5, 6]\n      }], [{\n        'size': ['small', false, 'large', 'huge']\n      }], ['bold', 'italic', 'underline'], [{\n        'align': ''\n      }, {\n        'align': 'center'\n      }, {\n        'align': 'right'\n      }, {\n        'align': 'justify'\n      }], [{\n        'header': 1\n      }, {\n        'header': 2\n      }], [{\n        'list': 'ordered'\n      }, {\n        'list': 'bullet'\n      }], [{\n        'script': 'sub'\n      }, {\n        'script': 'super'\n      }], [{\n        'indent': '-1'\n      }, {\n        'indent': '+1'\n      }], [{\n        'color': []\n      }, {\n        'background': []\n      }], ['link', 'formula'], [{\n        'direction': 'rtl'\n      }], ['clean']],\n      defaultLetterContent: '<p>Dear {{ contact-name }},</p>' + '<p>We would like to inform that you have violation .Total number of violation is {{ violation-count }}.</p>' + '<p>Please see the attached file.</p>' + '<p>Regards,</p>' + '<p>Investigate Team</p>',\n      nav: _nav\n    };\n  },\n  computed: _objectSpread(_objectSpread({}, mapGetters({\n    getPermissions: \"mw/\".concat(TYPE.GET_PERMISSIONS),\n    defaultParams: \"mw/sellerEnforcements/\".concat(TYPE.GET_DEFAULT_SELLER_ENFORCEMENT_PARAMS),\n    listSellers: \"mw/sellerEnforcements/\".concat(TYPE.GET_LIST_SELLER_ENFORCEMENT)\n  })), {}, {\n    params: function params() {\n      console.log(this.defaultParams);\n      return _objectSpread({}, this.defaultParams) || {};\n    },\n    getItems: function getItems() {\n      return this.listSellers.items;\n    },\n    captions: function captions() {\n      var fields = this.fields;\n      return fields;\n    }\n  }),\n  components: {\n    VueEditor: VueEditor,\n    vSelect: vSelect,\n    LoadingSpinner: LoadingSpinner\n  },\n  methods: _objectSpread(_objectSpread({}, mapActions({\n    removeSeller: \"mw/sellerEnforcements/\".concat(TYPE.REMOVE_SELLER_ENFORCEMENT),\n    changeFrequency: \"mw/sellerEnforcements/\".concat(TYPE.CHANGE_FREQUENCY_SELLER_ENFORCEMENT),\n    remoteEditSeller: \"mw/sellerEnforcements/\".concat(TYPE.REMOTE_EDIT_SELLER_ENFORCEMENT),\n    manualSendMail: \"mw/sellerEnforcements/\".concat(TYPE.REMOTE_MANUAL_SEND_MAIL_SELLER_ENFORCEMENT),\n    getHistoryDates: \"mw/sellerEnforcements/\".concat(TYPE.GET_SELLER_ENFORCEMENT_HISTORY_DATES)\n  })), {}, {\n    paramsChange: function paramsChange() {\n      this.$emit('paramsChange', this.params);\n    },\n    handleEditItem: function handleEditItem(seller) {\n      this.$router.push({\n        name: 'MWEditSellerEnforcements',\n        params: {\n          client_id: this.nav.clientId,\n          id: seller.id\n        },\n        query: {\n          seller: seller\n        }\n      });\n    },\n    handleManualSendMail: function () {\n      var _handleManualSendMail = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _this$selected$item, id, contacts, name;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _this$selected$item = this.selected.item, id = _this$selected$item.id, contacts = _this$selected$item.contacts, name = _this$selected$item.name;\n\n                if (!_.isEmpty(contacts)) {\n                  _context.next = 3;\n                  break;\n                }\n\n                return _context.abrupt(\"return\", this.vToasted('error', \"\".concat(name, \" seller has empty contact list.\")));\n\n              case 3:\n                _context.prev = 3;\n                _context.next = 6;\n                return this.manualSendMail({\n                  id: id,\n                  date: this.selected.send_mail.date\n                });\n\n              case 6:\n                this.vToasted('success', \"\".concat(name, \" seller's violations on \").concat(this.selected.send_mail.date, \" have been successfully sent to all contacts.\"));\n                this.dialog.send_mail = false;\n                _context.next = 13;\n                break;\n\n              case 10:\n                _context.prev = 10;\n                _context.t0 = _context[\"catch\"](3);\n                this.vToasted('error', _context.t0.message);\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this, [[3, 10]]);\n      }));\n\n      function handleManualSendMail() {\n        return _handleManualSendMail.apply(this, arguments);\n      }\n\n      return handleManualSendMail;\n    }(),\n    handleRemoveItem: function handleRemoveItem(item) {\n      this.dialog.remove = true;\n      this.selected.remove = {\n        id: item.id,\n        name: item.name\n      };\n    },\n    handleUpdateLetter: function () {\n      var _handleUpdateLetter = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n        var name, id;\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.prev = 0;\n                name = this.selected.item.name;\n                id = this.selected.item.id;\n                _context2.next = 5;\n                return this.remoteEditSeller({\n                  params: {\n                    letter: this.selected.letter\n                  },\n                  id: id\n                });\n\n              case 5:\n                this.vToasted('success', \"Letter of seller \".concat(name, \" has been updated successfully.\"));\n                this.paramsChange();\n                this.dialog.letter = false;\n                _context2.next = 13;\n                break;\n\n              case 10:\n                _context2.prev = 10;\n                _context2.t0 = _context2[\"catch\"](0);\n                this.vToasted('error', _context2.t0.data.message);\n\n              case 13:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this, [[0, 10]]);\n      }));\n\n      function handleUpdateLetter() {\n        return _handleUpdateLetter.apply(this, arguments);\n      }\n\n      return handleUpdateLetter;\n    }(),\n    handleEditLetter: function handleEditLetter(item) {\n      this.selected.item = item;\n\n      if (!_.isEmpty(item.letter.body)) {\n        this.selected.letter.body = item.letter.body;\n      } else {\n        this.selected.letter.body = this.defaultLetterContent;\n      }\n\n      this.selected.letter.include_document = item.letter.include_document;\n      this.dialog.letter = true;\n    },\n    handleChangeFrequency: function handleChangeFrequency(seller) {\n      this.dialog.switch = true;\n      this.selected.switch = {\n        id: seller.id,\n        frequency: seller.frequency,\n        name: seller.name\n      };\n    },\n    handleGotoEditContacts: function handleGotoEditContacts(seller) {\n      var id = seller.id;\n      this.$router.push({\n        name: 'MWSellerEnforcementContacts',\n        params: {\n          client_id: this.nav.clientId,\n          id: id\n        }\n      });\n    },\n    handleSendMail: function () {\n      var _handleSendMail = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee3(seller) {\n        var histories;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                if (!seller.sender_email) {\n                  _context3.next = 11;\n                  break;\n                }\n\n                this.selected.item = seller;\n                this.selected.send_mail.total_contact = _.size(seller.contacts);\n                this.dialog.send_mail = true;\n                _context3.next = 6;\n                return this.getHistoryDates(seller.id);\n\n              case 6:\n                histories = _context3.sent;\n                this.selected.history_dates = _.map(histories, function (history) {\n                  return moment(history.date_string, 'YYYYMMDD').format('MM-DD-YYYY');\n                });\n\n                if (!_.isEmpty(this.selected.history_dates)) {\n                  this.selected.send_mail.date = this.selected.history_dates[0];\n                } else {\n                  this.selected.send_mail.date = moment().format('MM-DD-YYYY');\n                }\n\n                _context3.next = 12;\n                break;\n\n              case 11:\n                this.dialog.update_sender = true;\n\n              case 12:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this);\n      }));\n\n      function handleSendMail(_x) {\n        return _handleSendMail.apply(this, arguments);\n      }\n\n      return handleSendMail;\n    }(),\n    handleGotoHistories: function handleGotoHistories(seller) {\n      var id = seller.id;\n      this.$router.push({\n        name: 'MWSellerEnforcementHistories',\n        params: {\n          client_id: this.nav.clientId,\n          id: id\n        }\n      });\n    },\n    changeFrequencyMode: function changeFrequencyMode() {\n      var _this$selected$switch = this.selected.switch,\n          id = _this$selected$switch.id,\n          frequency = _this$selected$switch.frequency,\n          name = _this$selected$switch.name;\n      var updatedFrequency = frequency === this.sellerEnforcementFrequencyType.MANUAL ? this.sellerEnforcementFrequencyType.DAILY : this.sellerEnforcementFrequencyType.MANUAL;\n      this.changeFrequency({\n        id: id,\n        frequency: updatedFrequency\n      });\n      this.vToasted('success', \"Seller \".concat(name, \" has been change frequency mode to \").concat(updatedFrequency, \" successfully\"));\n    },\n    removeItem: function () {\n      var _removeItem = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee4() {\n        var id;\n        return regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.prev = 0;\n                id = this.selected.remove.id;\n                _context4.next = 4;\n                return this.removeSeller(id);\n\n              case 4:\n                this.vToasted('success', \"Seller \".concat(this.selected.remove.name, \" has been deleted successfully\"));\n                _context4.next = 10;\n                break;\n\n              case 7:\n                _context4.prev = 7;\n                _context4.t0 = _context4[\"catch\"](0);\n                this.vToasted('error', _context4.t0.data.message);\n\n              case 10:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4, this, [[0, 7]]);\n      }));\n\n      function removeItem() {\n        return _removeItem.apply(this, arguments);\n      }\n\n      return removeItem;\n    }()\n  })\n};",{"version":3,"sources":["Content.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsOA,SAAA,UAAA,EAAA,UAAA,QAAA,MAAA;AACA,OAAA,QAAA,MAAA,uBAAA;AACA,OAAA,KAAA,IAAA,MAAA,kBAAA;AACA,OAAA,CAAA,MAAA,QAAA;AACA,OAAA,IAAA,MAAA,QAAA;AACA,SAAA,8BAAA,QAAA,+BAAA;AACA,SAAA,SAAA,QAAA,aAAA;AACA,OAAA,OAAA,MAAA,YAAA;AACA,OAAA,MAAA,MAAA,QAAA;AACA,OAAA,cAAA,MAAA,oCAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,SADA;AAEA,EAAA,YAAA,EAAA,KAFA;AAGA,EAAA,MAAA,EAAA,CAAA,QAAA,CAHA;AAIA,EAAA,KAAA,EAAA;AACA,IAAA,OAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KADA;AAKA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA,KALA;AASA,IAAA,OAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA,KATA;AAaA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAbA;AAiBA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAjBA;AAqBA,IAAA,KAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA,KArBA;AAyBA,IAAA,SAAA,EAAA;AACA,MAAA,IAAA,EAAA,CAAA,KAAA,EAAA,QAAA,CADA;AAEA,MAAA,OAAA,EAAA;AAAA,eAAA,EAAA;AAAA;AAFA,KAzBA;AA6BA,IAAA,MAAA,EAAA;AACA,MAAA,IAAA,EAAA,CAAA,KAAA,EAAA,MAAA,CADA;AAEA,MAAA,OAAA,EAAA;AAAA,eAAA,EAAA;AAAA;AAFA,KA7BA;AAiCA,IAAA,IAAA,EAAA;AACA,MAAA,IAAA,EAAA,OADA;AAEA,MAAA,OAAA,EAAA;AAFA,KAjCA;AAqCA,IAAA,SAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,OAAA,EAAA;AAFA,KArCA;AAyCA,IAAA,gBAAA,EAAA;AACA,MAAA,IAAA,EAAA,CAAA,QAAA;AADA,KAzCA;AA4CA,IAAA,wBAAA,EAAA;AACA,MAAA,IAAA,EAAA;AADA;AA5CA,GAJA;AAoDA,EAAA,IAAA,EAAA,gBAAA;AACA,WAAA;AACA,MAAA,8BAAA,EAAA,CAAA,CAAA,SAAA,CAAA,8BAAA,CADA;AAEA,MAAA,MAAA,EAAA;AACA,QAAA,MAAA,EAAA,KADA;AAEA,QAAA,MAAA,EAAA,KAFA;AAGA,QAAA,MAAA,EAAA,KAHA;AAIA,QAAA,aAAA,EAAA,KAJA;AAKA,QAAA,SAAA,EAAA;AALA,OAFA;AASA,MAAA,QAAA,EAAA;AACA,QAAA,MAAA,EAAA,IADA;AAEA,QAAA,MAAA,EAAA,IAFA;AAGA,QAAA,IAAA,EAAA,IAHA;AAIA,QAAA,aAAA,EAAA,EAJA;AAKA,QAAA,SAAA,EAAA;AACA,UAAA,aAAA,EAAA,CADA;AAEA,UAAA,IAAA,EAAA;AAFA,SALA;AASA,QAAA,MAAA,EAAA;AACA,UAAA,IAAA,EAAA,EADA;AAEA,UAAA,gBAAA,EAAA;AAFA;AATA,OATA;AAuBA,MAAA,sBAAA,EAAA,CACA,CAAA;AAAA,gBAAA;AAAA,OAAA,CADA,EAEA,CAAA;AAAA,kBAAA,CAAA,KAAA,EAAA,CAAA,EAAA,CAAA,EAAA,CAAA,EAAA,CAAA,EAAA,CAAA,EAAA,CAAA;AAAA,OAAA,CAFA,EAGA,CAAA;AAAA,gBAAA,CAAA,OAAA,EAAA,KAAA,EAAA,OAAA,EAAA,MAAA;AAAA,OAAA,CAHA,EAIA,CAAA,MAAA,EAAA,QAAA,EAAA,WAAA,CAJA,EAKA,CAAA;AAAA,iBAAA;AAAA,OAAA,EAAA;AAAA,iBAAA;AAAA,OAAA,EAAA;AAAA,iBAAA;AAAA,OAAA,EAAA;AAAA,iBAAA;AAAA,OAAA,CALA,EAMA,CAAA;AAAA,kBAAA;AAAA,OAAA,EAAA;AAAA,kBAAA;AAAA,OAAA,CANA,EAOA,CAAA;AAAA,gBAAA;AAAA,OAAA,EAAA;AAAA,gBAAA;AAAA,OAAA,CAPA,EAQA,CAAA;AAAA,kBAAA;AAAA,OAAA,EAAA;AAAA,kBAAA;AAAA,OAAA,CARA,EASA,CAAA;AAAA,kBAAA;AAAA,OAAA,EAAA;AAAA,kBAAA;AAAA,OAAA,CATA,EAUA,CAAA;AAAA,iBAAA;AAAA,OAAA,EAAA;AAAA,sBAAA;AAAA,OAAA,CAVA,EAWA,CAAA,MAAA,EAAA,SAAA,CAXA,EAYA,CAAA;AAAA,qBAAA;AAAA,OAAA,CAZA,EAaA,CAAA,OAAA,CAbA,CAvBA;AAsCA,MAAA,oBAAA,EAAA,oCACA,6GADA,GAEA,sCAFA,GAGA,iBAHA,GAIA,yBA1CA;AA2CA,MAAA,GAAA,EAAA;AA3CA,KAAA;AA6CA,GAlGA;AAmGA,EAAA,QAAA,kCACA,UAAA,CAAA;AACA,IAAA,cAAA,eAAA,IAAA,CAAA,eAAA,CADA;AAEA,IAAA,aAAA,kCAAA,IAAA,CAAA,qCAAA,CAFA;AAGA,IAAA,WAAA,kCAAA,IAAA,CAAA,2BAAA;AAHA,GAAA,CADA;AAMA,IAAA,MAAA,EAAA,kBAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,KAAA,aAAA;AACA,aAAA,kBAAA,KAAA,aAAA,KAAA,EAAA;AACA,KATA;AAUA,IAAA,QAAA,EAAA,oBAAA;AACA,aAAA,KAAA,WAAA,CAAA,KAAA;AACA,KAZA;AAaA,IAAA,QAAA,EAAA,oBAAA;AACA,UAAA,MAAA,GAAA,IAAA,CAAA,MAAA;AACA,aAAA,MAAA;AACA;AAhBA,IAnGA;AAqHA,EAAA,UAAA,EAAA;AACA,IAAA,SAAA,EAAA,SADA;AAEA,IAAA,OAAA,EAAA,OAFA;AAGA,IAAA,cAAA,EAAA;AAHA,GArHA;AA0HA,EAAA,OAAA,kCACA,UAAA,CAAA;AACA,IAAA,YAAA,kCAAA,IAAA,CAAA,yBAAA,CADA;AAEA,IAAA,eAAA,kCAAA,IAAA,CAAA,mCAAA,CAFA;AAGA,IAAA,gBAAA,kCAAA,IAAA,CAAA,8BAAA,CAHA;AAIA,IAAA,cAAA,kCAAA,IAAA,CAAA,0CAAA,CAJA;AAKA,IAAA,eAAA,kCAAA,IAAA,CAAA,oCAAA;AALA,GAAA,CADA;AAQA,IAAA,YARA,0BAQA;AACA,WAAA,KAAA,CAAA,cAAA,EAAA,KAAA,MAAA;AACA,KAVA;AAWA,IAAA,cAXA,0BAWA,MAXA,EAWA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AAAA,QAAA,IAAA,EAAA,0BAAA;AAAA,QAAA,MAAA,EAAA;AAAA,UAAA,SAAA,EAAA,KAAA,GAAA,CAAA,QAAA;AAAA,UAAA,EAAA,EAAA,MAAA,CAAA;AAAA,SAAA;AAAA,QAAA,KAAA,EAAA;AAAA,UAAA,MAAA,EAAA;AAAA;AAAA,OAAA;AACA,KAbA;AAcA,IAAA,oBAdA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,sCAeA,KAAA,QAAA,CAAA,IAfA,EAeA,EAfA,uBAeA,EAfA,EAeA,QAfA,uBAeA,QAfA,EAeA,IAfA,uBAeA,IAfA;;AAAA,qBAgBA,CAAA,CAAA,OAAA,CAAA,QAAA,CAhBA;AAAA;AAAA;AAAA;;AAAA,iDAiBA,KAAA,QAAA,CAAA,OAAA,YAAA,IAAA,qCAjBA;;AAAA;AAAA;AAAA;AAAA,uBAoBA,KAAA,cAAA,CAAA;AAAA,kBAAA,EAAA,EAAA,EAAA;AAAA,kBAAA,IAAA,EAAA,KAAA,QAAA,CAAA,SAAA,CAAA;AAAA,iBAAA,CApBA;;AAAA;AAqBA,qBAAA,QAAA,CAAA,SAAA,YAAA,IAAA,qCAAA,KAAA,QAAA,CAAA,SAAA,CAAA,IAAA;AACA,qBAAA,MAAA,CAAA,SAAA,GAAA,KAAA;AAtBA;AAAA;;AAAA;AAAA;AAAA;AAwBA,qBAAA,QAAA,CAAA,OAAA,EAAA,YAAA,OAAA;;AAxBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AA2BA,IAAA,gBA3BA,4BA2BA,IA3BA,EA2BA;AACA,WAAA,MAAA,CAAA,MAAA,GAAA,IAAA;AACA,WAAA,QAAA,CAAA,MAAA,GAAA;AACA,QAAA,EAAA,EAAA,IAAA,CAAA,EADA;AAEA,QAAA,IAAA,EAAA,IAAA,CAAA;AAFA,OAAA;AAIA,KAjCA;AAkCA,IAAA,kBAlCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAoCA,gBAAA,IApCA,GAoCA,KAAA,QAAA,CAAA,IApCA,CAoCA,IApCA;AAqCA,gBAAA,EArCA,GAqCA,KAAA,QAAA,CAAA,IArCA,CAqCA,EArCA;AAAA;AAAA,uBAsCA,KAAA,gBAAA,CAAA;AAAA,kBAAA,MAAA,EAAA;AAAA,oBAAA,MAAA,EAAA,KAAA,QAAA,CAAA;AAAA,mBAAA;AAAA,kBAAA,EAAA,EAAA;AAAA,iBAAA,CAtCA;;AAAA;AAuCA,qBAAA,QAAA,CAAA,SAAA,6BAAA,IAAA;AACA,qBAAA,YAAA;AACA,qBAAA,MAAA,CAAA,MAAA,GAAA,KAAA;AAzCA;AAAA;;AAAA;AAAA;AAAA;AA2CA,qBAAA,QAAA,CAAA,OAAA,EAAA,aAAA,IAAA,CAAA,OAAA;;AA3CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AA8CA,IAAA,gBA9CA,4BA8CA,IA9CA,EA8CA;AACA,WAAA,QAAA,CAAA,IAAA,GAAA,IAAA;;AACA,UAAA,CAAA,CAAA,CAAA,OAAA,CAAA,IAAA,CAAA,MAAA,CAAA,IAAA,CAAA,EAAA;AACA,aAAA,QAAA,CAAA,MAAA,CAAA,IAAA,GAAA,IAAA,CAAA,MAAA,CAAA,IAAA;AACA,OAFA,MAEA;AACA,aAAA,QAAA,CAAA,MAAA,CAAA,IAAA,GAAA,KAAA,oBAAA;AACA;;AACA,WAAA,QAAA,CAAA,MAAA,CAAA,gBAAA,GAAA,IAAA,CAAA,MAAA,CAAA,gBAAA;AACA,WAAA,MAAA,CAAA,MAAA,GAAA,IAAA;AACA,KAvDA;AAwDA,IAAA,qBAxDA,iCAwDA,MAxDA,EAwDA;AACA,WAAA,MAAA,CAAA,MAAA,GAAA,IAAA;AACA,WAAA,QAAA,CAAA,MAAA,GAAA;AACA,QAAA,EAAA,EAAA,MAAA,CAAA,EADA;AAEA,QAAA,SAAA,EAAA,MAAA,CAAA,SAFA;AAGA,QAAA,IAAA,EAAA,MAAA,CAAA;AAHA,OAAA;AAKA,KA/DA;AAgEA,IAAA,sBAhEA,kCAgEA,MAhEA,EAgEA;AACA,UAAA,EAAA,GAAA,MAAA,CAAA,EAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AAAA,QAAA,IAAA,EAAA,6BAAA;AAAA,QAAA,MAAA,EAAA;AAAA,UAAA,SAAA,EAAA,KAAA,GAAA,CAAA,QAAA;AAAA,UAAA,EAAA,EAAA;AAAA;AAAA,OAAA;AACA,KAnEA;AAoEA,IAAA,cApEA;AAAA,sGAoEA,MApEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAqEA,MAAA,CAAA,YArEA;AAAA;AAAA;AAAA;;AAsEA,qBAAA,QAAA,CAAA,IAAA,GAAA,MAAA;AACA,qBAAA,QAAA,CAAA,SAAA,CAAA,aAAA,GAAA,CAAA,CAAA,IAAA,CAAA,MAAA,CAAA,QAAA,CAAA;AACA,qBAAA,MAAA,CAAA,SAAA,GAAA,IAAA;AAxEA;AAAA,uBAyEA,KAAA,eAAA,CAAA,MAAA,CAAA,EAAA,CAzEA;;AAAA;AAyEA,gBAAA,SAzEA;AA0EA,qBAAA,QAAA,CAAA,aAAA,GAAA,CAAA,CAAA,GAAA,CAAA,SAAA,EAAA,UAAA,OAAA;AAAA,yBAAA,MAAA,CAAA,OAAA,CAAA,WAAA,EAAA,UAAA,CAAA,CAAA,MAAA,CAAA,YAAA,CAAA;AAAA,iBAAA,CAAA;;AACA,oBAAA,CAAA,CAAA,CAAA,OAAA,CAAA,KAAA,QAAA,CAAA,aAAA,CAAA,EAAA;AACA,uBAAA,QAAA,CAAA,SAAA,CAAA,IAAA,GAAA,KAAA,QAAA,CAAA,aAAA,CAAA,CAAA,CAAA;AACA,iBAFA,MAEA;AACA,uBAAA,QAAA,CAAA,SAAA,CAAA,IAAA,GAAA,MAAA,GAAA,MAAA,CAAA,YAAA,CAAA;AACA;;AA/EA;AAAA;;AAAA;AAiFA,qBAAA,MAAA,CAAA,aAAA,GAAA,IAAA;;AAjFA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAoFA,IAAA,mBApFA,+BAoFA,MApFA,EAoFA;AACA,UAAA,EAAA,GAAA,MAAA,CAAA,EAAA;AACA,WAAA,OAAA,CAAA,IAAA,CAAA;AAAA,QAAA,IAAA,EAAA,8BAAA;AAAA,QAAA,MAAA,EAAA;AAAA,UAAA,SAAA,EAAA,KAAA,GAAA,CAAA,QAAA;AAAA,UAAA,EAAA,EAAA;AAAA;AAAA,OAAA;AACA,KAvFA;AAwFA,IAAA,mBAxFA,iCAwFA;AACA,kCAAA,KAAA,QAAA,CAAA,MAAA;AAAA,UAAA,EAAA,yBAAA,EAAA;AAAA,UAAA,SAAA,yBAAA,SAAA;AAAA,UAAA,IAAA,yBAAA,IAAA;AACA,UAAA,gBAAA,GAAA,SAAA,KAAA,KAAA,8BAAA,CAAA,MAAA,GAAA,KAAA,8BAAA,CAAA,KAAA,GAAA,KAAA,8BAAA,CAAA,MAAA;AACA,WAAA,eAAA,CAAA;AAAA,QAAA,EAAA,EAAA,EAAA;AAAA,QAAA,SAAA,EAAA;AAAA,OAAA;AACA,WAAA,QAAA,CAAA,SAAA,mBAAA,IAAA,gDAAA,gBAAA;AACA,KA7FA;AA8FA,IAAA,UA9FA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAgGA,gBAAA,EAhGA,GAgGA,KAAA,QAAA,CAAA,MAAA,CAAA,EAhGA;AAAA;AAAA,uBAiGA,KAAA,YAAA,CAAA,EAAA,CAjGA;;AAAA;AAkGA,qBAAA,QAAA,CAAA,SAAA,mBAAA,KAAA,QAAA,CAAA,MAAA,CAAA,IAAA;AAlGA;AAAA;;AAAA;AAAA;AAAA;AAoGA,qBAAA,QAAA,CAAA,OAAA,EAAA,aAAA,IAAA,CAAA,OAAA;;AApGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AA1HA,CAAA","sourcesContent":["<template>\r\n  <b-card :header=\"caption\" v-if=\"getPermissions.permissions\">\r\n    <template v-slot:header>\r\n      <p class=\"po-list-title my-0 pull-left align-middle map-list-title\">\r\n        <strong><i class=\"fa fa-user-circle-o\"></i>\r\n        {{ caption }}</strong>\r\n      </p>\r\n      <div v-if=\"getPermissions.module_enabled && getPermissions.permissions.seview && getPermissions.permissions.secreate\" class=\"pull-right align-middle\">\r\n        <b-button-group>\r\n          <router-link :to=\"{ name: 'MWAddSellerEnforcements', params: { client_id: nav.clientId } }\" tag=\"button\" class=\"btn btn-primary btn-sm\">\r\n            <i class=\"icons icon-plus\"></i> Add\r\n          </router-link>\r\n        </b-button-group>\r\n      </div>\r\n    </template>\r\n    <b-row>\r\n      <b-col md=\"4\" offset-md=\"4\" class=\"my-0 mb-4\">\r\n        <b-form-group class=\"mb-0\" v-if=\"getPermissions.permissions.seview\">\r\n          <b-input-group class=\"search cancel-action\">\r\n            <b-form-input\r\n                    placeholder=\"Enter seller name\"\r\n                    ref=\"inputSearch\"\r\n                    v-model.trim=\"params.s\"\r\n                    @keyup.enter=\"\r\n                params.page = 1\r\n                paramsChange()\r\n              \"\r\n            ></b-form-input>\r\n            <i\r\n                    v-show=\"params.s\"\r\n                    @click=\"\r\n                params.s = ''\r\n                params.page = 1\r\n                paramsChange()\r\n              \"\r\n                    class=\"icon-close cancel-icon\"\r\n            ></i>\r\n            <b-input-group-append>\r\n              <b-button\r\n                      @click=\"\r\n                  params.page = 1\r\n                  paramsChange()\r\n                \"\r\n              >\r\n                <i class=\"icons icon-magnifier\"></i>\r\n              </b-button>\r\n            </b-input-group-append>\r\n          </b-input-group>\r\n        </b-form-group>\r\n      </b-col>\r\n    </b-row>\r\n    <b-table\r\n      :dark=\"dark\"\r\n      :hover=\"hover\"\r\n      striped\r\n      :small=\"small\"\r\n      outlined\r\n      responsive=\"sm\"\r\n      thead-class=\"thead-light text-nowrap\"\r\n      :items=\"getItems\"\r\n      :fields=\"captions\"\r\n      show-empty\r\n      class=\"overflow-auto\"\r\n      :class=\"'text-left'\"\r\n    >\r\n      <template v-slot:empty>\r\n        <LoadingSpinner :isLoading=\"sellerEnforcementLoading\" v-if=\"sellerEnforcementLoading\"/>\r\n        <div class=\"align-middle d-flex justify-content-center align-items-center\" v-else>No Sellers</div>\r\n      </template>\r\n      <template v-slot:cell(name)=\"data\">\r\n        <div>\r\n          {{ data.item.name }}\r\n        </div>\r\n      </template>\r\n      <template v-slot:cell(letter)=\"data\">\r\n        <button class=\"btn btn-primary btn-sm\" @click=\"handleEditLetter(data.item)\" :disabled=\"!getPermissions.module_enabled || !getPermissions.permissions.seedit\"><i class=\"fa fa-envelope\" aria-hidden=\"true\"></i><span class=\"ml-1\">Edit</span></button>\r\n      </template>\r\n      <template v-slot:cell(log)=\"data\">\r\n        <button v-if=\"getPermissions.module_enabled && getPermissions.permissions.seview\" class=\"btn btn-primary btn-sm\" @click=\"handleGotoHistories(data.item)\"><i class=\"fa fa-history\" aria-hidden=\"true\"></i><span class=\"ml-1\">View</span></button>\r\n      </template>\r\n      <template v-slot:cell(frequency)=\"data\">\r\n        <button v-if=\"getPermissions.module_enabled && getPermissions.permissions.seview && data.item.frequency === 'daily'\" @click=\"handleChangeFrequency(data.item)\" class=\"btn btn-primary btn-sm\" :disabled=\"!getPermissions.permissions.seedit\">Daily</button>\r\n        <button v-if=\"getPermissions.module_enabled && getPermissions.permissions.seview && data.item.frequency === 'manual'\" class=\"btn bg-secondary btn-sm\" @click=\"handleChangeFrequency(data.item)\" :disabled=\"!getPermissions.permissions.seedit\">Manual</button>\r\n        <a href=\"javascript:void(0);\" v-if=\"getPermissions.module_enabled && getPermissions.permissions.seview\" @click=\"handleSendMail(data.item)\" :class=\"{'disabled-icon': !getPermissions.permissions.sesend}\"><i class=\"fa fa-paper-plane pl-1\"></i></a>\r\n      </template>\r\n      <template v-slot:cell(sender)=\"data\">\r\n        <div v-if=\"data.item.sender_name || data.item.sender_email\" class=\"text-truncate\" :id=\"`sender-${data.item.name}`\">\r\n          <strong v-if=\"data.item.sender_name\">{{ data.item.sender_name }} </strong>\r\n          <span v-if=\"data.item.sender_email\">&lt;{{ data.item.sender_email }}&gt;</span>\r\n        </div>\r\n        <div v-else>\r\n          <b-badge variant=\"secondary\">empty</b-badge>\r\n        </div>\r\n        <b-popover\r\n          :target=\"`sender-${data.item.name}`\"\r\n          triggers=\"hover\"\r\n          placement=\"top\"\r\n          v-if=\"data.item.sender_email\"\r\n        >\r\n          <template v-slot:title>Email</template>\r\n          <div>\r\n            <a href=\"javascript:void(0);\"><i class=\"fa fa-envelope\" /></a>\r\n            {{ data.item.sender_email }}\r\n          </div>\r\n        </b-popover>\r\n      </template>\r\n      <template v-slot:cell(contacts)=\"data\">\r\n        <button v-if=\"getPermissions.module_enabled && getPermissions.permissions.seview\" @click=\"handleGotoEditContacts(data.item)\" class=\"btn btn-primary btn-sm text-nowrap\">({{data.item.contacts.length}}) <i class=\"fa fa-user-o\" aria-hidden=\"true\"></i><span class=\"ml-1\">View</span></button>\r\n      </template>\r\n      <template v-slot:cell(actions)=\"data\">\r\n        <!-- <b-dropdown variant=\"primary\" class=\"mr-1 small-dropdown\" size=\"sm\"\r\n          :disabled=\"!getPermissions.module_enabled || (!getPermissions.permissions.seedit && !getPermissions.permissions.sedelete)\">\r\n          <template v-slot:button-content>\r\n            <i class=\"icon-settings\"></i> Manage\r\n          </template>\r\n          <b-dropdown-item-button\r\n            v-if=\"getPermissions.permissions.seedit\"\r\n            @click=\"handleEditItem(data.item)\"\r\n          >\r\n            <i class=\"icon-note text-primary\"></i> Edit\r\n          </b-dropdown-item-button>\r\n          <b-dropdown-divider></b-dropdown-divider>\r\n          <b-dropdown-item-button\r\n            v-if=\"getPermissions.permissions.sedelete\"\r\n            @click=\"handleRemoveItem(data.item)\"\r\n          >\r\n            <i class=\"icon-close text-danger\"></i> Delete\r\n          </b-dropdown-item-button>\r\n        </b-dropdown> -->\r\n        <b-dropdown v-if=\"getPermissions.permissions.seedit\" variant=\"primary\" size=\"sm\" split text=\"Edit\" @click=\"handleEditItem(data.item)\" class=\"drp-actions\" :disabled=\"!getPermissions.module_enabled || (!getPermissions.permissions.seedit && !getPermissions.permissions.sedelete)\">\r\n          <b-dropdown-item v-if=\"getPermissions.permissions.sedelete\" variant=\"danger\" @click=\"handleRemoveItem(data.item)\">\r\n            <i class=\"icon-trash cls-icon-trash\"></i>Remove\r\n          </b-dropdown-item>\r\n        </b-dropdown>\r\n      </template>\r\n    </b-table>\r\n    <b-modal hide-footer size=\"lg\" title=\"Edit Email Template\" centered v-model=\"dialog.letter\" ok-variant=\"danger\">\r\n      <b-row>\r\n        <b-col md=\"2\">\r\n          <div>Send To </div>\r\n        </b-col>\r\n        <b-col md=\"10\" >\r\n          <b-col class=\"border\" v-if=\"selected.item && selected.item.contacts && selected.item.contacts.length > 0\">\r\n            <ul>\r\n              <li v-for=\"(item, _i) in selected.item.contacts\" v-bind:key=\"_i\">\r\n                {{item.contact_name}} &lt;{{item.email}}&gt; <div class=\"d-inline mr-1\" v-if=\"_i < (selected.item.contacts.length - 1)\">, </div>\r\n              </li>\r\n            </ul>\r\n          </b-col>\r\n        </b-col>\r\n      </b-row>\r\n      <br>\r\n      <b-row>\r\n        <b-col md=\"2\">\r\n          <div>Email Body </div>\r\n        </b-col>\r\n        <b-col md=\"10\">\r\n          <vue-editor :editorToolbar=\"vueEditorCustomToolbar\" v-model=\"selected.letter.body\"></vue-editor>\r\n        </b-col>\r\n      </b-row>\r\n      <b-row class=\"mt-3\">\r\n        <b-col md=\"2\">\r\n        </b-col>\r\n        <b-col md=\"5\">\r\n          <b-form-checkbox v-model=\"selected.letter.include_document\" class=\"mb-2 basicText font-weight-bold\" switch>Include MAP Pricing Policy Document</b-form-checkbox>\r\n        </b-col>\r\n        <b-col md=\"5\" class=\"text-right\">\r\n          <b-button variant=\"warning\" @click=\"handleUpdateLetter()\"> <i class=\"icon-check\"></i> Save</b-button>\r\n        </b-col>\r\n      </b-row>\r\n    </b-modal>\r\n    <b-modal title=\"Please confirm\" centered v-model=\"dialog.switch\" @ok=\"changeFrequencyMode()\" ok-variant=\"danger\">\r\n      Are you sure you want to change Frequency Mode of this seller?\r\n      <template v-slot:modal-footer=\"{ ok, cancel }\">\r\n        <b-button variant=\"warning\" @click=\"ok()\"> <i class=\"icon-check\"></i> Yes, I understand &amp; confirm! </b-button>\r\n        <b-button variant @click=\"cancel()\"> <i class=\"icon-close\"></i> No </b-button>\r\n      </template>\r\n    </b-modal>\r\n    <b-modal title=\"Please confirm\" centered v-model=\"dialog.remove\" @ok=\"removeItem()\" ok-variant=\"danger\">\r\n      Are you sure you want to delete this seller?\r\n      <template v-slot:modal-footer=\"{ ok, cancel }\">\r\n        <b-button variant=\"warning\" @click=\"ok()\"> <i class=\"icon-check\"></i> Yes, I understand &amp; confirm! </b-button>\r\n        <b-button variant @click=\"cancel()\"> <i class=\"icon-close\"></i> No </b-button>\r\n      </template>\r\n    </b-modal>\r\n    <b-modal hide-header centered v-model=\"dialog.update_sender\">\r\n      <strong class=\"d-block my-2\">Please update sender first to send the email.</strong>\r\n      <template v-slot:modal-footer=\"{ cancel }\">\r\n        <b-button variant=\"primary\" @click=\"cancel()\"> <i class=\"icon-check\"></i> OK </b-button>\r\n      </template>\r\n    </b-modal>\r\n    <b-modal title=\"Please confirm\" centered v-model=\"dialog.send_mail\" @ok=\"handleManualSendMail()\" ok-variant=\"danger\">\r\n      Are you sure you want to send violation report to this contact list:\r\n      <div v-if=\"selected.item && selected.item.contacts\" class=\"overflow-hidden\">\r\n        <div v-for=\"(item, index) in selected.item.contacts\" v-bind:key=\"index\"  class=\"float-left\" :class=\"index > 0 ? 'ml-1' : ''\">\r\n          {{item.contact_name}} &lt;{{item.email}}&gt;<span v-if=\"index < (selected.send_mail.total_contact - 1)\">, </span></div>\r\n      </div>\r\n      <p v-if=\"selected.item\" class=\"d-block mt-2 mb-0\">With the sender is:&nbsp;\r\n        <strong>{{ selected.item.sender_name || 'Channel Precision' }}</strong>\r\n        <strong>&nbsp;&lt;{{ selected.item.sender_email }}&gt;</strong>\r\n      </p>\r\n      <p v-if=\"selected.item\">Violation date:\r\n        <v-select class=\"w-50 ml-2 mt-2 d-inline-block\" :clearable=\"false\" v-model=\"selected.send_mail.date\" :options=\"selected.history_dates\">\r\n          <span slot=\"no-options\">No violation date.</span>\r\n        </v-select>\r\n      </p>\r\n      <template v-slot:modal-footer=\"{ ok, cancel }\">\r\n        <b-button variant=\"warning\" @click=\"ok()\"> <i class=\"icon-check\"></i> Yes, I understand &amp; confirm! </b-button>\r\n        <b-button variant @click=\"cancel()\"> <i class=\"icon-close\"></i> No </b-button>\r\n      </template>\r\n    </b-modal>\r\n    <nav\r\n      class=\"d-flex justify-content-center\"\r\n      v-if=\"listSellers.total > listSellers.page_size && listSellers.items.length > 0\"\r\n    >\r\n      <b-pagination\r\n              :total-rows=\"listSellers.total\"\r\n              :per-page=\"params.limit\"\r\n              v-model=\"params.page\"\r\n              prev-text=\"Prev\"\r\n              next-text=\"Next\"\r\n              hide-goto-end-buttons\r\n              @change=\"params.page = $event, paramsChange()\"\r\n              hide-ellipsis\r\n      />\r\n    </nav>\r\n  </b-card>\r\n</template>\r\n\r\n<script>\r\nimport { mapGetters, mapActions } from 'vuex'\r\nimport vToasted from '@/shared/notification'\r\nimport * as TYPE from '@/actionTypes.js'\r\nimport _ from 'lodash'\r\nimport _nav from '@/_nav'\r\nimport { SellerEnforcementFrequencyType } from '@/constants/SellerEnforcement'\r\nimport { VueEditor } from 'vue2-editor'\r\nimport vSelect from 'vue-select'\r\nimport moment from 'moment'\r\nimport LoadingSpinner from '@/components/common/LoadingSpinner'\r\n\r\nexport default {\r\n  name: 'c-table',\r\n  inheritAttrs: false,\r\n  mixins: [vToasted],\r\n  props: {\r\n    caption: {\r\n      type: String,\r\n      default: 'Table'\r\n    },\r\n    hover: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    striped: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    bordered: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    small: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    fixed: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    tableData: {\r\n      type: [Array, Function],\r\n      default: () => []\r\n    },\r\n    fields: {\r\n      type: [Array, Object],\r\n      default: () => []\r\n    },\r\n    dark: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    totalRows: {\r\n      type: Number,\r\n      default: 0\r\n    },\r\n    handleChangePage: {\r\n      type: [Function]\r\n    },\r\n    sellerEnforcementLoading: {\r\n      type: Boolean\r\n    }\r\n  },\r\n  data: () => {\r\n    return {\r\n      sellerEnforcementFrequencyType: _.cloneDeep(SellerEnforcementFrequencyType),\r\n      dialog: {\r\n        remove: false,\r\n        letter: false,\r\n        switch: false,\r\n        update_sender: false,\r\n        send_mail: false\r\n      },\r\n      selected: {\r\n        remove: null,\r\n        switch: null,\r\n        item: null,\r\n        history_dates: [],\r\n        send_mail: {\r\n          total_contact: 0,\r\n          date: null\r\n        },\r\n        letter: {\r\n          body: {},\r\n          include_document: false\r\n        }\r\n      },\r\n      vueEditorCustomToolbar: [\r\n        [ { 'font': [] } ],\r\n        [{ 'header': [ false, 1, 2, 3, 4, 5, 6 ] }],\r\n        [{ 'size': ['small', false, 'large', 'huge'] }],\r\n        ['bold', 'italic', 'underline'],\r\n        [{'align': ''}, {'align': 'center'}, {'align': 'right'}, {'align': 'justify'}],\r\n        [{ 'header': 1 }, { 'header': 2 }],\r\n        [{'list': 'ordered'}, { 'list': 'bullet' }],\r\n        [{'script': 'sub'}, { 'script': 'super' }],\r\n        [{'indent': '-1'}, { 'indent': '+1' }],\r\n        [{ 'color': [] }, { 'background': [] }],\r\n        ['link', 'formula'],\r\n        [{ 'direction': 'rtl' }],\r\n        ['clean']\r\n      ],\r\n      defaultLetterContent: '<p>Dear {{ contact-name }},</p>' +\r\n              '<p>We would like to inform that you have violation .Total number of violation is {{ violation-count }}.</p>' +\r\n              '<p>Please see the attached file.</p>' +\r\n              '<p>Regards,</p>' +\r\n              '<p>Investigate Team</p>',\r\n      nav: _nav\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters({\r\n      getPermissions: `mw/${TYPE.GET_PERMISSIONS}`,\r\n      defaultParams: `mw/sellerEnforcements/${TYPE.GET_DEFAULT_SELLER_ENFORCEMENT_PARAMS}`,\r\n      listSellers: `mw/sellerEnforcements/${TYPE.GET_LIST_SELLER_ENFORCEMENT}`\r\n    }),\r\n    params: function() {\r\n      console.log(this.defaultParams)\r\n      return { ...this.defaultParams } || {}\r\n    },\r\n    getItems: function() {\r\n      return this.listSellers.items\r\n    },\r\n    captions: function() {\r\n      const { fields } = this\r\n      return fields\r\n    }\r\n  },\r\n  components: {\r\n    VueEditor,\r\n    vSelect,\r\n    LoadingSpinner\r\n  },\r\n  methods: {\r\n    ...mapActions({\r\n      removeSeller: `mw/sellerEnforcements/${TYPE.REMOVE_SELLER_ENFORCEMENT}`,\r\n      changeFrequency: `mw/sellerEnforcements/${TYPE.CHANGE_FREQUENCY_SELLER_ENFORCEMENT}`,\r\n      remoteEditSeller: `mw/sellerEnforcements/${TYPE.REMOTE_EDIT_SELLER_ENFORCEMENT}`,\r\n      manualSendMail: `mw/sellerEnforcements/${TYPE.REMOTE_MANUAL_SEND_MAIL_SELLER_ENFORCEMENT}`,\r\n      getHistoryDates: `mw/sellerEnforcements/${TYPE.GET_SELLER_ENFORCEMENT_HISTORY_DATES}`\r\n    }),\r\n    paramsChange() {\r\n      this.$emit('paramsChange', this.params)\r\n    },\r\n    handleEditItem(seller) {\r\n      this.$router.push({ name: 'MWEditSellerEnforcements', params: { client_id: this.nav.clientId, id: seller.id }, query: { seller: seller } })\r\n    },\r\n    async handleManualSendMail() {\r\n      const { id, contacts, name } = this.selected.item\r\n      if (_.isEmpty(contacts)) {\r\n        return this.vToasted('error', `${name} seller has empty contact list.`)\r\n      }\r\n      try {\r\n        await this.manualSendMail({ id: id, date: this.selected.send_mail.date })\r\n        this.vToasted('success', `${name} seller's violations on ${this.selected.send_mail.date} have been successfully sent to all contacts.`)\r\n        this.dialog.send_mail = false\r\n      } catch (e) {\r\n        this.vToasted('error', e.message)\r\n      }\r\n    },\r\n    handleRemoveItem(item) {\r\n      this.dialog.remove = true\r\n      this.selected.remove = {\r\n        id: item.id,\r\n        name: item.name\r\n      }\r\n    },\r\n    async handleUpdateLetter() {\r\n      try {\r\n        const { name } = this.selected.item\r\n        const { id } = this.selected.item\r\n        await this.remoteEditSeller({ params: { letter: this.selected.letter }, id })\r\n        this.vToasted('success', `Letter of seller ${name} has been updated successfully.`)\r\n        this.paramsChange()\r\n        this.dialog.letter = false\r\n      } catch (error) {\r\n        this.vToasted('error', error.data.message)\r\n      }\r\n    },\r\n    handleEditLetter(item) {\r\n      this.selected.item = item\r\n      if (!_.isEmpty(item.letter.body)) {\r\n        this.selected.letter.body = item.letter.body\r\n      } else {\r\n        this.selected.letter.body = this.defaultLetterContent\r\n      }\r\n      this.selected.letter.include_document = item.letter.include_document\r\n      this.dialog.letter = true\r\n    },\r\n    handleChangeFrequency(seller) {\r\n      this.dialog.switch = true\r\n      this.selected.switch = {\r\n        id: seller.id,\r\n        frequency: seller.frequency,\r\n        name: seller.name\r\n      }\r\n    },\r\n    handleGotoEditContacts(seller) {\r\n      const { id } = seller\r\n      this.$router.push({ name: 'MWSellerEnforcementContacts', params: { client_id: this.nav.clientId, id: id } })\r\n    },\r\n    async handleSendMail(seller) {\r\n      if (seller.sender_email) {\r\n        this.selected.item = seller\r\n        this.selected.send_mail.total_contact = _.size(seller.contacts)\r\n        this.dialog.send_mail = true\r\n        const histories = await this.getHistoryDates(seller.id)\r\n        this.selected.history_dates = _.map(histories, (history) => moment(history.date_string, 'YYYYMMDD').format('MM-DD-YYYY'))\r\n        if (!_.isEmpty(this.selected.history_dates)) {\r\n          this.selected.send_mail.date = this.selected.history_dates[0]\r\n        } else {\r\n          this.selected.send_mail.date = moment().format('MM-DD-YYYY')\r\n        }\r\n      } else {\r\n        this.dialog.update_sender = true\r\n      }\r\n    },\r\n    handleGotoHistories(seller) {\r\n      const { id } = seller\r\n      this.$router.push({ name: 'MWSellerEnforcementHistories', params: { client_id: this.nav.clientId, id: id } })\r\n    },\r\n    changeFrequencyMode() {\r\n      const { id, frequency, name } = this.selected.switch\r\n      const updatedFrequency = frequency === this.sellerEnforcementFrequencyType.MANUAL ? this.sellerEnforcementFrequencyType.DAILY : this.sellerEnforcementFrequencyType.MANUAL\r\n      this.changeFrequency({ id: id, frequency: updatedFrequency })\r\n      this.vToasted('success', `Seller ${name} has been change frequency mode to ${updatedFrequency} successfully`)\r\n    },\r\n    async removeItem() {\r\n      try {\r\n        const id = this.selected.remove.id\r\n        await this.removeSeller(id)\r\n        this.vToasted('success', `Seller ${this.selected.remove.name} has been deleted successfully`)\r\n      } catch (error) {\r\n        this.vToasted('error', error.data.message)\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n  .map-list-title{\r\n    position: relative;\r\n    top: 4px;\r\n  }\r\n  .dropdown-action {\r\n    margin: 0 !important;\r\n  }\r\n  .max-width-300{\r\n    max-width: 300px;\r\n  }\r\n  .w-10{\r\n    width: 10%!important;\r\n  }\r\n  ul {\r\n    list-style-type: none;\r\n    margin: 0;\r\n    padding: 0;\r\n    overflow: hidden;\r\n  }\r\n\r\n  li {\r\n    float: left;\r\n  }\r\n\r\n  li a {\r\n    display: block;\r\n    color: white;\r\n    text-align: center;\r\n    padding: 16px;\r\n    text-decoration: none;\r\n  }\r\n  ol, ul, dl {\r\n     margin-top: 0px!important;\r\n     margin-bottom: 0px!important;\r\n  }\r\n  ::v-deep .sender-td {\r\n    max-width: 250px;\r\n  }\r\n  .disabled-icon {\r\n    pointer-events: none;\r\n    cursor: not-allowed;\r\n\r\n    .fa {\r\n      color: #6c757d;\r\n      opacity: 0.5;\r\n    }\r\n  }\r\n\r\n  ::v-deep .small-dropdown {\r\n    ul {\r\n      min-width: 10px!important;\r\n      li {\r\n        width: 100%;\r\n        .dropdown-divider {\r\n          margin: 0;\r\n        }\r\n        .dropdown-item {\r\n          font-size: 0.76563rem;\r\n          line-height: 1.5;\r\n          padding: 8px 20px;\r\n        }\r\n      }\r\n    }\r\n  }\r\n  .drp-actions ::v-deep {\r\n    .dropdown-menu {\r\n      min-width: 50%;\r\n      height: auto;\r\n      .cls-icon-trash {\r\n        color: #DC3545;\r\n        margin-right: 5px;\r\n      }\r\n      .dropdown-item {\r\n        padding: 6px 15px;\r\n        font-size: 12px;\r\n      }\r\n    }\r\n  }\r\n</style>\r\n"],"sourceRoot":"src/components/page/sellerEnforcements"}]}