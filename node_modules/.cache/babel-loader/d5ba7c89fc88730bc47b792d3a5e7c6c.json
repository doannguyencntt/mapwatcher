{"remainingRequest":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js!C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Project\\CBPO\\plat-mw-web\\src\\containers\\MWSidebarNav.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Project\\CBPO\\plat-mw-web\\src\\containers\\MWSidebarNav.vue","mtime":1629453115691},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626076743241},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1626076746842},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-plugin-babel\\node_modules\\babel-loader\\lib\\index.js","mtime":1620898435163},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626076743241},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1620898436811}],"contextDependencies":[],"result":["import \"core-js/modules/es7.object.get-own-property-descriptors\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:/Project/CBPO/plat-mw-web/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport \"core-js/modules/es6.function.name\";\nimport \"core-js/modules/web.dom.iterable\";\nimport \"core-js/modules/es6.array.iterator\";\nimport \"core-js/modules/es6.object.keys\";\nimport _defineProperty from \"C:/Project/CBPO/plat-mw-web/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\n//\n//\n//\n//\nimport SidebarNav from \"./SidebarNav\";\nimport { mapGetters, mapActions } from 'vuex';\nimport _nav from '@/_nav';\nimport _ from 'lodash';\nimport each from 'lodash/each';\nimport has from 'lodash/has';\nimport * as TYPE from '@/actionTypes.js';\nexport default {\n  name: 'MWSidebar',\n  components: {\n    SidebarNav: SidebarNav\n  },\n  data: function data() {\n    return {};\n  },\n  computed: _objectSpread(_objectSpread({}, mapGetters({\n    planConfig: \"mw/\".concat(TYPE.GET_PLAN_CONFIG),\n    getPermissions: \"mw/\".concat(TYPE.GET_PERMISSIONS)\n  })), {}, {\n    nav: function nav() {\n      var _this = this;\n\n      // check permissions\n      var menuItems = [{\n        name: 'Home',\n        icon: 'icon-home',\n        to: {\n          name: 'ps-dashboard'\n        }\n      }];\n      var mwPermissions = this.getPermissions;\n\n      if (mwPermissions && mwPermissions.permissions) {\n        // render mw nav based on permission\n        var permissionsFromStore = mwPermissions.permissions;\n        var permissionsArray = Object.keys(permissionsFromStore).filter(function (k) {\n          return permissionsFromStore[k];\n        });\n\n        if (!_.isEmpty(permissionsArray)) {\n          each(_nav.items, function (item) {\n            if (_.size(item.permissions) === 0) {\n              // check the menu Seller Enforcements\n              if (_.has(item, 'to') && _.has(_this.planConfig, 'seller_enforcement_enabled')) {\n                if (item.to.name === 'MWListSellerEnforcements' && _this.planConfig.seller_enforcement_enabled === false) return;\n              }\n\n              if (_.has(item, 'to') && permissionsFromStore.seview === false) {\n                if (item.to.name === 'MWListSellerEnforcements') return;\n              } // check the menu MAP Pricing (gs) and planConfig google_shopping\n\n\n              if (_.has(item, 'to') && _.has(permissionsFromStore, 'gsmapman')) {\n                if (item.to.name === 'MWGSListMaps' && permissionsFromStore.gsmapman === false || item.to.name === 'MWGSListMaps' && _this.planConfig.max_of_reports_with_google_shopping === 0) return;\n              } // check the menu MAP Pricing and planConfig amazon_marketplaces\n\n\n              if (_.has(item, 'to') && _.has(permissionsFromStore, 'mapman')) {\n                if (item.to.name === 'MWListMaps' && permissionsFromStore.mapman === false || item.to.name === 'MWListMaps' && _.isEmpty(_this.planConfig.allowed_amazon_marketplaces) || item.to.name === 'MWListMaps' && _this.planConfig.max_of_reports_with_amazon === 0) return;\n              }\n\n              menuItems.push(item);\n            } else {\n              var filterPermissions = _.filter(item.permissions, function (permission) {\n                return !_.includes(permissionsArray, permission);\n              });\n\n              if (_.isEmpty(filterPermissions)) {\n                // check the menu SELLERS & INVESTIGATIONS\n                if (_.has(item, 'to') && _.has(_this.planConfig, 'seller_investigation_dashboard')) {\n                  var siPageList = ['MWSellerDashboardIndex', 'MWSIListings', 'MWSISellerList'];\n                  if (_.includes(siPageList, item.to.name) && _this.planConfig.seller_investigation_dashboard === false || _.includes(siPageList, item.to.name) && permissionsFromStore.siview === false) return;\n                }\n\n                if (_.has(item, 'meta') && _.has(_this.planConfig, 'seller_investigation_dashboard')) {\n                  if (item.meta.isSIParent && _this.planConfig.seller_investigation_dashboard === false || item.meta.isSIParent && permissionsFromStore.siview === false) return;\n                }\n\n                menuItems.push(item);\n              }\n            }\n          });\n          return menuItems;\n        } else if (mwPermissions && mwPermissions.module_enabled) {\n          each(_nav.items, function (item) {\n            if (_.size(item.permissions) === 0) {\n              menuItems.push(item);\n            }\n          });\n        }\n      }\n\n      return menuItems;\n    },\n    isSIPage: function isSIPage() {\n      var siPageUrlList = ['si-listings', 'sellers', 'listings'];\n\n      for (var _i = 0, _siPageUrlList = siPageUrlList; _i < _siPageUrlList.length; _i++) {\n        var item = _siPageUrlList[_i];\n        if (this.$route.path.includes(item)) return true;\n      }\n\n      return false;\n    }\n  }),\n  methods: _objectSpread(_objectSpread({}, mapActions({\n    fetchPermissions: \"mw/\".concat(TYPE.FETCH_PERMISSIONS)\n  })), {}, {\n    fetchPermissionsWithCache: function () {\n      var _fetchPermissionsWithCache = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.fetchPermissions();\n\n              case 2:\n                this.gotoGlobalHomePageIfFailPlanConfig();\n\n              case 3:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function fetchPermissionsWithCache() {\n        return _fetchPermissionsWithCache.apply(this, arguments);\n      }\n\n      return fetchPermissionsWithCache;\n    }(),\n    gotoGlobalHomePageIfFailPlanConfig: function gotoGlobalHomePageIfFailPlanConfig() {\n      if (this.planConfig.seller_enforcement_enabled === false && this.$route.path.includes('seller-enforcements')) {\n        alert('seller-enforcements');\n        this.$router.push({\n          'name': 'ps-dashboard'\n        });\n      } else if (this.planConfig.seller_investigation_dashboard === false && this.isSIPage) {\n        this.$router.push({\n          'name': 'ps-dashboard'\n        });\n      }\n    },\n    getShareToken: function getShareToken(payload) {\n      var token = has(payload, 'share_token') ? payload.share_token : null;\n      var config = token ? {\n        share_token: token\n      } : {};\n      return {\n        config: config\n      };\n    }\n  }),\n  watch: {\n    '$route.path': {\n      immediate: true,\n      handler: function () {\n        var _handler = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee2() {\n          var _this2 = this;\n\n          return regeneratorRuntime.wrap(function _callee2$(_context2) {\n            while (1) {\n              switch (_context2.prev = _context2.next) {\n                case 0:\n                  if (!(this.$route.meta && this.$route.meta.reloadPermissions)) {\n                    _context2.next = 5;\n                    break;\n                  }\n\n                  _context2.next = 3;\n                  return this.fetchPermissions(this.getShareToken(this.$route.query)).then(function () {\n                    if (_this2.isSIPage || _this2.$route.path.includes('seller-enforcements')) {\n                      _this2.gotoGlobalHomePageIfFailPlanConfig();\n                    }\n                  });\n\n                case 3:\n                  _context2.next = 7;\n                  break;\n\n                case 5:\n                  _context2.next = 7;\n                  return this.fetchPermissionsWithCache();\n\n                case 7:\n                case \"end\":\n                  return _context2.stop();\n              }\n            }\n          }, _callee2, this);\n        }));\n\n        function handler() {\n          return _handler.apply(this, arguments);\n        }\n\n        return handler;\n      }()\n    }\n  } // async created() {\n  //   console.log('sidebar')\n  //   await this.fetchPermissions()\n  // },\n  // methods: {\n  //   ...mapActions({\n  //     fetchPermissions: `mw/${TYPE.FETCH_PERMISSIONS}`\n  //   })\n  // }\n\n};",null]}