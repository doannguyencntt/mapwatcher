{"remainingRequest":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Project\\CBPO\\plat-mw-web\\src\\components\\page\\brands\\TableReportMapJob.vue?vue&type=template&id=7b007000&scoped=true&","dependencies":[{"path":"C:\\Project\\CBPO\\plat-mw-web\\src\\components\\page\\brands\\TableReportMapJob.vue","mtime":1630397532451},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626076743241},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\loaders\\templateLoader.js","mtime":1620898436811},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626076743241},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1620898436811}],"contextDependencies":[],"result":["\n<b-card :header=\"caption\">\n  <template v-slot:header>\n    <p class=\"my-0 pull-left align-middle brand-list-title\">\n      <i class=\"icons icon-tag font-weight-bold\"></i>\n      <strong> {{ caption }}</strong>\n    </p>\n    <div v-if=\"getPermissions.module_enabled && getPermissions.permissions.braman\" class=\"pull-right align-middle\">\n      <b-button-group>\n        <router-link :to=\"{ name: 'MWAddBrands', params: { client_id: nav.clientId } }\" tag=\"button\" class=\"btn btn-primary btn-sm\">\n          <i class=\"icons icon-plus\"></i> Add\n        </router-link>\n      </b-button-group>\n    </div>\n  </template>\n  <b-row>\n    <b-col md=\"4\" offset-md=\"4\" class=\"my-0 mb-4\">\n      <b-form-group class=\"mb-0\">\n        <b-input-group class=\"search cancel-action\">\n          <b-form-input\n            placeholder=\"Enter report name\"\n            ref=\"inputSearch\"\n            v-model=\"params.s\"\n            @keyup.enter=\"\n              params.page = 1\n              paramsChange()\n            \"\n          ></b-form-input>\n          <i\n            v-show=\"params.s\"\n            @click=\"\n              params.s = ''\n              params.page = 1\n              paramsChange()\n            \"\n            class=\"icon-close cancel-icon\"\n          ></i>\n          <b-input-group-append>\n            <b-button\n              @click=\"\n                params.page = 1\n                paramsChange()\n              \"\n            >\n              <i class=\"icons icon-magnifier\"></i>\n            </b-button>\n          </b-input-group-append>\n        </b-input-group>\n      </b-form-group>\n    </b-col>\n  </b-row>\n  <b-table\n    :dark=\"dark\"\n    :hover=\"hover\"\n    :striped=\"striped\"\n    :bordered=\"bordered\"\n    :small=\"small\"\n    outlined\n    responsive=\"sm\"\n    :items=\"dataSet.items\"\n    :fields=\"captions\"\n    show-empty\n    thead-class=\"thead-light\"\n    :no-local-sorting=\"true\"\n    @sort-changed=\"sortChange($event)\"\n  >\n    <template v-slot:empty>\n      <div class=\"empty\">There is no data</div>\n    </template>\n    <template v-slot:cell(name_in_dashboard)=\"data\">\n      <p class=\"mb-0\">{{ data.item.name_in_dashboard }}</p>\n      <p class=\"mb-0\">True MAP:\n        <i :class=\"data.item.true_map_report ? 'text-success' : 'text-secondary' \" class=\"icon-check icons rounded-circle icon_true_map\"></i>\n      </p>\n      <!--        <p v-show=\"data.item.marketplace_amazon_com.name\" class=\"mb-0 small\">Brand: {{data.item.marketplace_amazon_com.name}}</p>-->\n      <!--        <p v-show=\"data.item.marketplace_amazon_ca.name\" class=\"mb-0 small\">Amazon.ca: {{data.item.marketplace_amazon_ca.name}}</p>-->\n      <!--        <p v-show=\"data.item.marketplace_google_shopping.name\" class=\"mb-0 small\">Google Shopping: {{data.item.marketplace_google_shopping.name}}</p>-->\n    </template>\n    <template v-slot:cell(active)=\"row\">\n      <b-form-checkbox v-model=\"row.item.active\" :disabled=\"true\" switch></b-form-checkbox>\n    </template>\n    <template v-slot:cell(updated)=\"row\">\n      <div class=\"d-flex flex-column d-flex justify-content-center\">\n        <span>{{ row.item.updated | formatTime | moment('from') }}</span>\n      </div>\n    </template>\n    <template v-slot:cell(actions)=\"row\" v-if=\"getPermissions.module_enabled && getPermissions.permissions.braman\">\n      <b-dropdown id=\"manage-dropdown\" variant=\"primary\" size=\"sm\">\n        <template v-slot:button-content> <i class=\"icon-settings\"></i> Manage </template>\n        <b-dropdown-item-button @click=\"handleEditBrand(row.item)\"> <i class=\"icon-note \"></i> Edit </b-dropdown-item-button>\n        <b-dropdown-item-button variant=\"danger\" @click=\"handleRemoveItems(row.item)\"> <i class=\"icon-close \"></i> Remove </b-dropdown-item-button>\n      </b-dropdown>\n    </template>\n    <template v-slot:cell(status)=\"row\">\n      <div v-if=\"row.item.active\">\n        <div class=\"alert-primary p-2 mt-2 mb-2\" v-for=\"(item, indexActiveMarketplaces) in row.item.activeMarketplaces\" :key=\"item.key\">\n          <h6 class=\"report-marketplace-header\">\n            {{ item.label }}\n            <div class=\"report-marketplace-name\">(brand: {{ item.info.name }})</div>\n          </h6>\n          <div data-v-30d88980=\"\" class=\"d-flex justify-content-between align-items-center\">\n            <div data-v-30d88980=\"\" role=\"group\" class=\"btn-group\">\n              <button\n                :variant=\"item.info.last_job_status && (item.info.last_job_status !== 'running') ? 'warning' : 'secondary'\"\n                :disabled=\"(item.info.last_job_status && (item.info.last_job_status === 'running')) || !getPermissions.module_enabled || !getPermissions.permissions.braexe || isExceeded(row.item, item.key)\"\n                @click=\"showModalRunJob(row.item, item.value)\"\n                data-v-30d88980=\"\"\n                type=\"button\"\n                class=\"btn btn-warning btn-sm\"\n              >\n                <i data-v-30d88980=\"\" class=\"icon-control-play icons\"></i> Run\n              </button>\n            </div>\n            <div class=\"d-flex align-items-center\" v-if=\"item.info.last_job_status && item.info.last_job_status === 'running'\">\n              <b-spinner small class=\"custom_icon\"></b-spinner>\n              <span class=\"job-progress badge badge-secondary ml-1\">{{ item.info.last_job_progress }}%</span>\n            </div>\n            <div class=\"d-flex align-items-center\" v-else>\n              <i class=\"icon-check icons rounded-circle bg-success custom_icon\" v-if=\"item.info.last_job_status && item.info.last_job_status === 'success'\"></i>\n              <i class=\"icon-close icons text-danger custom_icon\" v-if=\"item.info.last_job_status && item.info.last_job_status === 'cancelled'\"></i>\n              <i class=\"icon-ghost icons text-danger custom_icon\" v-if=\"item.info.last_job_status && item.info.last_job_status === 'dead'\"></i>\n              <i class=\"fa fa-frown-o text-danger custom_icon\" v-if=\"item.info.last_job_status && item.info.last_job_status === 'error'\"></i>\n              <span data-v-30d88980=\"\" class=\"ml-2 small\">\n                {{ !item.info.last_job_status ? 'No report' : capitalize(item.info.last_job_status) }}\n              </span>\n            </div>\n            <div class=\"small\" v-if=\"item.info.last_job_status && typeof item.info.number_processed_map === 'number'\">\n              {{ item.info.number_processed_map }} / {{ item.info.number_total_map }}\n            </div>\n            <div class=\"small\" v-else>\n              N/A\n            </div>\n            <b-button-group >\n              <button\n                      :variant=\"'primary'\"\n                      @click=\"handleExportForJob(row.item, row.index, item.value, indexActiveMarketplaces)\"\n                      :disabled=\"row.item.activeMarketplaces[indexActiveMarketplaces].info.isLoad\"\n                      v-if=\"item.info.last_job_created && item.info.latest_job && item.info.latest_job.status !== 'running' && item.info.number_processed_map === item.info.number_total_map && (!item.info.all_seller_mode || item.info.all_seller_mode === AllSellerMode.NONE)\"\n                      data-v-30d88980=\"\"\n                      type=\"button\"\n                      class=\"btn btn-primary btn-sm\"\n              >\n                <i v-if=\"!row.item.activeMarketplaces[indexActiveMarketplaces].info.isLoad\" class=\"icon-cloud-download icons\"></i>\n                <b-spinner v-if=\"row.item.activeMarketplaces[indexActiveMarketplaces].info.isLoad\" label=\"Spinning\" class=\"icon- btn-loader\">{{row.item.activeMarketplaces[indexActiveMarketplaces].info.isLoad}}</b-spinner>\n                Download\n              </button>\n              <b-dropdown :disabled=\"row.item.activeMarketplaces[indexActiveMarketplaces].info.isLoad\" v-if=\"item.info.last_job_created && item.info.latest_job && item.info.latest_job.status !== 'running' && item.info.number_processed_map === item.info.number_total_map && (item.info.all_seller_mode && item.info.all_seller_mode !== AllSellerMode.NONE)\" id=\"manage-dropdown\" variant=\"primary\" size=\"sm\">\n                <template v-slot:button-content>\n                  <i v-if=\"!row.item.activeMarketplaces[indexActiveMarketplaces].info.isLoad\" class=\"icon-cloud-download icons\"></i>\n                  <b-spinner v-if=\"row.item.activeMarketplaces[indexActiveMarketplaces].info.isLoad\" label=\"Spinning\" class=\"icon- btn-loader\"></b-spinner>\n                  Download\n                </template>\n                <b-dropdown-item-button :disabled=\"row.item.activeMarketplaces[indexActiveMarketplaces].info.isLoad\" @click=\"handleExportForJob(row.item, row.index, item.value, indexActiveMarketplaces, DashboardFilterSourceType.VIOLATIONS)\">\n                  Download Violations\n                </b-dropdown-item-button>\n                <b-dropdown-item-button :disabled=\"row.item.activeMarketplaces[indexActiveMarketplaces].info.isLoad\" @click=\"handleExportForJob(row.item, row.index, item.value, indexActiveMarketplaces, DashboardFilterSourceType.ALL_SELLERS)\">\n                  Download All Items\n                </b-dropdown-item-button>\n              </b-dropdown>\n              <button\n                type=\"button\"\n                :disabled=\"isExceeded(row.item, item.key)\"\n                @click=\"handleNavToHistoryMarketplacePage(row.item._id, item.value, row.item.name_in_dashboard)\"\n                class=\"btn btn-secondary btn-sm\"\n              >\n                <i class=\"icon-clock icons rounded-circle\"></i><div class=\"ml-1 d-inline\">History</div>\n              </button>\n            </b-button-group>\n          </div>\n        </div>\n      </div>\n    </template>\n  </b-table>\n  <nav class=\"d-flex justify-content-center\" v-if=\"dataSet.total > dataSet.page_size && dataSet.items.length > 0\">\n    <b-pagination\n      :total-rows=\"dataSet.total\"\n      :per-page=\"params.limit\"\n      v-model=\"params.page\"\n      prev-text=\"Prev\"\n      next-text=\"Next\"\n      hide-goto-end-buttons\n      @change=\"\n        params.page = $event\n        paramsChange()\n      \"\n      hide-ellipsis\n    />\n  </nav>\n  <b-modal title=\"Please confirm\" centered v-model=\"dialog.run\" @ok=\"handleRunJob(selected.run)\">\n    Are you sure you want to start running the job to get a report?\n    <br />\n    <br />\n    <b-form-checkbox v-model=\"dialog.force_run\" @checked=\"dialog.force_run\">\n      Force re-run all MAP (cleanup all today violations and run again)\n    </b-form-checkbox>\n    <br />\n    <b-form-checkbox v-model=\"dialog.ignore_cache\" @checked=\"dialog.ignore_cache\">\n      Ignore cache (use the latest marketplace listing)\n    </b-form-checkbox>\n    <template v-slot:modal-footer=\"{ ok, cancel }\">\n      <b-button size=\"md\" variant=\"warning\" @click=\"ok()\"> <i class=\"icon-check icons\"></i> Yes, I understand &amp; confirm! </b-button>\n      <b-button size=\"md\" variant=\"secondary\" @click=\"cancel()\"> <i class=\"icon-close icons\"></i> No </b-button>\n    </template>\n  </b-modal>\n  <b-modal title=\"Please confirm\" centered v-model=\"dialog.remove\" @ok=\"removeBrands(selected.remove)\" ok-variant=\"danger\">\n    Are you sure you want to delete this report?\n    <template v-slot:modal-footer=\"{ ok, cancel }\">\n      <b-button variant=\"warning\" @click=\"ok()\"> <i class=\"icon-check\"></i> Yes, I understand &amp; confirm! </b-button>\n      <b-button variant @click=\"cancel()\"> <i class=\"icon-close\"></i> No </b-button>\n    </template>\n  </b-modal>\n  <b-modal title modal-class=\"modal-primary mw-modal-custom\" ok-title=\"YES\" cancel-title=\"NO\" v-model=\"dialog.cancel\" @ok=\"handleRun(selected.run)\" ok-variant=\"primary\"\n    >Are you sure you want to run data processing for this report?</b-modal\n  >\n</b-card>\n",null]}