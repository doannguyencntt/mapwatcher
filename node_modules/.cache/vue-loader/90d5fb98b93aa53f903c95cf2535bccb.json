{"remainingRequest":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Project\\CBPO\\plat-mw-web\\src\\components\\page\\gs-maps\\ListMaps.vue?vue&type=template&id=31170928&scoped=true&","dependencies":[{"path":"C:\\Project\\CBPO\\plat-mw-web\\src\\components\\page\\gs-maps\\ListMaps.vue","mtime":1639628727983},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626076743241},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\loaders\\templateLoader.js","mtime":1620898436811},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1626076743241},{"path":"C:\\Project\\CBPO\\plat-mw-web\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader\\lib\\index.js","mtime":1620898436811}],"contextDependencies":[],"result":["\n<div class=\"animated fadeIn\">\n  <b-card :header=\"caption\">\n    <template v-slot:header>\n      <p class=\"po-list-title my-0 pull-left align-middle map-list-title\">\n        <strong><i class=\"icon-book-open icons\"></i> {{ caption }}</strong>\n        <span v-if=\"listMaps && listMaps.total\">\n          (Total:\n          {{ new Number(listMaps.total || 0).toLocaleString('en') }})</span\n        >\n        <span v-else> (Total: 0)</span>\n      </p>\n      <div class=\"pull-right\">\n        <b-button-group>\n          <router-link\n            v-if=\"\n              getPermissions.module_enabled &&\n              getPermissions.permissions.gsmapman\n            \"\n            :to=\"{\n              name: 'MWImportGSMaps',\n              params: { client_id: nav.clientId }\n            }\"\n            tag=\"button\"\n            class=\"btn btn-primary btn-sm\"\n          >\n            <i class=\"icons icon-cloud-upload\"></i> Import\n          </router-link>\n          <b-button\n            variant=\"primary\"\n            size=\"sm\"\n            @click=\"\n              () => {\n                handleOpenModelDownload()\n              }\n            \"\n          >\n            <i class=\"icons icon-cloud-download\"></i> Export\n            <b-spinner\n              v-if=\"$store.state.mw.maps.loadingDownload\"\n              label=\"Spinning\"\n              class=\"icon- btn-loader\"\n            ></b-spinner>\n          </b-button>\n        </b-button-group>\n      </div>\n    </template>\n    <b-row>\n      <b-col class=\"mb-4 col-1\">\n        <b-dropdown\n          v-if=\"selectedMaps.length\"\n          text=\"Actions\"\n          class=\"dropdown-action\"\n        >\n          <b-dropdown-item-button\n            :disabled=\"\n              !getPermissions.module_enabled &&\n              !getPermissions.permissions.gsmapman\n            \"\n            @click=\"$bvModal.show('modal-confirm-remove-multi')\"\n          >\n            <i class=\"icon-close\"></i> Remove\n          </b-dropdown-item-button>\n        </b-dropdown>\n      </b-col>\n      <b-col class=\"mb-4 col-9\">\n        <b-form-group class=\"mb-0\">\n          <b-input-group class=\"search cancel-action align-items-center\">\n            <!-- Report -->\n            <label class=\"d-inline mb-0 pr-2\">Report:</label>\n            <b-form-select\n              @change=\"\n                params.page = 1\n                reportChange()\n              \"\n              v-model=\"params.report_id\"\n              :options=\"reportOptions\"\n            >\n              <template v-slot:first>\n                <option :value=\"null\">All Reports</option>\n              </template>\n            </b-form-select>\n            <!-- Brand -->\n            <label class=\"d-inline mb-0 pr-2 ml-5\">Brand:</label>\n            <b-form-select\n              @change=\"\n                params.page = 1\n                paramsChange()\n              \"\n              v-model=\"params.brand_name\"\n              :options=\"brandOptions\"\n            >\n              <template v-slot:first>\n                <option :value=\"null\">All Brands</option>\n              </template>\n            </b-form-select>\n            <!-- Search -->\n            <label class=\"d-inline mb-0 pr-2 pl-2 ml-5\">Search:</label>\n            <b-form-input\n              @keyup.enter=\"\n                params.page = 1\n                paramsChange()\n              \"\n              placeholder=\"Enter keyword\"\n              ref=\"inputSearch\"\n              v-model.trim=\"params.search\"\n            ></b-form-input>\n            <i\n              v-show=\"params.search\"\n              @click=\"\n                params.page = 1\n                params.search = ''\n                paramsChange()\n              \"\n              class=\"icon-close cancel-icon\"\n            ></i>\n            <b-input-group-append>\n              <b-button\n                @click=\"\n                  params.page = 1\n                  paramsChange()\n                \"\n              >\n                <i class=\"icons icon-magnifier\"></i>\n              </b-button>\n            </b-input-group-append>\n          </b-input-group>\n        </b-form-group>\n      </b-col>\n    </b-row>\n    <b-table\n      :dark=\"dark\"\n      :hover=\"hover\"\n      striped\n      :small=\"small\"\n      outlined\n      responsive=\"sm\"\n      thead-class=\"thead-light text-nowrap\"\n      :items=\"getItems\"\n      :fields=\"captions\"\n      show-empty\n      class=\"overflow-auto\"\n    >\n      <template v-slot:empty>\n        <LoadingSpinner :isLoading=\"mapPricingGsLoading\" v-if=\"mapPricingGsLoading\"/>\n        <div class=\"align-middle d-flex justify-content-center align-items-center\" v-else>No MAP</div>\n      </template>\n      <template v-slot:head(selected)>\n        <b-form-checkbox v-model=\"allSelected\" />\n      </template>\n      <template v-slot:cell(selected)=\"row\">\n        <b-form-checkbox\n          :key=\"row.index\"\n          :value=\"row.item.id\"\n          v-model=\"selectedMaps\"\n        />\n      </template>\n      <template class=\"align-items-baseline\" v-slot:cell(asin)=\"data\">\n        <span class=\"mr-1\">{{ data.item.asin }}</span>\n        <a\n          class=\"text-decoration-none text-wrap d-inline-block\"\n          target=\"_blank\"\n          v-if=\"data.item.asin\"\n          :href=\"generateAmazonLink(data.item.asin)\"\n          >A<i class=\"fa fa-link\" aria-hidden=\"true\"></i\n        ></a><br>\n        <div class=\"badge badge-secondary text-wrap font-weight-normal text-left\" v-if=\"data.item.amazon_title\">\n          {{ data.item.amazon_title }}\n        </div>\n      </template>\n      <template class=\"align-items-baseline\" v-slot:cell(price)=\"data\"\n        >${{ data.item.price | formatNumber }}</template\n      >\n      <template v-slot:cell(gpid)=\"{ item }\">\n        <div v-if=\"item.gpid\">\n          <div class=\"badge badge-info\">\n            <span>{{ item.gpid }}</span>\n          </div>\n          <div class=\"badge badge-secondary text-wrap font-weight-normal text-left\" v-if=\"item.title\">\n            {{ item.title }}\n          </div><br>\n          <a\n            v-if=\"item.gpid && item.link\"\n            class=\"mr-2 text-decoration-none text-wrap d-inline-block\"\n            target=\"_blank\"\n            :href=\"item.link\"\n            >G<i class=\"fa fa-link\" aria-hidden=\"true\"></i\n          ></a>\n          <button\n            @click=\"updateCurrentMapItem(item), handleRemoveDiscoveredGpid()\"\n            v-if=\"item.gpid\"\n            type=\"button\"\n            class=\"btn btn-secondary btn-sm\"\n          >\n            <i class=\"fa fa-ban\" aria-hidden=\"true\"></i>\n          </button>\n        </div>\n        <div class=\"mb-0 w-100 p-0\" v-for=\"(itemGpid, indexGpid) in item.discovered_gpids\" :key=\"indexGpid\">\n          <div v-if=\"itemGpid.status === GoogleShoppingMapStatus.ACCEPTED && item.gpid !== itemGpid.gpid\">\n            <div class=\"badge badge-info\">\n              <span>{{ itemGpid.gpid }}</span>\n            </div>\n            <div class=\"badge badge-secondary text-wrap font-weight-normal text-left\" v-if=\"itemGpid.title\">\n              {{ itemGpid.title }}\n            </div><br>\n            <a\n              v-if=\"itemGpid.gpid && itemGpid.link\"\n              class=\"mr-2 text-decoration-none text-wrap d-inline-block\"\n              target=\"_blank\"\n              :href=\"itemGpid.link\"\n              >G<i class=\"fa fa-link\" aria-hidden=\"true\"></i\n            ></a>\n            <button\n              @click=\"updateCurrentMapItem(item, itemGpid), handleRemoveDiscoveredGpid()\"\n              v-if=\"itemGpid.gpid\"\n              type=\"button\"\n              class=\"btn btn-secondary btn-sm\"\n            >\n              <i class=\"fa fa-ban\" aria-hidden=\"true\"></i>\n            </button>\n          </div>\n        </div>\n      </template>\n      <template v-slot:cell(discovered_gpids)=\"{ item }\">\n        <b-button\n          :variant=\"item.reviewButtonVariant\"\n          size=\"sm\"\n          class=\"w-100\"\n          :disabled=\"item.discovered_gpids.length === 0\"\n          :class=\"(item.checkAccepted.length <= 1 && item.checkNormal.length <= 1) ? 'font-weight-normal' : 'font-weight-bold'\"\n          @click=\"handleReviewDiscoveredGpids(item.discovered_gpids, item)\"\n        >\n          <i class=\"icon-note\"></i>\n          <span v-if=\"item.checkAccepted.length >= 1\"> Review ({{ item.checkAccepted.length }}/{{ item.discovered_gpids.length }})</span>\n          <span v-else> Review ({{ item.checkNormal.length }}/{{ item.discovered_gpids.length }})</span>\n        </b-button>\n      </template>\n      <template v-slot:cell(active)=\"row\">\n        <b-form-checkbox\n          v-model=\"row.item.active\"\n          :disabled=\"true\"\n        ></b-form-checkbox>\n      </template>\n      <template v-slot:cell(last_violation_checked)=\"data\">\n        <div class=\"float-left\" v-if=\"data.item.has_processed\">\n          {{ data.item.last_violation_checked | moment('MM/DD/YYYY') }}\n        </div>\n        <div class=\"float-left\" v-else>N/A</div>\n        <i\n          v-if=\"data.item.has_processed\"\n          class=\"\n            icon-check\n            icons\n            rounded-circle\n            bg-success\n            custom_icon\n            float-left\n            ml-2\n          \"\n        ></i>\n        <i\n          v-if=\"!data.item.has_processed\"\n          class=\"\n            icon-clock\n            icons\n            rounded-circle\n            bg-secondary\n            custom_icon\n            float-left\n            ml-2\n          \"\n        ></i>\n      </template>\n      <template\n        v-slot:cell(actions)=\"row\"\n        v-if=\"getPermissions.module_enabled && getPermissions.permissions.gsmapman\"\n      >\n        <div>\n          <b-dropdown variant=\"primary\" size=\"sm\" split text=\"Edit\" @click=\"handleEditMap(row.item.id)\" class=\"drp-actions\">\n            <b-dropdown-item variant=\"danger\" @click=\"$bvModal.show('modal-confirm-delete-map'), mapId = row.item.id\">\n              <i class=\"icon-trash cls-icon-trash\"></i>Remove\n            </b-dropdown-item>\n          </b-dropdown>\n        </div>\n      </template>\n      <template v-slot:view>\n        <b-button class=\"mr-1 my-1\" variant=\"primary\">\n          <i class=\"fa fa-window-restore fa-lg\"></i> Revision\n        </b-button>\n      </template>\n    </b-table>\n    <b-modal\n      title=\"Please confirm\"\n      centered\n      id=\"modal-confirm-denied-gpid\"\n      @ok=\"handleDeniedDiscoveredGpid()\"\n      ok-variant=\"danger\"\n    >\n      Are you sure you want to deny this GPID?\n      <template v-slot:modal-footer=\"{ ok, cancel }\">\n        <b-button variant=\"warning\" @click=\"ok()\">\n          <i class=\"icon-check\"></i> Yes, I understand &amp; confirm!\n        </b-button>\n        <b-button variant @click=\"cancel()\">\n          <i class=\"icon-close\"></i> No\n        </b-button>\n      </template>\n    </b-modal>\n    <b-modal\n      title=\"Please confirm\"\n      centered\n      id=\"modal-confirm-remove-discovered-gpid\"\n      @ok=\"handleRemoveDiscoveredGpid()\"\n      ok-variant=\"danger\"\n    >\n      Are you sure you want to remove this GPID?\n      <template v-slot:modal-footer=\"{ ok, cancel }\">\n        <b-button variant=\"warning\" @click=\"ok()\">\n          <i class=\"icon-check\"></i> Yes, I understand &amp; confirm!\n        </b-button>\n        <b-button variant @click=\"cancel()\">\n          <i class=\"icon-close\"></i> No\n        </b-button>\n      </template>\n    </b-modal>\n    <b-modal\n      title=\"Please confirm\"\n      centered\n      id=\"modal-confirm-clone-gpid\"\n      @ok=\"handleAcceptDiscoveredGpid()\"\n      ok-variant=\"danger\"\n    >\n      Are you sure you want to confirm this GPID is 100% correct?\n      <template v-slot:modal-footer=\"{ ok, cancel }\">\n        <b-button variant=\"warning\" @click=\"ok()\">\n          <i class=\"icon-check\"></i> Yes, I understand &amp; confirm!\n        </b-button>\n        <b-button variant @click=\"cancel()\">\n          <i class=\"icon-close\"></i> No\n        </b-button>\n      </template>\n    </b-modal>\n    <b-modal\n      title=\"Please confirm\"\n      centered\n      id=\"modal-confirm-delete-map\"\n      @ok=\"handleremoveGSMap(mapId)\"\n      ok-variant=\"danger\"\n    >\n      Are you sure you want to remove this MAP?\n      <template v-slot:modal-footer=\"{ ok, cancel }\">\n        <b-button variant=\"warning\" @click=\"ok()\">\n          <i class=\"icon-check\"></i> Yes, I understand &amp; confirm!\n        </b-button>\n        <b-button variant @click=\"cancel()\">\n          <i class=\"icon-close\"></i> No\n        </b-button>\n      </template>\n    </b-modal>\n    <b-modal\n      title=\"Please confirm\"\n      centered\n      id=\"modal-confirm-remove-multi\"\n      @ok=\"handleRemoveMulti\"\n    >\n      Are you sure you want to remove all selected MAPs?\n      <template v-slot:modal-footer=\"{ ok, cancel }\">\n        <b-button variant=\"danger\" @click=\"ok()\">\n          <i class=\"icon-check\"></i> Yes, I understand &amp; confirm!\n        </b-button>\n        <b-button variant @click=\"cancel()\">\n          <i class=\"icon-close\"></i> No\n        </b-button>\n      </template>\n    </b-modal>\n    <b-modal\n      :title=\"'Review Discovered GPID(s) of ASIN: ' + review.AsinName + ' and UPC: ' + review.UPC\"\n      centered\n      v-model=\"review.isOpenReview\"\n      id=\"modal-discovered-gpid\"\n      ok-variant=\"danger\"\n      size=\"xl\"\n    >\n      <p class=\"cls-amazon-title\" v-if=\"review.AmazonTitle\">\n        Amazon: <span class=\"badge text-wrap badge-secondary text-left\">{{ review.AmazonTitle }}</span>\n        <a\n          v-if=\"review.reviewMapItem.asin && review.reviewMapItem.asin != ''\"\n          target=\"_blank\"\n          class=\"ml-1\"\n          :href=\"generateAmazonLink(review.reviewMapItem.asin)\"\n          >A<i class=\"fa fa-link\" aria-hidden=\"true\"></i>\n        </a>\n      </p>\n      <div class=\"d-flex mb-2\">\n        <div class=\"d-flex cls-select-options align-items-center\">\n          <span class=\"cls-option-title\">Show: </span>\n          <b-form-select :options=\"valueOptions\" v-model=\"review.selectedOption\" class=\"drp-option\"></b-form-select>\n        </div>\n        <div class=\"cls-filter-title d-flex align-items-center ml-3\">\n          <span class=\"cls-option-title mr-1\">Title: </span>\n          <b-form-input v-model=\"review.textTitle\" placeholder=\"Enter your title\"></b-form-input>\n        </div>\n      </div>\n      <div class=\"tbl-review\">\n        <b-table\n          :dark=\"dark\"\n          :hover=\"hover\"\n          striped\n          :small=\"small\"\n          outlined\n          responsive=\"sm\"\n          thead-class=\"thead-light text-nowrap\"\n          :items=\"getListDiscoveredGPID\"\n          :fields=\"fieldsReview\"\n          class=\"overflow-auto\"\n          show-empty\n        >\n          <template v-slot:empty>\n            <div class=\"align-middle d-flex justify-content-center align-items-center\">No Google Products</div>\n          </template>\n\n          <template v-slot:cell(index)=\"data\">\n            {{ data.index + 1 }}\n          </template>\n\n          <template v-slot:cell(gpid)=\"{ item }\">\n            <div v-if=\"!item.status || item.status === GoogleShoppingMapStatus.NORMAL\" class=\"badge badge-info font-weight-normal\">\n              {{ item.gpid }}\n            </div>\n            <div v-if=\"item.status === GoogleShoppingMapStatus.DENIED\" class=\"badge badge-info cls-denied font-weight-normal\">\n              {{ item.gpid }}\n            </div>\n            <div v-if=\"item.status === GoogleShoppingMapStatus.ACCEPTED\" class=\"badge badge-info\">\n              {{ item.gpid }}\n            </div>\n          </template>\n\n          <template v-slot:cell(date)=\"{ item }\">\n            <div v-if=\"!item.status || item.status === GoogleShoppingMapStatus.NORMAL\" class=\"font-weight-normal\">\n              {{ item.date | moment('MM/DD/YYYY') }}\n            </div>\n            <div v-if=\"item.status === GoogleShoppingMapStatus.DENIED\" class=\"cls-denied font-weight-normal\">\n              {{ item.date | moment('MM/DD/YYYY') }}\n            </div>\n            <div v-if=\"item.status === GoogleShoppingMapStatus.ACCEPTED\" class=\"font-weight-bold\">\n              {{ item.date | moment('MM/DD/YYYY') }}\n            </div>\n          </template>\n\n          <template v-slot:cell(title)=\"{ item }\">\n            <div\n            class=\"font-weight-normal text-wrap\"\n            :class=\"{'cls-denied': item.status === GoogleShoppingMapStatus.DENIED}\">\n              <a target=\"_blank\" :href=\"item.image_uri\" v-if=\"item.image_uri\">\n                <img :src=\"item.image_uri\" width=\"80\" />\n              </a>\n              {{ item.title }}\n              <div v-if=\"item.is_similar_to_amazon_title\" class=\"badge badge-info font-weight-normal mr-1\">\n                Similar to Amazon Title\n              </div>\n              <div class=\"badge badge-info font-weight-normal\">\n                <span>{{ item.similar_to_amazon_title_score | formatPercentBase1}}%</span>\n              </div>\n            </div>\n          </template>\n\n          <template v-slot:cell(link)=\"{ item }\">\n            <a\n              v-if=\"item.gpid && item.link && item.link !== ''\"\n              target=\"_blank\"\n              :href=\"item.link\"\n              >G<i class=\"fa fa-link\" aria-hidden=\"true\"></i\n            ></a>\n          </template>\n\n          <template v-slot:cell(actions)=\"row\">\n            <b-button-group class=\"d-flex flex-row\">\n              <button\n                  type=\"button\"\n                  @click=\"\n                    updateCurrentMapItem(review.reviewMapItem, row.item)\n                    handleAcceptDiscoveredGpid()\n                  \"\n                  class=\"btn btn-success btn-sm\"\n                >\n                  <i class=\"fa fa-check text-white\" aria-hidden=\"true\"></i>\n                </button>\n                <button\n                  @click=\"\n                    updateCurrentMapItem(review.reviewMapItem, row.item)\n                    checkDenied()\n                  \"\n                  type=\"button\"\n                  class=\"btn btn-secondary btn-sm\"\n                >\n                  <i class=\"fa fa-ban\" aria-hidden=\"true\"></i>\n                </button>\n          </b-button-group>\n        </template>\n        </b-table>\n      </div>\n      <template v-slot:modal-footer=\"{ cancel }\">\n        <b-button variant @click=\"cancel()\">\n          <i class=\"icon-close\"></i> Close\n        </b-button>\n      </template>\n    </b-modal>\n    <nav\n      class=\"d-flex justify-content-center\"\n      v-if=\"listMaps.total > listMaps.page_size && listMaps.items.length > 0\"\n    >\n      <b-pagination\n        :total-rows=\"listMaps.total\"\n        :per-page=\"params.limit\"\n        v-model=\"params.page\"\n        prev-text=\"Prev\"\n        next-text=\"Next\"\n        hide-goto-end-buttons\n        @change=\";(params.page = $event), paramsChange()\"\n        limit=\"10\"\n        hide-ellipsis\n      />\n    </nav>\n  </b-card>\n</div>\n",null]}