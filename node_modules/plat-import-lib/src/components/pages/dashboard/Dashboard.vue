<template>
  <div class="animated fadeIn">
    <b-row>
      <b-col md="6" lg="6" sm="12" v-if="step === 1">
        <b-card>
          <template v-slot:header>
            <div class="d-flex justify-content-between align-items-center">
              <div>
                <b>Import MAPs</b>
              </div>
            </div>
          </template>
          <b-form>
            <b-form-group>
              <b-row class="align-items-center">
                <b-col md="12">
                  <label>Select CSV File</label>
                  <b-form-file v-model="file"></b-form-file>
                </b-col>
              </b-row>
            </b-form-group>
          </b-form>
          <template v-slot:footer>
            <b-button :disabled="!file" variant="primary" size="sm" @click="click()">
              <i class="icon-cloud-upload"></i> Upload
            </b-button>
            <b-button size="sm" class="ml-2" @click="$router.push({name: 'MWListMaps', params: {client_id: nav.clientId}})">
              <i class="icon-arrow-left-circle"></i> Cancel
            </b-button>
          </template>
        </b-card>
      </b-col>
      <b-col md="6" lg="6" sm="12" v-if="step === 2">
        <b-card>
          <b-table :items="items"></b-table>
          <b-button size="sm" class="ml-2" @click="step--">
              <i class="icon-arrow-left-circle"></i> Cancel
          </b-button>
          <b-button size="sm" class="ml-2" @click="step++">
              <i class="icon-arrow-left-circle"></i> Validate
          </b-button>
        </b-card>
      </b-col>
      <b-col md="6" lg="6" sm="12" v-if="step === 3">
        <b-card>
          <template v-slot:header>
            <span class="align-middle">
              Import
              <strong>Result</strong>
            </span>
          </template>
          <b-card-body>
            <ul>
              <li>
                <strong>Created</strong>
                : 1000
              </li>
              <li>
                <strong>Updated</strong>
                : 1000
              </li>
              <li>
                <strong>Deleted</strong>
                : 1000
              </li>
              <li>
                <strong>Errors</strong>
                <ul>
                  <li>100 at row #1</li>
                </ul>
              </li>
            </ul>
          </b-card-body>
        <b-button size="sm" class="ml-2" @click="step--">
          <i class="icon-arrow-left-circle"></i> Cancel
        </b-button>
        </b-card>
      </b-col>
    </b-row>
  </div>
</template>

<script>
export default {
  name: 'PFDashboard',
  data() {
    return {
      date_started: null,
      file_in_use: null,
      file: null,
      flag: {
        processed: false
      },
      brands: {
        items: [],
        isLoad: true
      },
      step: 1,
      items: [
        { target_1: 'row_1', target_2: '...', target_3: '...' },
        { target_1: 'row_2', target_2: '...', target_3: '...' },
        { target_1: 'row_3', target_2: '...', target_3: '...' },
        { target_1: 'row_4', target_2: '...', target_3: '...' }
      ]
    }
  },
  methods: {
    click() {
      this.step++
      var reader = new FileReader()
      reader.onload = function(evt) {
        console.log(evt)
      }
      reader.readAsText(this.file)
    }
  }
}
</script>

<style lang="scss" scoped>
</style>
